<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blockgame</title>


<!-- PRECONNECT HINT: Tells the browser to set up a connection to YouTube in the background for a faster click-through -->
<link rel="preconnect" href="https://www.youtube.com">

<style>
    body {
        background-color: #0d0d0d; color: #eee; font-family: 'Courier New', Courier, monospace;
        /* FLEXBOX CENTERING REMOVED - This is the key fix for mobile layout */
        min-height: 100vh; margin: 0; 
        padding: 2px;
        box-sizing: border-box; 
        overflow: hidden; 
        -webkit-tap-highlight-color: transparent;
    }
    canvas { 
        /* NEW ABSOLUTE CENTERING - This is the new, more robust method */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        
        background-color: #000; 
        border: none; 
        transition: background-color 0.5s ease; 
        max-width: 100%; 
        max-height: 100%; 
    }
    
    /* --- UI OVERLAY CONTAINER --- */
    #ui-overlay-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 5;
    }

    /* --- NEW PROGRESS BAR UI --- */
    #progress-bar-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 2px; /* A little thicker for visibility */
        background-color: #333;
        z-index: 8;
        display: none; /* Hidden by default */
    }
    #progress-bar {
        height: 100%;
        width: 100%;
        background-color: #2ECC40; /* Default green */
        transition: width 0.2s linear, background-color 0.5s ease;
    }
    /* Zone-specific colors */
    #progress-bar.red-zone { background-color: #FF4136; }
    #progress-bar.rainbow-zone { background-image: linear-gradient(to right, #FF4136, #FFDC00, #2ECC40, #7FDBFF, #F012BE); }
    #progress-bar.ninja-zone { background-color: #7FDBFF; }
    #progress-bar.alphabet-zone { background-color: #F012BE; }
    /* Warning state for "Zone Incoming" */
    #progress-bar.warning {
        animation: pulse-warning 1.5s infinite ease-in-out;
    }
    @keyframes pulse-warning {
        0% { background-color: #FF851B; }
        50% { background-color: #FF4136; }
        100% { background-color: #FF851B; }
    }


    /* --- Base Modal Styles --- */
    .modal-overlay {
        display: flex; flex-direction: column;
        position: absolute; top: 50%; left: 50%; 
        transform: translate(-50%, -150%);
        opacity: 0;
        visibility: hidden;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out, visibility 0s 0.3s;
        background-color: #1a1a1a;
        border: 3px solid #fff;
        box-shadow: 0 0 0 3px #000, 0 0 0 6px #fff, 6px 6px 0 6px rgba(0,0,0,0.5);
        text-align: center; z-index: 10;
        padding: 20px 30px;
        width: 90vw; 
        max-width: 450px; 
        max-height: 90vh; 
        overflow-y: auto;
        color: #fff;
        pointer-events: auto; /* Modals are clickable again */
    }
    .modal-overlay.modal-visible {
        transform: translate(-50%, -50%);
        opacity: 1;
        visibility: visible;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }
    .modal-overlay h1, .modal-overlay h2 {
        font-size: 2.5em;
        margin: 0 0 10px 0;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 3px 3px 0 #000;
    }
    #gameOverScreen h1 { color: #ff4136; }
    #passwordPrompt h2 { color: #0074d9; }
    .modal-overlay p { margin: 5px 0 15px 0; font-size: 1.2em; }
    #scoreDetails { font-size: 1em; color: #aaa; margin-top: -10px; }

    /* --- ENHANCED START MENU --- */
    #startScreen {
        position: relative; 
        background-image: 
            repeating-linear-gradient(#282828 0 1px, transparent 1px 100%),
            repeating-linear-gradient(90deg, #282828 0 1px, transparent 1px 100%);
        background-size: 20px 20px;
        overflow: hidden; /* Keep canvas contained */
    }
    #startScreen.modal-visible {
        transform: translate(-50%, -50%);
        transition: opacity 0.3s ease-out;
    }
    #startMenuCanvas {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: -1; /* Place it behind the content */
        opacity: 0.15; /* Make it a subtle background effect */
    }
    #logoTitle {
        display: grid;
        justify-content: center;
        gap: 4px;
        margin-bottom: 20px;
    }
    .logo-pixel {
        width: 10px;
        height: 10px;
        background-color: transparent;
    }
    .logo-pixel.lit {
        background-color: #FFDC00; /* Yellow title color */
        box-shadow: 0 0 8px #FFDC00;
    }
    
    /* --- SOUNDTRACK CREDIT --- */
    #soundtrack-credit {
        position: fixed; /* Pinned to the viewport */
        bottom: 15px;
        left: 15px;
        font-size: 0.9em;
        color: #fff;
        opacity: 0.6;
        text-shadow: 1px 1px 2px #000;
        z-index: 6; /* Above the canvas overlay, below modals */
        pointer-events: auto; /* Make the link clickable */
        transition: opacity 0.5s ease;
    }
    #soundtrack-credit a {
        color: #FFDC00;
        text-decoration: none;
        font-weight: bold;
    }
    #soundtrack-credit a:hover {
        text-decoration: underline;
    }


    /* --- TACTILE BUTTONS --- */
    .btn {
        --btn-bg: #555; --btn-highlight: #777; --btn-shadow: #333; --btn-hover-bg: #606060;
        background-color: var(--btn-bg); color: #fff; 
        font-family: 'Courier New', Courier, monospace; font-size: 1.2em;
        text-transform: uppercase; letter-spacing: 1px;
        text-shadow: 1px 1px 0px var(--btn-shadow);
        padding: 12px 24px; margin-top: 20px;
        cursor: pointer; position: relative;
        border: none;
        border-top: 3px solid var(--btn-highlight);
        border-left: 3px solid var(--btn-highlight);
        border-bottom: 3px solid var(--btn-shadow);
        border-right: 3px solid var(--btn-shadow);
        transition: transform 0.1s ease-out, background-color 0.1s ease-out;
    }
    .btn:hover { background-color: var(--btn-hover-bg); transform: translateY(-2px); }
    .btn:active {
        transform: translateY(1px);
        border-top: 3px solid var(--btn-shadow);
        border-left: 3px solid var(--btn-shadow);
        border-bottom: 3px solid var(--btn-highlight);
        border-right: 3px solid var(--btn-highlight);
        filter: brightness(0.95);
    }
    #restartButton, #startButton { --btn-bg: #2ECC40; --btn-highlight: #3bdd4b; --btn-shadow: #1e8729; --btn-hover-bg: #35d345; }
    #submitPasswordButton { --btn-bg: #0074d9; --btn-highlight: #0088ff; --btn-shadow: #005299; --btn-hover-bg: #0081f2; }
    
    /* --- Custom Checkboxes --- */
    .options-list { margin-top: 20px; display: flex; flex-direction: column; gap: 15px; }
    .checkbox-item {
        position: relative;
        padding-left: 35px;
        min-height: 24px;
        display: flex;
        align-items: center;
        text-align: left;
        font-size: 1em;
        color: #ccc;
    }
    .checkbox-item input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0; width: 0;
    }
    .checkbox-item label { cursor: pointer; }
    .checkbox-item .checkmark {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        height: 14px; width: 14px;
        background-color: #111;
        border: 3px solid #888;
        transition: border-color 0.2s;
    }
    .checkbox-item .checkmark::after {
        content: "";
        position: absolute;
        display: block;
        left: 3px; top: 3px;
        width: 8px; height: 8px;
        background: #FFDC00;
        transform: scale(0);
        transition: transform 0.1s ease-in-out;
    }
    .checkbox-item input:checked ~ .checkmark::after {
        transform: scale(1);
    }
    .checkbox-item input:focus ~ .checkmark {
        border-color: #fff;
    }

    /* --- Custom Volume Sliders --- */
    .slider-item {
        display: flex; align-items: center; gap: 15px;
        text-align: left;
    }
    .slider-item.disabled { opacity: 0.5; pointer-events: none; }
    .slider-item label {
        font-size: 1em; color: #ccc;
        min-width: 50px;
    }
    .slider-container {
        flex-grow: 1; position: relative;
        height: 24px; display: flex; align-items: center;
    }
    .slider-track {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        width: 100%;
        height: 10px;
        background-color: #111;
        border-top: 2px solid #333;
        border-left: 2px solid #333;
        border-bottom: 2px solid #777;
        border-right: 2px solid #777;
        box-sizing: border-box;
    }
    .slider-fill {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        height: 10px;
        background-color: #FFDC00;
    }
    .slider-thumb {
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 16px; height: 24px;
        background-color: #555;
        border-top: 2px solid #777;
        border-left: 2px solid #777;
        border-bottom: 2px solid #333;
        border-right: 2px solid #333;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .slider-input {
        position: absolute;
        width: 100%; height: 100%;
        margin: 0;
        opacity: 0;
        cursor: pointer;
    }
    .slider-container:hover .slider-thumb { background-color: #666; }
    
    /* --- Custom Inputs --- */
    .input-styled {
        padding: 10px; font-size: 1.1em; background-color: #111; color: #eee;
        border: 3px solid #555; 
        width: 100%; box-sizing: border-box;
        margin: 15px 0; text-align: center;
        font-family: 'Courier New', Courier, monospace;
    }
    .input-styled:focus { outline: none; border-color: #FFDC00; }
    .shake { animation: shake 0.5s; border-color: #FF4136 !important; }
    @keyframes shake {
        10%, 90% { transform: translate(calc(-50% - 1px), -50%); } 
        20%, 80% { transform: translate(calc(-50% + 2px), -50%); }
        30%, 50%, 70% { transform: translate(calc(-50% - 4px), -50%); } 
        40%, 60% { transform: translate(calc(-50% + 4px), -50%); }
    }

    /* --- Tester Menu Styles --- */
    #testerMenu {
        display: none; position: absolute; top: 20px; left: 20px;
        background-color: #1a1a1a;
        border: 3px solid #0074d9;
        box-shadow: 4px 4px 0px #000;
        color: #eee;
        padding: 0;
        z-index: 20; font-size: 0.8em; max-width: 250px;
        pointer-events: auto; /* Tester menu is clickable */
    }
    .tester-header {
        background-color: #0074d9;
        color: #fff;
        padding: 5px 10px;
        position: relative;
    }
    #testerMenu h2 { margin: 0; font-size: 1.4em; text-shadow: 2px 2px 0 #000;}
    .tester-content { padding: 15px; }
    #testerMenu div { margin: 15px 0; }
    #testerMenu label, #testerMenu h3 { display: block; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; font-size: 0.9em;}
    #testerMenu input[type="number"], #testerMenu select, #testerMenu button {
        -webkit-appearance: none; appearance: none;
        width: 100%;
        background-color: #111; color: #eee;
        border: 2px solid #444; padding: 8px;
        font-family: 'Courier New', Courier, monospace; font-size: 1em;
        box-sizing: border-box;
    }
    #testerMenu select {
         background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ccc%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
         background-repeat: no-repeat; background-position: right 8px top 50%; background-size: .65em auto;
    }
    #testerMenu button { background-color: #333; cursor: pointer; margin-top: 5px; transition: background-color 0.2s; }
    #testerMenu button:hover { background-color: #555; }
    #closeTesterMenu {
        position: absolute; top: 0; right: 0;
        background: #FF4136; color: #fff;
        border: none; border-left: 3px solid #0074d9;
        font-size: 1.5em; line-height: 1; padding: 5px 8px;
        cursor: pointer; text-shadow: 2px 2px 0 #000;
    }
</style>

</head>
<body>
<canvas id="tetrisCanvas"></canvas>
<!-- Audio elements for dynamic music and sounds -->
<audio id="musicNormal" loop><source src="sound/music_normal.mp3" type="audio/mpeg"></audio>
<audio id="musicRed" loop><source src="sound/music_red.mp3" type="audio/mpeg"></audio>
<audio id="musicRainbow" loop><source src="sound/music_rainbow.mp3" type="audio/mpeg"></audio>
<audio id="musicNinja" loop><source src="sound/music_ninja.mp3" type="audio/mpeg"></audio>

<div id="ui-overlay-container">
    <div id="progress-bar-container">
        <div id="progress-bar"></div>
    </div>

    <div id="startScreen" class="modal-overlay">
        <canvas id="startMenuCanvas"></canvas>
        <div id="logoTitle"></div>
        <p>Hi-Score: <span id="startHiScore">0</span></p>
        <div class="options-list">
            <div class="checkbox-item">
                <input type="checkbox" id="startGhostCheckbox" data-option="ghost">
                <span class="checkmark"></span>
                <label for="startGhostCheckbox">Ghost Piece (halves score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="startGridCheckbox" data-option="grid">
                <span class="checkmark"></span>
                <label for="startGridCheckbox">Show Grid (-10% score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="startEvilCheckbox" data-option="evil">
                <span class="checkmark"></span>
                <label for="startEvilCheckbox">Evil Mode (no saves)</label>
            </div>
             <hr style="border-color: #444; width: 100%;">
            <div class="checkbox-item">
                <input type="checkbox" id="startMusicCheckbox" data-option="music">
                <span class="checkmark"></span>
                <label for="startMusicCheckbox">Enable Sound</label>
            </div>
            <div class="slider-item" data-option="music-slider">
                <label for="startMusicVolume">Music</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="startMusicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
            <div class="slider-item" data-option="sfx-slider">
                <label for="startSfxVolume">SFX</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="startSfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
        <button id="startButton" class="btn">Start Game</button>
    </div>

    <div id="gameOverScreen" class="modal-overlay">
        <h1>Game Over</h1>
        <p>Your Score: <span id="finalScore">0</span></p>
        <p>Hi-Score: <span id="hiScore">0</span></p>
        <p id="scoreDetails">Multiplier: <span id="scoreMultiplier">1.00x</span></p>
        <div id="options" class="options-list">
            <div class="checkbox-item">
                <input type="checkbox" id="ghostCheckbox" data-option="ghost">
                <span class="checkmark"></span>
                <label for="ghostCheckbox">Ghost Piece (halves score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="gridCheckbox" data-option="grid">
                <span class="checkmark"></span>
                <label for="gridCheckbox">Show Grid (-10% score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="evilCheckbox" data-option="evil">
                <span class="checkmark"></span>
                <label for="evilCheckbox">Evil Mode (no saves)</label>
            </div>
            <hr style="border-color: #444; width: 100%;">
             <div class="checkbox-item">
                <input type="checkbox" id="musicCheckbox" data-option="music">
                <span class="checkmark"></span>
                <label for="musicCheckbox">Enable Sound</label>
            </div>
            <div class="slider-item" data-option="music-slider">
                <label for="musicVolume">Music</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="musicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
            <div class="slider-item" data-option="sfx-slider">
                <label for="sfxVolume">SFX</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="sfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
        <button id="restartButton" class="btn">Restart</button>
    </div>

    <div id="passwordPrompt" class="modal-overlay">
        <h2>Access Test Menu</h2>
        <input type="password" id="passwordInput" class="input-styled" placeholder="Enter Password...">
        <div id="passwordButtons">
            <button id="submitPasswordButton" class="btn">Submit</button>
            <button id="cancelPasswordButton" class="btn">Cancel</button>
        </div>
    </div>

    <div id="testerMenu">
        <div class="tester-header">
            <button id="closeTesterMenu" title="Close Menu">Ã—</button>
            <h2>Tester Menu</h2>
        </div>
        <div class="tester-content">
            <div>
                <label for="scoreInput">Set Score:</label>
                <input type="number" id="scoreInput" min="0">
                <button id="setScoreButton">Set</button>
                <button id="levelUpButton" title="Adds 1000 to current score">+1000</button>
            </div>
             <div>
                <h3>Zone Controls</h3>
                <button id="endSafePeriodButton">End Safe Period</button>
                <button id="startSafePeriodButton">Start New Safe Period</button>
                <button id="completeZoneButton">Complete Zone</button>
            </div>
            <div>
                <label for="zoneSelect">Force Zone (Override):</label>
                <select id="zoneSelect">
                    <option value="AUTO">Auto (Time/Score)</option>
                    <option value="NORMAL">Normal</option>
                    <option value="RED">Red Zone</option>
                    <option value="RAINBOW">Rainbow Zone</option>
                    <option value="NINJA">Ninja Zone</option>
                    <option value="ALPHABET">Alphabet Zone</option>
                </select>
            </div>
            <div>
                <label for="pieceSelect">Force Next Piece:</label>
                <select id="pieceSelect">
                    <option value="0">Random</option>
                    <option value="7">I (Line)</option>
                    <option value="2">O (Square)</option>
                    <option value="1">T</option>
                    <option value="4">L</option>
                    <option value="3">J</option>
                    <option value="6">S</option>
                    <option value="5">Z</option>
                </select>
            </div>
             <div class="options-list">
                <h3>Toggles (Live)</h3>
                <div class="checkbox-item">
                    <input type="checkbox" id="testerGhostCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerGhostCheckbox">Ghost Piece</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="testerGridCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerGridCheckbox">Show Grid</label>
                </div>
                 <div class="checkbox-item">
                    <input type="checkbox" id="testerMusicCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerMusicCheckbox">Sound</label>
                </div>
                 <div class="slider-item" data-option="music-slider">
                    <label for="testerMusicVolume">Music</label>
                    <div class="slider-container">
                        <div class="slider-track"></div>
                        <div class="slider-fill"></div>
                        <div class="slider-thumb"></div>
                        <input type="range" id="testerMusicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                    </div>
                </div>
                <div class="slider-item" data-option="sfx-slider">
                    <label for="testerSfxVolume">SFX</label>
                    <div class="slider-container">
                        <div class="slider-track"></div>
                        <div class="slider-fill"></div>
                        <div class="slider-thumb"></div>
                        <input type="range" id="testerSfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                    </div>
                </div>
                 <div class="checkbox-item">
                    <input type="checkbox" id="testerEvilCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerEvilCheckbox">Evil Mode</label>
                </div>
            </div>
            <div>
                <h3>Actions</h3>
                <button id="clearBoardButton">Clear Board</button>
            </div>
        </div>
    </div>
    
    <div id="soundtrack-credit">
        soundtrack by <a href="https://www.youtube.com/@Staphlo4718" target="_blank" rel="noopener noreferrer">@Staphlo</a>
    </div>
</div>

<script>
const _0x57c83f=_0x2212;(function(_0x13748d,_0x53e660){const _0x4d948e=_0x2212,_0x244806=_0x13748d();while(!![]){try{const _0x2e02f0=-parseInt(_0x4d948e(0x16a))/(-0x24ed+0x4*-0x2e7+-0x6d*-0x72)*(-parseInt(_0x4d948e(0x1a9))/(0x1*0x2417+0x1*0xfa9+-0x166*0x25))+-parseInt(_0x4d948e(0xd7))/(0x1003+0x1*-0x243e+0x143e)*(-parseInt(_0x4d948e(0x175))/(-0xa9*0x2d+0xb53+0x1d7*0xa))+parseInt(_0x4d948e(0xc9))/(-0x255c+0xa4*-0x33+-0x1*-0x460d)*(parseInt(_0x4d948e(0xe9))/(0x1a6*0x3+-0xf09+0xa1d))+parseInt(_0x4d948e(0x159))/(0x14f0+0x1*-0x3fd+-0x10ec)+-parseInt(_0x4d948e(0x194))/(-0x241*-0x4+-0x1215+0x919)*(parseInt(_0x4d948e(0x16e))/(0x234f+-0x2545+0x1ff))+-parseInt(_0x4d948e(0xd0))/(-0x1bd9+0x1*0xec2+0x1*0xd21)+parseInt(_0x4d948e(0xe0))/(0x113*-0xf+0x20f*-0x12+0xe*0x3cd);if(_0x2e02f0===_0x53e660)break;else _0x244806['push'](_0x244806['shift']());}catch(_0x4b02b2){_0x244806['push'](_0x244806['shift']());}}}(_0x3ea2,-0x1*0xda2f1+0x16*0x4e9b+-0x22d1c*-0x9));function _0x2212(_0x528859,_0x601305){const _0x2014fb=_0x3ea2();return _0x2212=function(_0x54d72c,_0x366438){_0x54d72c=_0x54d72c-(-0x9a5*0x1+-0x1930+-0x8e3*-0x4);let _0x4c0214=_0x2014fb[_0x54d72c];return _0x4c0214;},_0x2212(_0x528859,_0x601305);}const canvas=document[_0x57c83f(0x17f)](_0x57c83f(0x184)),ctx=canvas[_0x57c83f(0x180)]('2d'),startScreen=document[_0x57c83f(0x17f)](_0x57c83f(0x103)),startButton=document[_0x57c83f(0x17f)]('startButton'),gameOverScreen=document[_0x57c83f(0x17f)]('gameOverScreen'),finalScoreEl=document['getElementById'](_0x57c83f(0x10b)),hiScoreEl=document[_0x57c83f(0x17f)]('hiScore'),scoreMultiplierEl=document[_0x57c83f(0x17f)](_0x57c83f(0x113)),startHiScoreEl=document[_0x57c83f(0x17f)](_0x57c83f(0xd5)),restartButton=document[_0x57c83f(0x17f)](_0x57c83f(0xfd)),soundtrackCredit=document[_0x57c83f(0x17f)](_0x57c83f(0x145)),progressBarContainer=document[_0x57c83f(0x17f)]('progress-bar-container'),progressBar=document['getElementById'](_0x57c83f(0xbf)),audioElements={'NORMAL':document[_0x57c83f(0x17f)](_0x57c83f(0x168)),'RED':document[_0x57c83f(0x17f)](_0x57c83f(0x186)),'RAINBOW':document['getElementById'](_0x57c83f(0x144)),'NINJA':document[_0x57c83f(0x17f)](_0x57c83f(0xba)),'ALPHABET':document[_0x57c83f(0x17f)](_0x57c83f(0x168))};function _0x3ea2(){const _0x8e2d9=['Enabled','3478902RRoiwm','#FFFFFF','cancelPasswordButton','scoreInput','whisper1','forcedPieceState','catch','gridColumn','KeyI','shape','screenX','sound/NORMAL/harddrop.wav','transition','currentZone','logoTitle','remove','KeyW','strokeRect','preventDefault','getItem','restartButton','moveTo','warning','beforeunload','Incorrect\x20password','.slider-fill','startScreen','testerGridCheckbox','charAt','evil','#8B0000','DOWN','reduce','ALPHABET','finalScore','round','textContent','logo-pixel','input','style','sound/RED/whisper1.mp3','move','scoreMultiplier','display','draw','AUTO','ArrowLeft','passwordPrompt','abs','createDocumentFragment','focus','screenY','floor','sound/RED/whisper2.mp3','[data-option=\x22grid\x22]','sound/RED/scrape.mp3','gridTemplateColumns','passwordInput','#F012BE','fillStyle','addEventListener','COLS','Could\x20not\x20play\x20sound:\x20','innerWidth','colorIndex','play','currentPiece','block','testerMenu','currentTime','add','now','submitPasswordButton','ArrowDown','sound/NORMAL/lock.wav','sound/NORMAL/gameover.wav','sound/NORMAL/rotate.wav','.music-slider-input','sfx','width','toLowerCase','#FF4136','filter','input[type=\x22checkbox\x22][data-option=\x22','whisper2','closeTesterMenu','from','modal-visible','collides','lineTo','code','musicRainbow','soundtrack-credit','slice','parse','createElement','tetris','disabled','ArrowUp','ceil','tetrisSfxVolume','gravityDirection','random','\x20at\x20','#ffffff','zoneStartScore','reverse','warn','Could\x20not\x20play\x20music:\x20','width\x200.2s\x20linear,\x20background-color\x200.5s\x20ease','.slider-thumb','[data-option=\x22music\x22]','3426017rdOqiD','click','shake','checked','stroke','length','keydown','clientHeight','whiteBlockSpawnChance','RED','opacity','sound/NINJA/lightning.wav','NORMAL','forEach',',\x2010px)','musicNormal','target','2503vQOCsP','hsl(','height','endSafePeriodButton','1428372QbTzoF','values','toUpperCase','touchmove','setItem','volume','RIGHT','12WhtPJu','input[type=\x22checkbox\x22][data-option]','toFixed','isSafePeriodActive','.sfx-slider-input','none','querySelector','classList','has','addColorStop','getElementById','getContext','clearBoardButton','grid','count','tetrisCanvas','changedTouches','musicRed','clientWidth','beginPath','startSafePeriodButton','#C00000','trim','option','Escape','-zone','[data-option=\x22evil\x22]','RAINBOW','sqrt','lit','true','56kdIyHc','querySelectorAll','zoneSelect','tetrisGameState','#0074D9','testerMusicCheckbox','ghost','documentElement','NINJA','rgba(255,255,255,0.2)','fillRect','pieceIndex','createRadialGradient','backgroundColor','rgba(255,\x20255,\x20255,\x200.15)','tetrisEvilMode','sound/NORMAL/clear.wav','className','map','fill','speed','138nvHpZu','change','#000','keys','left','parentElement','substring','pointerEvents','value','max','min','score','clearRect','musicNinja','appendChild','innerHTML','#7FDBFF','ROWS','progress-bar','sound/RAINBOW/powerup.wav','powerup','safePeriodStartTime','#2ECC40','ArrowRight','music','KeyS','time','every','10qIsQEH','type','.btn','dataset','Space','strokeStyle','toString','7820650wRWokJ','pause','unshift','board','rotate','startHiScore','splice','433722BtKFne','.slider-item','LEFT','scrape','#A30000','key','gridRow','push','width\x201s\x20linear,\x20background-color\x201s\x20linear','5171452ZSEwYj','removeItem','rgba(255,\x20255,\x20255,\x200)','testerEvilCheckbox','KeyA','completeZoneButton','100%','touchend'];_0x3ea2=function(){return _0x8e2d9;};return _0x3ea2();}let currentMusic=null,musicVolume=parseFloat(localStorage[_0x57c83f(0xfc)]('tetrisMusicVolume'))||0x1e71*0x1+0x26*0x25+-0x23ef+0.5,sfxVolume=parseFloat(localStorage[_0x57c83f(0xfc)](_0x57c83f(0x14d)))||0xc83+-0x1a57+-0x3b*-0x3c+0.7;const sfxChannels=[];let currentSfxChannel=0xbab*0x1+-0x7e*-0x17+0x217*-0xb;const NUM_SFX_CHANNELS=0x5*0x14b+-0xb0a+0x49b,startMenuCanvas=document[_0x57c83f(0x17f)]('startMenuCanvas'),startMenuCtx=startMenuCanvas[_0x57c83f(0x180)]('2d'),logoTitle=document[_0x57c83f(0x17f)](_0x57c83f(0xf7));let bgAnimationInterval=null;const testerMenu=document[_0x57c83f(0x17f)](_0x57c83f(0x12d)),closeTesterMenu=document[_0x57c83f(0x17f)](_0x57c83f(0x13e)),scoreInput=document['getElementById'](_0x57c83f(0xec)),setScoreButton=document[_0x57c83f(0x17f)]('setScoreButton'),levelUpButton=document[_0x57c83f(0x17f)]('levelUpButton'),zoneSelect=document[_0x57c83f(0x17f)](_0x57c83f(0x196)),pieceSelect=document['getElementById']('pieceSelect'),testerGhostCheckbox=document[_0x57c83f(0x17f)]('testerGhostCheckbox'),testerGridCheckbox=document['getElementById'](_0x57c83f(0x104)),testerMusicCheckbox=document[_0x57c83f(0x17f)](_0x57c83f(0x199)),testerEvilCheckbox=document['getElementById'](_0x57c83f(0xe3)),clearBoardButton=document[_0x57c83f(0x17f)](_0x57c83f(0x181)),passwordPrompt=document[_0x57c83f(0x17f)](_0x57c83f(0x118)),passwordInput=document[_0x57c83f(0x17f)](_0x57c83f(0x122)),submitPasswordButton=document[_0x57c83f(0x17f)](_0x57c83f(0x131)),cancelPasswordButton=document[_0x57c83f(0x17f)](_0x57c83f(0xeb)),endSafePeriodButton=document[_0x57c83f(0x17f)](_0x57c83f(0x16d)),startSafePeriodButton=document[_0x57c83f(0x17f)](_0x57c83f(0x189)),completeZoneButton=document[_0x57c83f(0x17f)](_0x57c83f(0xe5)),SOUNDS={'sfx':{'NORMAL':{'rotate':_0x57c83f(0x135),'lock':_0x57c83f(0x133),'harddrop':_0x57c83f(0xf4),'clear':_0x57c83f(0x1a4),'gameover':_0x57c83f(0x134),'click':'sound/NORMAL/click.wav'},'RED':{'heartbeat':'sound/RED/heartbeat.mp3','scrape':_0x57c83f(0x120),'whisper1':_0x57c83f(0x111),'whisper2':_0x57c83f(0x11e),'rotate':'sound/NORMAL/rotate.wav','harddrop':_0x57c83f(0xf4),'clear':_0x57c83f(0x1a4)},'RAINBOW':{'powerup':_0x57c83f(0xc0)},'NINJA':{'lightning':_0x57c83f(0x164)}}};let BLOCK_SIZE=0x1284*0x2+-0x1*-0xad3+-0x62*0x7d,isMobile=![],COLS,ROWS,board=[],score=-0x1*-0x796+-0x434*-0x8+-0x2936,hiScore=localStorage[_0x57c83f(0xfc)]('tetrisHiScore')||-0xfe6+-0x4*0x765+0x2d7a,currentPiece,gameLoopInterval,gameOverAnimationInterval,isGameOver=![],isGamePaused=![],isGameStarted=![],isGhostEnabled=![],isMusicEnabled=![],isEvilMode=![],isGridEnabled=![],currentZone='NORMAL',gameSpeed=-0x1ddb+0x19d2+0x409,iceSlipTimeout=null;const SAFE_PERIOD_DURATION=(0x1304+-0x103d+-0x2c2)*(-0x1f*-0x7+0x6c2*0x5+0x1*-0x2267)*(0xbd3+-0x5*0xab+-0x494),ZONE_PROGRESS_REQUIREMENT=-0x86f+0x7be*-0x1+0x17fd,ZONE_ENTRY_CHANCE=0x1c*-0x11f+-0x26f4+0x4658+0.15;let isSafePeriodActive=!![],safePeriodStartTime=0x735+0x2182+-0x28b7,zoneStartScore=-0x2589+-0x1367+0x38f0;const INITIAL_SPEED=0x2197+-0x9f*-0x35+-0x408e,RED_ZONE_SPEED=0x97*0x16+-0x797+0x1*-0x469,MIN_SPEED=-0x594+0xd2b*-0x1+0x12f1,DESKTOP_COLS_DIVISOR=0x1*0x1039+-0x8f4+-0x25f*0x3,DESKTOP_ROWS_DIVISOR=-0x2088+0x1f6c+-0x14e*-0x1,MOBILE_COLS_DIVISOR=-0x1*0x1b11+-0x59f*-0x3+-0xd*-0xca,MOBILE_ROWS_DIVISOR=-0x8*-0x51+0x2246+0x125b*-0x2;let whiteBlock={'x':null,'y':null},whiteBlockSpawnChance=-0x9*0x447+-0x1*0x1aa5+0x4124+0.07,forcedPieceState={'type':null,'count':0x0},flashTimeout=null,flashAnimation=null;const GOD_MODE_PASS_B64='MTk3MjIwMDYyMDAwNjY2MTIz';let isTesterMenuOpen=![],isZoneForced=![],forcedNextPieceIndex=-0x22d8*0x1+0x1ff3+0x2e5;const COLORS=[null,_0x57c83f(0x13a),'#FFDC00',_0x57c83f(0x198),_0x57c83f(0x123),_0x57c83f(0xc3),'#FF851B',_0x57c83f(0xbd)],RED_COLORS=[null,'#5A0000','#7B0000',_0x57c83f(0x107),_0x57c83f(0xdb),_0x57c83f(0x18a),'#D50000','#E63946'],SHAPES=[[],[[0x172b+-0x250f+0xde5,0x1*0x196+0x1a2e+-0x1bc3,-0x1cfd+-0xc8b*0x2+0x3614],[-0x2*-0xd7d+0xeb1+-0x29ab,-0xdf*0x4+-0x345*0x9+0x20ea,-0x5f+-0xd1d+0xd7c]],[[-0x538*0x2+0xce3+0x139*-0x2,-0x29*0x89+0x1*0x21d0+0xbde*-0x1],[-0x138c+-0x446+-0x13*-0x141,0x1*0x3dd+-0x5*-0x35d+0x14ad*-0x1]],[[0x141e+-0x1495+-0x77*-0x1,-0x16a9*0x1+0x1*0x98b+0xd1f,0x1*0xdae+0x192a+-0x26d8],[0x1ee1*-0x1+-0x7d4+0x26b5,0xbcb*-0x2+-0x10dd*0x1+0x2874,0x9aa*0x1+0x1728+-0x2*0x1069],[-0x1*0xc1a+0x1ba1+-0xf86,-0x1*0x18e5+-0x102e+-0x2c*-0xef,0x8*0x214+-0x1e1b*0x1+0xd7b]],[[-0x1*0x1bc5+0x2602+-0xa3d,-0x3*0xea+-0x3*-0x76b+0x1c6*-0xb,-0x231c+-0xfe4+0x220*0x18],[-0xdea+-0xe2*0x3+0x1090,0x9e2+0x1342+-0x1d23,0xc83*0x2+0x9ec+0x3e2*-0x9],[0x2*-0x9a3+-0x1ea9+0x31ef,0x1*0x25b1+-0x4*-0x55b+-0x3b1c,0x16de+0x659+0x2*-0xe9b]],[[0x2709+-0x1587+0xf9*-0x12,0x22b8+-0x5*0x2ee+0xb*-0x1d3,-0x1b16+-0x163b+0x1*0x3152],[0x24b8+-0x383+-0x55*0x64,-0x8*-0x296+-0x4*0x613+-0x25*-0x19,-0x970+0x954+0x1*0x1c]],[[0x22*0x16+0x1366+0x1651*-0x1,-0x2567+0x299+0x22cf,0xe02*0x1+0xf1d+0x163*-0x15],[-0x5*-0x613+-0x5f6+-0x1869,0x1c24+-0x1*-0x665+-0x2288,-0x1164+-0x1*0x243d+0x35a2]],[[0xa01+-0x25a*0xb+0xfdd,-0x30e+0x144c+-0x113e,-0x9*0xc7+0x1*-0x2221+0x2920,-0x12dd+0x1665+-0x1*0x388],[-0x1*0x1b33+0x24a9+-0x975,0x1d9a+-0x10*-0x80+-0x2599,0x1*0x2ed+0x29*0xc5+-0x2279,0x1*-0x1ffe+-0x15ef+0x35ee],[-0xca*0xa+-0xcee+0x14d2,0xb4f+-0x2*-0x116f+0x1*-0x2e2d,0x5*-0x31d+-0x223e+-0x31cf*-0x1,-0x2482*0x1+0x7ef+0x1c93],[0x87e+0x1dc3+-0x577*0x7,0x25ff*-0x1+-0x2*-0x871+-0x1*-0x151d,0x22b0*0x1+0xf09+-0x31b9*0x1,-0x1515+-0x1ff2+0x3507]]],LETTER_SHAPES={'A':[[-0xb09+0x2288+-0x177f,-0x14c0+-0x640+-0x1*-0x1b01,-0x23ca+0x61+0x2369],[-0x133*0x5+0x5b1+0x4f,-0x1783+0x23*0x101+-0xb9f,-0xfc0+-0xc19*-0x1+0x3a8],[0x1cb0+0x1bd1+0xe20*-0x4,-0x2fc*-0x5+0x277*-0x1+-0xc75,0x1bba+0x317*0x1+0x1*-0x1ed0],[0x473+0xc2*0x2+-0x2*0x2fb,0x1*-0x1feb+0x1*0x104f+0xf9c,0x1b99+0x57*-0x59+0x2a7]],'B':[[-0xf2a+0x11*0x86+0x645,-0x80*0x8+-0x38a+-0x1*-0x78b,-0x42*0x26+0xc96+-0x2ca],[0x2*-0xe96+0x269c+-0x96f,-0xe9e+0x397*0x3+-0x1*-0x3d9,-0xcff*0x1+0x1*-0x319+0x1019],[-0x1454+0x15d*-0x11+-0x15c1*-0x2,-0x14c*-0x5+-0x94e+0x2d3,0x21a9+0x390+-0x2539*0x1],[-0x11af+0x3*0x2e3+0x907,0x4*0x16d+-0x2*-0x4bb+-0xf2a,-0xc2f*0x1+-0x1118+0x2*0xea4],[0x2ca+-0x1748+0x3*0x6d5,0x3d*0x8f+-0x21*0x7a+-0x1258,-0x2f*-0xa1+0x1804+0xd*-0x41f]],'C':[[0x167d+-0x6*0x340+0xf*-0x33,0x1726+-0x709*0x1+0x4*-0x407,0x863+-0x3*-0x6bf+-0x1af*0x11],[-0x173c+0x32d*-0x1+-0x1*-0x1a6a,0x5*0x7bb+-0x1*0x12e+0xb5*-0x35,-0x10c1+0x6d*-0x59+0x36a6],[-0x27+-0x2f*0x67+-0x1311*-0x1,0x131f+-0x1*-0x8e1+-0x1c00,0x468+0x7ad+-0xc15],[0xdcf+0x46a+-0x613*0x3,0x2033*0x1+-0x114*-0x6+-0x26aa,0x205*0x11+-0xfa0+-0x12b4]],'E':[[-0x1*0x64d+-0x7d2+0x20*0x71,-0x601*-0x1+-0xd22+0x722,-0x2d4*-0x8+0x1c6f+-0x330e],[0x5c2*0x1+-0x298*-0x8+-0x1a81,-0x44*0x62+0x912+0x10f6,-0x1b5f+0x1cce+-0x16f],[-0xc4b*-0x1+0x1517*-0x1+0x8cd*0x1,0xaf2+-0x2*0x6bb+-0x3*-0xd7,0x11f5+0x2*-0x43e+-0x979],[0x337*-0x2+0x1fac+0x1*-0x193d,0x2*0xbcf+-0x9b2+0x6c*-0x21,-0x989+0x141e+0x9*-0x12d],[-0x11e7*0x2+0xff1+0x13de*0x1,-0x1b78+-0x65c+0x21d5,-0xd21*-0x1+-0x5*0x3d7+-0x1*-0x613]],'F':[[-0x1779+-0xb*0x349+0x3b9d,0x1272+-0x2490+0x121f,0x18db+-0xcc4+-0xc16],[0xc5*-0xd+-0x3*0x9eb+0x9*0x46b,-0x96b*0x3+0x1e80*-0x1+0x3ac1*0x1,0x18a4+-0x103e+-0x866],[0x927+-0x1e3c+-0x1*-0x1516,-0x1d02+-0x29*0x72+0x2f45,-0x1*-0x8a9+0x1ab3+-0x235c],[0x3b*0x38+0x1d9d+-0x4*0xaa1,0x1e28+-0x3*-0x174+0xbc*-0x2f,0x238d+0x1a09+-0x3d96*0x1],[-0x1719*0x1+-0x37a*0xa+0x39de,-0x1a3e+-0x5*0x2d7+0x261*0x11,-0x4*-0x903+-0x53*-0x23+-0x2f65]],'H':[[0x5*0x2ab+0x1106*-0x1+-0x76*-0x8,-0x1ffe+-0x13cd+0x1*0x33cb,0xc9f*0x3+-0x1105+0x5*-0x42b],[0x1f64+0x1250+-0x3*0x1091,-0x1da8+-0x15e9+0x3391,0x4*0x95b+-0x1700+-0xe6b],[0x14b1+0xaef+0x5*-0x653,0x673+-0x7f9*-0x2+0x2*-0xb32,0xdf*0x25+0x156e+-0x35a8],[0x389*-0x7+0x2291+-0x1*0x9d1,-0x5*-0x106+0xf99+-0x14b7,-0x174+0x1a26+-0x18b1],[0x8e1+0x12a*-0x3+-0x2*0x2b1,0x206*-0x4+-0x1ec3+0xcb*0x31,0x13a6+0x2043+-0x33e8]],'I':[[-0x1ed2*0x1+0xfb6*0x2+-0x99*0x1,0x1*0x13bc+-0x6ce+-0xced,0x3d6*0x9+-0xfc8+-0x12bd],[0x94*-0x17+0x1*-0x1f28+0x4*0xb1d,-0x2245+-0x6*0x511+0x40ac,0x2b4*0x4+-0xb11*0x2+0x5a9*0x2],[0xc*-0x2dc+-0x1bdc+-0x2e*-0x15a,0x17*0x10c+0x2bd*0xe+-0x3e69,-0x1b36+0x6*0x337+-0xd*-0x9c],[0x10d5+-0xbfc+-0x4d9,0x22*-0xaa+0x1d3a+0x6a5*-0x1,-0x4cd*0x1+0x55d*-0x3+-0xa72*-0x2],[-0x2*0x136a+0x4d4+0x2201,-0xf9b+-0x1*-0x1e2f+-0xe93,-0xb2a+-0x1f25+0x2a50]],'J':[[-0x544+-0x1cbb+-0x3c7*-0x9,-0x123f+0xb92+0x6ad*0x1,-0x5bd+-0x137c+0x193a*0x1],[-0x565*-0x7+-0x135*-0x4+-0x2a97,-0x7*-0x25b+-0xee6+-0xb*0x25,0x1f7*-0xd+0x23d*0x3+0x3*0x647],[0x408*0x8+0x2a*0x34+-0x28c7,0x18dd+0x2441+-0x3d1e,-0x1fc4+0x35*0x9f+0x6*-0x31],[0x211*0x8+-0x1de1+-0x6ad*-0x2,-0x2*-0x7eb+0xbd7*0x3+-0x335a,0xd9c*0x1+-0x4*0x986+0x187d]],'L':[[0x9ca+-0x233d+0x1974,-0x6d0+-0x6d*0x51+-0x294d*-0x1,-0x22*-0x26+0x1f06+0x156*-0x1b],[0x2ec+-0x1fcb+0x1ce0,-0x1*-0x1ed7+-0x2459+0x582,0xedb+-0x8e*0xe+-0x16b*0x5],[-0x2*0xf77+0x2361+-0x472,-0xec*0x1c+0x2307+-0x937,-0x1df6+0x4*0x3d1+-0x9*-0x1a2],[0x19d9+0x2373*-0x1+-0x1*-0x99b,0x1f*0x121+0x1*-0x2f1+0x223*-0xf,-0x1*0x2de+0x9c6*-0x3+0x7b*0x43]],'O':[[-0x168d+-0x59*0x22+-0x1*-0x2260,-0x26a4*0x1+-0x4*-0x4+0x2695*0x1],[-0xd4f*-0x2+-0x8c6*-0x1+0x2363*-0x1,-0x219a+-0x880+-0x1*-0x2a1b]],'P':[[-0x1b55*-0x1+0x5c9+-0x211d,0x193a+0x1215*0x2+-0x3d63,-0x3f6*0x4+-0x779*0x2+0x1*0x1ecb],[-0x2*0x30b+-0x1*-0x1cc1+-0x2*0xb55,0x1*0x304+0x20e4+0x5fc*-0x6,0x1e87+0x2*0xcb6+-0xe7*0x3e],[0x26b*-0xb+-0x161*0x5+0x157*0x19,-0x6*-0x4ae+-0x2620+-0x1*-0xa0d,-0x3db+0x1*0x14d2+-0x10f6],[-0x93b*0x1+-0x1*0x1c5b+-0x1*-0x2597,0x19d2*0x1+-0x1b*-0x152+-0x1c*0x232,-0x1de6+0x298*0x6+0xe56],[-0x35*-0x4a+-0xb7e+0x1*-0x3d3,-0x1a83+-0x525*-0x3+-0x4*-0x2c5,0x68*-0x1a+0x1d7*0xc+-0xb84]],'S':[[-0x375+0x190c+0x1597*-0x1,-0x1f02+-0x511*-0x1+-0x6*-0x453,0x1510+0x7e6*0x4+-0x34a7],[-0x28d*-0xb+-0x182e+-0x3e0,0x101*0xa+-0x1740+0xd36,0x695+0x2a*-0xa2+-0x1*-0x13ff],[0x2130+-0x6dc+-0x1a54,0x168d+0x2063+-0x36ef,-0x255b+0x1*0xf15+-0x2*-0xb23],[0xd*0xb0+0x665+-0x19*0x9d,-0x1*-0x62e+0x462+-0xd*0xd0,0x808+-0x19d+-0x66a],[0x269b*0x1+-0x5*0x469+-0x108d,0x1e23+-0xdb0*0x2+0x2*-0x161,-0x510+0x187b*-0x1+0x1d8b]],'T':[[0x8*-0x4e2+0x2505+-0x83*-0x4,-0x17f2+-0x9*-0x71+0x13fa,0x341+0x1323+-0x1663],[0x7*-0xc5+-0x68*0x2f+0x187b,0x7*-0x31+-0x5c9*-0x1+-0x3*0x17b,-0x455+-0x166a+0x1abf],[-0x1c8c+0x2a9*-0x1+-0x1f35*-0x1,-0x3*-0x59+0x480+-0x58a,0x3*0x66d+-0x24e0+-0x35*-0x55],[0xe3c*0x2+0x1a77*0x1+-0x1*0x36ef,-0xfdf+0x2*0x463+0x71a,-0x1ce8+-0xc0b*0x1+0x1*0x28f3]],'U':[[0x1fa5*0x1+0x23d7+-0x5*0xd7f,0x13eb*-0x1+0x12*-0x11+0x439*0x5,-0x1*0xb3c+-0x1be9+-0x1393*-0x2],[0x3*-0x9a2+-0x269b+-0x4382*-0x1,-0x3bb+0x2f*0xcd+-0x6c8*0x5,0x2*0xf05+-0x397+-0x1a72],[0x88c+0x26e8+0xfd1*-0x3,0x1*0x8a5+0x2248+-0x2aed,-0x19*-0x6a+-0x1f*0xb9+0xc0e],[0x9ca+0x75*0x25+-0x1ab2,-0x92f+0x3c*0x5f+0x9*-0x174,-0x1*0x1471+0x99b*-0x3+0x3143]],'Y':[[0xc59+-0x1b05+0x11*0xdd,-0x2209+0x1*0x1d04+0x5*0x101,0xbbc*-0x3+-0x17bf*0x1+-0xe*-0x436],[-0x1df3+0x13ce+-0x1*-0xa26,-0x102e+0x1*-0x50d+0x153b,0x73*-0x28+0x353+0xea6],[0xffd*-0x1+-0x1754+0x21*0x131,0x5*0x6fd+0x6a*0x1f+-0x2fc6,-0x1*0x551+-0x1720+0x1*0x1c71],[0x2260+-0x1*-0xfc5+0xb*-0x48f,-0x1*0x1361+-0x8b5*-0x1+-0x1*-0xaad,-0x2086+0x259a+-0x514]],'Z':[[-0x1d0b+0x2d4*0x4+0x11bc,0x1926+0x23b6+0x1449*-0x3,0xc70+0x1775+0x1*-0x23e5],[0x2559+0x156a+0x7*-0x865,0xbd0+-0x25*-0xa7+-0x23f2,0x1e20+0x1e57+-0x3c77*0x1],[0x7*-0x4c9+0xd81+0x13fe,-0x1e0+0xc70+-0xa8f,0x275+-0x1d82+0x1b0d],[0x1*-0x20d1+0x25f*0x3+-0x292*-0xa,0x2*0x10a2+0x5*0x392+-0x331d,-0x8b3+-0x610+0xec4]]},LETTER_COLOR_INDEX=0x17fd+-0xce+-0x9*0x293,LOGO_DATA={'B':[[0xa*-0x1f+0x11*0x61+0x1be*-0x3,0x2658+0x1*0x1ab1+-0x1042*0x4,-0x26f1+0x26ec+0x5],[0x7e4+0x70e+-0xef1,0x853*-0x3+-0x6b*-0x12+-0x1*-0x1173,0xf2b*-0x1+0x6e*0xc+0xa04],[-0x1f1*-0xe+0xc*-0x16e+0x3*-0x357,0x4*-0x57a+-0x2ab*-0x3+-0xb2*-0x14,-0x7fb*0x1+0x1dec+-0x15f1],[0x17bf+-0xeaf+-0x1*0x90f,0x22c5+-0x286*0xc+-0x47d,0xe20+-0x1fe1+0x11c2],[0x17b2+0x26e7+-0x1*0x3e98,0x89*-0x27+-0x1f*0xda+0x3*0xfc2,-0x21d5+0x13e3+0xdf2]],'L':[[-0x19ae+0x23*0xae+0x1e5*0x1,-0x3*-0xc1+-0x83c*-0x1+0xa7f*-0x1,-0x64*0x4f+0xad*0x7+0x1a21],[-0x267b*-0x1+-0xda8+0x3*-0x846,0x6*0x35e+-0x896+-0xb9e,0x743+0x4c1*-0x8+0x1ec5],[0xf7*-0x1f+-0x2209*-0x1+-0x41f,0x65*0x3+-0x31f*-0x5+-0x10ca,-0x4a8*0x1+-0x1*0x23c5+0x286d],[-0x208b+0x1f*-0xd+0x221f,0x2*0xc17+0xa91+-0x22be,-0x2f5*0x6+-0x1641+0x1400*0x2]],'O':[[0x1481+0x20e+-0x168f,-0x1445*0x1+0xb59+-0x5*-0x1c9,-0x40a+0x1*0xd69+0x95f*-0x1],[0x25c5+0x1139*-0x2+-0x352,0x171*-0x1b+-0x970+0x1*0x305b,0x1704+0x5ab*0x2+-0x2259],[0x2*-0x1225+-0x1b51+0xfe7*0x4,0xf6a+-0x38a*0x6+0x5d2,-0x64d+-0x72c+0x45*0x32],[0x69*0x13+0x22f3+0x155f*-0x2,-0x287*-0xb+0x1039+-0xbf*0x3b,0x10c+-0x1df+0x1*0xd3]],'C':[[0x2a9+-0x156f+-0x321*-0x6,0x2*-0x37d+-0x7f*0x3f+0x263c,0x2*-0x827+0x2f*0x3+-0x2*-0x7e1],[-0xa63*0x3+-0x3*0x23b+0x25db,-0x15dc+0x17af+-0x1*0x1d3,-0xdd*-0x3+-0x12*0x3d+0x91*0x3],[0x8f*0x1c+0x1ca6+-0x2c49,-0x2254+0xb0e*-0x1+-0x2d62*-0x1,0x5*-0x5c9+-0x1d1b+0x3a08],[-0x2e*0xb1+-0x283+0x2251,0x2*-0xd09+-0x14bb+0x2ece,-0x1*0x359+-0x1322+0x167c]],'K':[[-0x1845+0x1c*0xec+-0x18a*0x1,-0x718+0x26*0x53+-0x53a,-0x1bb8*0x1+-0x34c+-0x3*-0xa57],[0x259f*-0x1+-0x614*0x3+0x37dc,0x10fa+0x3ef+0xdf*-0x18,0x1315+-0x235e+0xb*0x17b],[0x1*-0x1c01+-0x2589+0x418b,-0x9*-0x3c1+-0x198+0x406*-0x8,0x2*0x111+0x22f2+-0x1c4*0x15],[0x212e+0x21b*-0x8+-0x1055,-0x1d52+0x19b7+0xd*0x47,-0x2420+-0xf*0xb5+-0x2ebc*-0x1]],'G':[[0x8b7*-0x3+-0x3*-0x809+0x20a*0x1,-0x74+-0x230d+-0x12*-0x1f9,-0xbf*-0x10+-0x21dc+0x15ed],[0x5*-0x656+0x3*0x15d+0x8*0x373,0x1*0x997+-0x24b*-0x11+-0x3092,-0x7*0x2f3+-0x7b5*0x1+0x1c5a],[0x258b+-0x7e+-0x250c,-0x442*-0x8+0x4*0x1e9+-0x29b4,0x6d*-0x26+0x9a6+0x689],[-0x19a5+-0xdf*-0x19+-0x14a*-0x3,0xfb8+0x1aa8+-0x2a5f,0x1038+-0xcbd+-0x37a]],'A':[[0x1*-0x11c1+0x257+-0x2*-0x7b5,0x5*0x665+0xa6b*0x3+-0xd*0x4dd,-0x15*0x54+-0x240+-0x1e*-0x4e],[-0x11a6*-0x1+0x1e21+-0x2fc6,0xbf*0x1d+-0x656*-0x2+-0x1*0x224f,-0x1a3b+-0x1*0x3e1+-0xd*-0x251],[0xf95*-0x2+0x26b*0x10+-0x785,0xd7f+0x11f9+-0x1f77,-0x6b*0xb+0x1*0x2548+-0x20ae],[-0x8f8+0x7da+0x1*0x11f,-0x1d96+-0xa*0x2c2+-0x65a*-0x9,-0x1df9+-0x2585+-0x25*-0x1d3]],'M':[[-0x1c01+0xca7+0xf5b*0x1,0x10c0*0x2+-0x1c95+0x1*-0x4eb,-0x2021+-0x17*-0x14c+0x24e],[0x2055+0x1bf1+-0x3c45,0x30a+0x57d+0x1*-0x886,0x639+-0x10cf+0xa97*0x1],[-0x40*-0x52+0x1467+0x28e6*-0x1,-0x685*0x4+0x2d9*-0x1+-0x1*-0x1ced,-0x1*-0x17b1+-0xfd7*0x1+-0x7d9*0x1],[-0x2*0xe89+-0x43*0x61+0x1*0x3676,0xcb*0x25+0x2274+-0x3fcb,-0x882+-0x11b1+0x1a34]],'E':[[0x68*-0xd+0xf5d+-0xa14,-0x77*-0x1+0xbb8+-0xc2e*0x1,-0x20f1+-0xbb8+0x2caa],[0xca0+0x1f87+-0x1*0x2c26,0x1*-0xb65+-0x489+0x2*0x7f7,0xeb8+0x98e*0x2+-0x362*0xa],[-0x5a*0x10+-0x267+0x4*0x202,0x1*0x2419+0x35e*0x2+0x156a*-0x2,0x1461+-0x92a+0x1d*-0x63],[0x7a*0x1f+0x1f22+-0x3*0xf4d,0x2076+-0x456+0x10*-0x1c2,-0x1*0x989+0x97+-0x1ca*-0x5],[0x1719+-0x2*-0x59b+-0x224e,-0x687+-0x1ea1+0x2529,0x19*-0x16c+-0x21d9+0x4566]]},LOGO_TEXT=['B','L','O','C','K','G','A','M','E'];function generateLogoTitle(){const _0x1556eb=_0x57c83f;logoTitle[_0x1556eb(0xbc)]='';let _0x3b7ad4=-0x1d*0x4f+0x11*0x6d+0x1b6;const _0x1f37b3=document[_0x1556eb(0x11a)]();LOGO_TEXT['forEach']((_0x5a1ad7,_0x53bd5a)=>{const _0x312ee3=_0x1556eb,_0x41bcb3=LOGO_DATA[_0x5a1ad7];if(!_0x41bcb3)return;const _0xbb0803=_0x41bcb3[0xc00+-0x221b+0x161b*0x1][_0x312ee3(0x15e)];_0x3b7ad4+=_0xbb0803;for(let _0x33a7b8=0xe6f+-0x2*-0xf0b+-0x2c85;_0x33a7b8<_0x41bcb3['length'];_0x33a7b8++){for(let _0x38d304=0x1049+-0x1*0x427+-0xc22;_0x38d304<_0x41bcb3[_0x33a7b8][_0x312ee3(0x15e)];_0x38d304++){const _0x122a90=document[_0x312ee3(0x148)]('div');_0x122a90['className']=_0x312ee3(0x10e);if(_0x41bcb3[_0x33a7b8][_0x38d304]===-0x5*-0x1b5+0x1*-0x1618+0xd90)_0x122a90[_0x312ee3(0x17c)][_0x312ee3(0x12f)](_0x312ee3(0x192));_0x122a90[_0x312ee3(0x110)][_0x312ee3(0xdd)]=_0x33a7b8+(0x34b*-0x3+-0xa9f+0x1481),_0x122a90['style'][_0x312ee3(0xf0)]=_0x3b7ad4-_0xbb0803+_0x38d304+(0x160*0x15+0x1df0+-0x3acf*0x1),_0x1f37b3[_0x312ee3(0xbb)](_0x122a90);}}if(_0x53bd5a<LOGO_TEXT[_0x312ee3(0x15e)]-(-0x206b+0x2a*0xce+-0x160))_0x3b7ad4+=-0x2001*-0x1+0x1274+-0x3274;}),logoTitle['style'][_0x1556eb(0x121)]='repeat('+_0x3b7ad4+_0x1556eb(0x167),logoTitle[_0x1556eb(0xbb)](_0x1f37b3);}function initStartMenuAnimation(){const _0x9919e4=_0x57c83f;if(bgAnimationInterval)clearInterval(bgAnimationInterval);let _0x1d61c4=[];const _0x2ec8a8=0x2*-0x16f+0x1*0x14a3+-0x11b1;startMenuCanvas[_0x9919e4(0x138)]=startMenuCanvas[_0x9919e4(0x187)],startMenuCanvas[_0x9919e4(0x16c)]=startMenuCanvas[_0x9919e4(0x160)];const _0x4fe1b2=Math['ceil'](startMenuCanvas[_0x9919e4(0x138)]/_0x2ec8a8),_0x5de788=Math['ceil'](startMenuCanvas[_0x9919e4(0x16c)]/_0x2ec8a8),_0x3a7f84=()=>{const _0x3757ba=_0x9919e4;if(_0x1d61c4[_0x3757ba(0x15e)]>0xd69+-0x1*-0x26e1+-0x3445)return;const _0x34f392=Math[_0x3757ba(0x11d)](Math[_0x3757ba(0x14f)]()*(SHAPES['length']-(0xb*-0xbc+0x1680+-0xe6b)))+(-0x1*-0x9d3+-0x1c*-0xa3+-0x1ba6),_0x56fba3=Math['floor'](Math[_0x3757ba(0x14f)]()*(COLORS['length']-(0x18b7+-0xc25*0x1+-0xc91*0x1)))+(-0x2202+-0xd6*0x25+0x40f1);_0x1d61c4['push']({'shape':SHAPES[_0x34f392],'color':COLORS[_0x56fba3],'x':Math[_0x3757ba(0x11d)](Math['random']()*(_0x4fe1b2-(-0x13*0x1b2+-0x1*0x18a1+-0x1*-0x38da))),'y':-(-0x23b1+-0xa81*-0x3+0x432),'speed':0x5*0xda+0x1*0x1ff9+0x5*-0x73f+0.02+Math[_0x3757ba(0x14f)]()*(-0x6*0x67f+0x65*-0x4b+0x4491+0.05)});},_0xb18e01=()=>{const _0x2bb875=_0x9919e4;startMenuCtx[_0x2bb875(0xb9)](-0x26e9+0x250d+0x1dc,-0x3c+0x3*0x170+-0x414,startMenuCanvas[_0x2bb875(0x138)],startMenuCanvas[_0x2bb875(0x16c)]),_0x1d61c4[_0x2bb875(0x166)]((_0x127159,_0x204e32)=>{const _0x46a11c=_0x2bb875;_0x127159['y']+=_0x127159[_0x46a11c(0x1a8)],_0x127159[_0x46a11c(0xf2)][_0x46a11c(0x166)]((_0x2fe607,_0x3fb336)=>_0x2fe607[_0x46a11c(0x166)]((_0x493e74,_0x124b43)=>{const _0x594ed0=_0x46a11c;_0x493e74>0x17*0x1c+0x20fc+-0x20*0x11c&&(startMenuCtx[_0x594ed0(0x124)]=_0x127159['color'],startMenuCtx[_0x594ed0(0x19e)]((_0x127159['x']+_0x124b43)*_0x2ec8a8,(_0x127159['y']+_0x3fb336)*_0x2ec8a8,_0x2ec8a8,_0x2ec8a8));}));if(_0x127159['y']*_0x2ec8a8>startMenuCanvas['height'])_0x1d61c4['splice'](_0x204e32,0x1472*-0x1+0x2575*0x1+-0x881*0x2);});if(Math[_0x2bb875(0x14f)]()<0x18*-0xdd+-0x2680+0x3b38*0x1+0.05)_0x3a7f84();};_0x3a7f84(),bgAnimationInterval=setInterval(_0xb18e01,0x23d+-0x31c+0xef);}function playSound(_0x3a622b){const _0x497b8d=_0x57c83f;if(!isMusicEnabled||!isGameStarted)return;const _0x4c1dff=SOUNDS[_0x497b8d(0x137)][currentZone]&&SOUNDS[_0x497b8d(0x137)][currentZone][_0x3a622b]||SOUNDS[_0x497b8d(0x137)][_0x497b8d(0x165)][_0x3a622b];if(_0x4c1dff){const _0x87bec1=sfxChannels[currentSfxChannel];_0x87bec1['src']=_0x4c1dff,_0x87bec1['volume']=sfxVolume,_0x87bec1['play']()[_0x497b8d(0xef)](_0xcf5878=>console['warn'](_0x497b8d(0x127)+_0x3a622b+_0x497b8d(0x150)+_0x4c1dff)),currentSfxChannel=(currentSfxChannel+(-0x151+0x2f*-0x39+0xbc9))%NUM_SFX_CHANNELS;}}function switchMusic(_0x3da926){const _0x519a74=_0x57c83f,_0x3441bf=_0x3da926||'NORMAL',_0x2fb0b3=audioElements[_0x3441bf];if(currentMusic===_0x2fb0b3&&!_0x2fb0b3['paused'])return;Object['values'](audioElements)[_0x519a74(0x166)](_0xc0cc9b=>{const _0x25961e=_0x519a74;_0xc0cc9b!==_0x2fb0b3&&(_0xc0cc9b[_0x25961e(0xd1)](),_0xc0cc9b['currentTime']=0x1*-0x1b87+-0x296*-0xf+-0x1*0xb43);}),currentMusic=_0x2fb0b3,currentMusic&&(currentMusic[_0x519a74(0x173)]=musicVolume,currentMusic[_0x519a74(0x12e)]=-0xced*-0x2+0x2*-0x9b3+0x76*-0xe,isMusicEnabled&&currentMusic[_0x519a74(0x12a)]()[_0x519a74(0xef)](_0x3fe7f3=>console[_0x519a74(0x154)](_0x519a74(0x155)+_0x3441bf)));}function shadeColor(_0x1bf64d,_0x5d9f32){const _0x38043c=_0x57c83f;let _0x3f5bb3=parseInt(_0x1bf64d[_0x38043c(0x1af)](-0x14*0x1df+-0x22fb+-0xe*-0x52c,0x2675+0x970*0x2+0x1*-0x3952),-0x1*0x1dcc+0x88*0xb+0x1804),_0x9ac8dc=parseInt(_0x1bf64d[_0x38043c(0x1af)](-0x1196*0x1+-0x6a2*-0x1+-0x191*-0x7,0x215e*-0x1+0x14a3+0xcc*0x10),-0x1b97+0x1969+-0x7*-0x52),_0xf62e3e=parseInt(_0x1bf64d['substring'](-0x2110+0x10ac*-0x2+0xb3*0x5f,-0x1*-0x7f0+-0x755*0x1+-0x4*0x25),0x1*-0x1703+-0x317*-0x6+-0x1b*-0x2b);_0x3f5bb3=parseInt(_0x3f5bb3*(0x3*-0xb48+0x3*0x26e+0x1af2+_0x5d9f32)/(-0x2480+-0xe26+0x330a)),_0x9ac8dc=parseInt(_0x9ac8dc*(0x1fbd+-0x32*0xaa+-0x5f*-0x5+_0x5d9f32)/(-0x1661+0x2*0x110f+0x5*-0x245)),_0xf62e3e=parseInt(_0xf62e3e*(-0x3*0x46d+-0x2626+0x33d1+_0x5d9f32)/(0x1*0x6b8+0x1*-0x23b+-0x419)),_0x3f5bb3=_0x3f5bb3<-0x33+-0x1e37+0x1f69?_0x3f5bb3:0x23f1+0x4cf*-0x1+-0x1*0x1e23,_0x9ac8dc=_0x9ac8dc<0x906+-0xe45*0x1+0x63e?_0x9ac8dc:0x1480+-0x11*0x1f7+-0x4a2*-0x3,_0xf62e3e=_0xf62e3e<0x1*-0x125f+-0x1813+-0x2b71*-0x1?_0xf62e3e:-0x3*-0x60b+0x5*0x4ad+0x3*-0xd81;const _0x5c34d0=_0x3f5bb3[_0x38043c(0xcf)](0xce3+-0x1e0+0x1*-0xaf3)['length']==-0x11b3*0x2+0x3a9+0x1fbe*0x1?'0'+_0x3f5bb3[_0x38043c(0xcf)](0xf2+-0x1d*-0x2b+-0x1*0x5c1):_0x3f5bb3['toString'](0xfdc+0xd07*-0x2+0xa42),_0x183787=_0x9ac8dc['toString'](-0x25a9+-0x5b4+0x2b6d)[_0x38043c(0x15e)]==0x1*0xe4c+0x6f*-0x19+-0x374?'0'+_0x9ac8dc[_0x38043c(0xcf)](0x134+-0x56*-0x4f+-0x1bae):_0x9ac8dc[_0x38043c(0xcf)](0x129a*-0x1+0x4fd*0x2+0x8b0),_0x5561d1=_0xf62e3e[_0x38043c(0xcf)](0x1*0x657+0x54a+0x7*-0x1a7)[_0x38043c(0x15e)]==-0xa84+0x4d5*-0x3+0xc82*0x2?'0'+_0xf62e3e[_0x38043c(0xcf)](-0x1349+-0x48d*0x4+0x258d*0x1):_0xf62e3e['toString'](-0x146c+-0x3*0xca4+0x3a68);return'#'+_0x5c34d0+_0x183787+_0x5561d1;}function drawBlock(_0x4d87e0,_0xbc96da,_0x3a4457){const _0x4a33a6=_0x57c83f,_0x2151e7=shadeColor(_0x3a4457,-0x1*-0x1d86+-0x1*0xbf9+-0x116f),_0x428441=shadeColor(_0x3a4457,-(0x4ac*-0x6+-0x5*-0x1d2+0x1316)),_0x486089=Math[_0x4a33a6(0x1b2)](-0x10b4*0x2+0x83*0x19+-0x5b*-0x3a,Math['floor'](BLOCK_SIZE/(0x2f4+-0x243b+0x214f))),_0x19be45=_0x4d87e0*BLOCK_SIZE,_0x284638=_0xbc96da*BLOCK_SIZE;ctx[_0x4a33a6(0x124)]=_0x3a4457,ctx[_0x4a33a6(0x19e)](_0x19be45,_0x284638,BLOCK_SIZE,BLOCK_SIZE),ctx[_0x4a33a6(0x124)]=_0x2151e7,ctx[_0x4a33a6(0x19e)](_0x19be45,_0x284638,BLOCK_SIZE,_0x486089),ctx[_0x4a33a6(0x19e)](_0x19be45,_0x284638,_0x486089,BLOCK_SIZE),ctx[_0x4a33a6(0x124)]=_0x428441,ctx[_0x4a33a6(0x19e)](_0x19be45+_0x486089,_0x284638+BLOCK_SIZE-_0x486089,BLOCK_SIZE-_0x486089,_0x486089),ctx['fillRect'](_0x19be45+BLOCK_SIZE-_0x486089,_0x284638,_0x486089,BLOCK_SIZE-_0x486089);}class Piece{constructor(_0x9f1b62,_0x2ca4e1){const _0x25f48f=_0x57c83f;this[_0x25f48f(0xf2)]=_0x9f1b62,this[_0x25f48f(0x129)]=_0x2ca4e1,this['x']=-0x15bc+0x1e69+-0x1*0x8ad,this['y']=0x1*0x1bcc+-0x137*0x19+0x293,this[_0x25f48f(0x14e)]=_0x25f48f(0x108);}[_0x57c83f(0x115)](_0x560f1b=![]){const _0x5cce91=_0x57c83f;if(_0x560f1b){ctx[_0x5cce91(0x124)]=_0x5cce91(0x19d),this[_0x5cce91(0xf2)]['forEach']((_0x83b057,_0x76d9d7)=>_0x83b057[_0x5cce91(0x166)]((_0x156c95,_0x543737)=>{const _0x74e553=_0x5cce91;_0x156c95>0x8e4*-0x4+0x24c0+0x4c*-0x4&&ctx[_0x74e553(0x19e)]((this['x']+_0x543737)*BLOCK_SIZE,(this['y']+_0x76d9d7)*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);}));return;}this['shape'][_0x5cce91(0x166)]((_0x19f31f,_0x2d0a54)=>{const _0x6b9af=_0x5cce91;_0x19f31f[_0x6b9af(0x166)]((_0x2ed6d0,_0x4ee6e8)=>{const _0x17c650=_0x6b9af;if(_0x2ed6d0>-0xf34+-0x1*0x176e+0x2b*0xe6){let _0x5c3d3e;switch(currentZone){case'NINJA':ctx[_0x17c650(0x124)]=_0x17c650(0x1ab),ctx[_0x17c650(0x19e)]((this['x']+_0x4ee6e8)*BLOCK_SIZE,(this['y']+_0x2d0a54)*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);return;case _0x17c650(0x162):_0x5c3d3e=RED_COLORS[this[_0x17c650(0x129)]];break;case _0x17c650(0x190):_0x5c3d3e=COLORS[Math[_0x17c650(0x11d)](Math[_0x17c650(0x14f)]()*(COLORS[_0x17c650(0x15e)]-(0x29*0x9b+-0x2*-0xaf+-0x1a30)))+(-0x2648+-0x1918+-0x37*-0x127)];break;default:_0x5c3d3e=COLORS[this[_0x17c650(0x129)]];break;}drawBlock(this['x']+_0x4ee6e8,this['y']+_0x2d0a54,_0x5c3d3e);}});});}['move'](_0x14a0d6,_0x106b82){this['x']+=_0x14a0d6,this['y']+=_0x106b82;}[_0x57c83f(0xd4)](){const _0x56f258=_0x57c83f,_0x57dbf0=this['shape'][-0x4*-0x621+-0x4e8+-0x14*0xfb]['map']((_0x5e8561,_0x30cc8e)=>this['shape'][_0x56f258(0x1a6)](_0x4505d9=>_0x4505d9[_0x30cc8e]))[_0x56f258(0x153)](),_0x7da922=this[_0x56f258(0xf2)],_0x1c8441=this['x'],_0x5df79f=this['y'];this[_0x56f258(0xf2)]=_0x57dbf0;let _0xc3f0cd=0x61b+0x66*0x46+-0x21fe;while(this[_0x56f258(0x141)]()){if(this[_0x56f258(0x14e)]===_0x56f258(0x108)){this['x']+=_0xc3f0cd,_0xc3f0cd=-(_0xc3f0cd+(_0xc3f0cd>0x1dc*0xd+0x37e+0x1*-0x1baa?-0x4*0x17+-0x73f+-0x1e7*-0x4:-(-0x188*-0xf+0x12a*0xc+0x1f*-0x131)));if(Math[_0x56f258(0x119)](_0xc3f0cd)>this[_0x56f258(0xf2)][0x7c1*0x1+0x11*0x15+0x493*-0x2][_0x56f258(0x15e)]+(0x1663+-0x3c1*-0x1+-0x1a23)){this[_0x56f258(0xf2)]=_0x7da922,this['x']=_0x1c8441,this['y']=_0x5df79f;return;}}else{this['y']+=_0xc3f0cd,_0xc3f0cd=-(_0xc3f0cd+(_0xc3f0cd>-0x1edc+-0x1*-0x26b3+-0x7d7?0x33d*-0x4+0x3*-0x3d7+0x2*0xc3d:-(0x2bc+0xb70+-0xe2b)));if(Math[_0x56f258(0x119)](_0xc3f0cd)>this[_0x56f258(0xf2)][_0x56f258(0x15e)]+(0xd09+0x11f3*-0x2+0x16de)){this[_0x56f258(0xf2)]=_0x7da922,this['x']=_0x1c8441,this['y']=_0x5df79f;return;}}}playSound(_0x56f258(0xd4)),checkWhiteBlockCollision();}[_0x57c83f(0x141)](){const _0x28692b=_0x57c83f;for(let _0x5bdf09=-0x92f*0x1+0x15*0x136+-0x1*0x103f;_0x5bdf09<this[_0x28692b(0xf2)][_0x28692b(0x15e)];_0x5bdf09++){for(let _0x166d03=0xb21*0x2+-0x1*-0x1a91+0x1af*-0x1d;_0x166d03<this[_0x28692b(0xf2)][_0x5bdf09]['length'];_0x166d03++){if(this[_0x28692b(0xf2)][_0x5bdf09][_0x166d03]>0x1555+-0xca9*-0x1+0x21fe*-0x1){let _0x65437c=this['x']+_0x166d03,_0x772eb7=this['y']+_0x5bdf09;if(_0x65437c<-0x9ea+-0x155*-0x14+-0x10ba||_0x65437c>=COLS||_0x772eb7>=ROWS||board[_0x772eb7]&&board[_0x772eb7][_0x65437c]>-0x213f+-0xbd6+0x2d15)return!![];}}}return![];}}function saveState(){const _0x294433=_0x57c83f;if(isGameOver||!currentPiece||isEvilMode)return;const _0x3a8c02={'board':board,'currentPiece':{'shape':currentPiece[_0x294433(0xf2)],'colorIndex':currentPiece[_0x294433(0x129)],'x':currentPiece['x'],'y':currentPiece['y'],'gravityDirection':currentPiece[_0x294433(0x14e)]},'score':score,'currentZone':currentZone,'COLS':COLS,'ROWS':ROWS,'whiteBlockSpawnChance':whiteBlockSpawnChance,'forcedPieceState':forcedPieceState,'isSafePeriodActive':isSafePeriodActive,'safePeriodStartTime':safePeriodStartTime,'zoneStartScore':zoneStartScore};localStorage['setItem'](_0x294433(0x197),JSON['stringify'](_0x3a8c02));}function loadState(){const _0x58e4a9=_0x57c83f;if(isEvilMode)return![];const _0x3c10ee=localStorage['getItem'](_0x58e4a9(0x197));if(!_0x3c10ee)return![];const _0x332218=JSON[_0x58e4a9(0x147)](_0x3c10ee);if(_0x332218['safePeriodStartTime']===undefined)return![];const _0x22d772=Math[_0x58e4a9(0x11d)]((document['documentElement']['clientWidth']-(-0x1bdf+0x155f+0x684))/BLOCK_SIZE),_0xac98c3=Math['floor']((document[_0x58e4a9(0x19b)][_0x58e4a9(0x160)]-(-0xb73+0x2b*0x9d+-0xee8))/BLOCK_SIZE),_0x58afab=_0x332218[_0x58e4a9(0x126)],_0x53a4f3=_0x332218[_0x58e4a9(0xbe)],_0x58666d=Array[_0x58e4a9(0x13f)]({'length':_0xac98c3},()=>Array(_0x22d772)['fill'](0x80+-0x25c1+0x363*0xb));for(let _0x588cce=0x5ef+0x1*0x7b3+-0x2ba*0x5;_0x588cce<Math[_0x58e4a9(0xb7)](_0xac98c3,_0x53a4f3);_0x588cce++){for(let _0x1334a3=-0x173f+0x2*-0xf+-0x1*-0x175d;_0x1334a3<Math[_0x58e4a9(0xb7)](_0x22d772,_0x58afab);_0x1334a3++){const _0x4ccc08=_0x588cce+(_0x53a4f3-_0xac98c3>0x14f1+0x1*-0x32b+-0x11c6?_0x53a4f3-_0xac98c3:0x1c8e+0x1886+-0x1a8a*0x2);_0x332218[_0x58e4a9(0xd3)][_0x4ccc08]&&(_0x58666d[_0x588cce][_0x1334a3]=_0x332218[_0x58e4a9(0xd3)][_0x4ccc08][_0x1334a3]||0x91*-0x44+-0x2e*-0x8+-0x54*-0x71);}}board=_0x58666d,COLS=_0x22d772,ROWS=_0xac98c3,score=_0x332218[_0x58e4a9(0xb8)],currentZone=_0x332218[_0x58e4a9(0xf6)],whiteBlockSpawnChance=_0x332218[_0x58e4a9(0x161)]||0x5*0x307+-0x50e*0x3+0x7+0.07,forcedPieceState=_0x332218[_0x58e4a9(0xee)]||{'type':null,'count':0x0},isSafePeriodActive=_0x332218[_0x58e4a9(0x178)],safePeriodStartTime=_0x332218[_0x58e4a9(0xc2)],zoneStartScore=_0x332218[_0x58e4a9(0x152)];const _0x3a4379=_0x332218[_0x58e4a9(0x12b)];currentPiece=new Piece(_0x3a4379[_0x58e4a9(0xf2)],_0x3a4379[_0x58e4a9(0x129)]),currentPiece['y']=_0x3a4379['y']-(_0x53a4f3>_0xac98c3?_0x53a4f3-_0xac98c3:0x34*0x89+-0x1*0x662+-0x1572),currentPiece['x']=_0x3a4379['x'],currentPiece[_0x58e4a9(0x14e)]=_0x332218['currentPiece'][_0x58e4a9(0x14e)]||_0x58e4a9(0x108);currentPiece['x']+currentPiece[_0x58e4a9(0xf2)][0x3f6+-0xa24+0x62e][_0x58e4a9(0x15e)]>_0x22d772&&(currentPiece['x']=_0x22d772-currentPiece[_0x58e4a9(0xf2)][0x5e*-0x30+-0x23ab+0x354b][_0x58e4a9(0x15e)]);currentPiece['x']=Math['max'](0x1865*0x1+-0x5ed*0x5+0x53c,currentPiece['x']);while(currentPiece[_0x58e4a9(0x141)]()){currentPiece['y']--;if(currentPiece['y']<-(0x11*-0x19f+0x2*0x2e3+0x15ce)){currentPiece=null;break;}}if(!currentPiece)spawnNewPiece();return!![];}function clearSaveState(){const _0xf0ac2f=_0x57c83f;localStorage[_0xf0ac2f(0xe1)](_0xf0ac2f(0x197));}function startGame(){const _0x4440da=_0x57c83f;bgAnimationInterval&&(clearInterval(bgAnimationInterval),bgAnimationInterval=null);isGameStarted=!![],startScreen['classList'][_0x4440da(0xf8)]('modal-visible'),soundtrackCredit[_0x4440da(0x110)][_0x4440da(0x163)]='0',soundtrackCredit['style'][_0x4440da(0x1b0)]=_0x4440da(0x17a),pauseGame(![]),clearInterval(gameOverAnimationInterval),clearTimeout(iceSlipTimeout),stopFlashTimer(),isZoneForced=![],forcedNextPieceIndex=-0x1f9f+-0x488+0x2427,zoneSelect['value']=_0x4440da(0x116),pieceSelect[_0x4440da(0x1b1)]=0x416+0x13*-0x107+0xf6f,whiteBlock={'x':null,'y':null},forcedPieceState={'type':null,'count':0x0},whiteBlockSpawnChance=0x5*-0x29e+0xf09+0x1f3*-0x1+0.07,isMobile=window[_0x4440da(0x128)]<-0xeed*0x1+0x20d6+0xee9*-0x1;const _0x1009ff=isMobile?MOBILE_COLS_DIVISOR:DESKTOP_COLS_DIVISOR,_0x34c265=isMobile?MOBILE_ROWS_DIVISOR:DESKTOP_ROWS_DIVISOR;BLOCK_SIZE=Math[_0x4440da(0x1b2)](0x5d*-0x1f+-0xc49+0x178d,Math['min'](Math['floor'](window['innerWidth']/_0x1009ff),Math[_0x4440da(0x11d)](window['innerHeight']/_0x34c265)));if(!isEvilMode&&loadState()){}else{if(isEvilMode)clearSaveState();COLS=Math[_0x4440da(0x11d)]((document[_0x4440da(0x19b)]['clientWidth']-(-0x237c+-0x10a9+-0x3429*-0x1))/BLOCK_SIZE),ROWS=Math[_0x4440da(0x11d)]((document['documentElement']['clientHeight']-(0x7*-0x47f+0x1*-0x3da+0x2357))/BLOCK_SIZE),board=Array['from']({'length':ROWS},()=>Array(COLS)[_0x4440da(0x1a7)](0x46a*0x8+-0x38*-0x38+-0x10*0x2f9)),score=0x147e+-0x1*0x1a17+0x599,currentZone=_0x4440da(0x165),isSafePeriodActive=!![],safePeriodStartTime=Date[_0x4440da(0x130)](),zoneStartScore=-0x88+-0x2d6*0x3+-0x59*-0x1a,spawnNewPiece();}let _0x18b362;switch(currentZone){case _0x4440da(0x162):_0x18b362=RED_ZONE_SPEED;break;default:_0x18b362=INITIAL_SPEED;break;}setGameSpeed(_0x18b362),switchMusic(currentZone),canvas['width']=COLS*BLOCK_SIZE,canvas[_0x4440da(0x16c)]=ROWS*BLOCK_SIZE,isGameOver=![],gameOverScreen['classList'][_0x4440da(0xf8)](_0x4440da(0x140)),updateProgressBarUI(),draw();}function setup(){const _0x5b4a06=_0x57c83f;generateLogoTitle();for(let _0x131883=-0x122f+0x1bea+0x2f*-0x35;_0x131883<NUM_SFX_CHANNELS;_0x131883++){sfxChannels[_0x5b4a06(0xde)](new Audio());}setupOptionCheckboxes(),setupVolumeSliders(),document[_0x5b4a06(0x195)](_0x5b4a06(0xcb))['forEach'](_0x3c300e=>{const _0x58dbce=_0x5b4a06;_0x3c300e[_0x58dbce(0x125)]('click',()=>{const _0x1fcc0a=_0x58dbce;if(isMusicEnabled){const _0x487e63=new Audio(SOUNDS[_0x1fcc0a(0x137)]['NORMAL']['click']);_0x487e63['volume']=sfxVolume,_0x487e63[_0x1fcc0a(0x12a)]()[_0x1fcc0a(0xef)](_0x2f90d0=>{});}});}),startButton[_0x5b4a06(0x125)]('click',startGame),restartButton[_0x5b4a06(0x125)](_0x5b4a06(0x15a),()=>{clearSaveState(),startGame();});let _0x3a5ee0;window[_0x5b4a06(0x125)]('resize',()=>{clearTimeout(_0x3a5ee0),_0x3a5ee0=setTimeout(()=>{if(isGameStarted&&!isGameOver)saveState(),startGame();else!isGameStarted&&initStartMenuAnimation();},0x11*-0x151+0x7*0xe3+0x1126);}),window['addEventListener'](_0x5b4a06(0x100),saveState),document['addEventListener'](_0x5b4a06(0x15f),_0x1788d0=>{const _0x4e20f2=_0x5b4a06;if(_0x1788d0[_0x4e20f2(0x143)]===_0x4e20f2(0xf1)){_0x1788d0['preventDefault'](),requestGodMode();return;}if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x1788d0[_0x4e20f2(0xfb)]();switch(_0x1788d0['code']){case _0x4e20f2(0x117):case _0x4e20f2(0xe4):handlePlayerMove(-(-0x2107+0x3aa+-0x6*-0x4e5));break;case _0x4e20f2(0xc4):case'KeyD':handlePlayerMove(0x1*0xd67+0x4f9*0x1+-0x125f);break;case _0x4e20f2(0x132):case _0x4e20f2(0xc6):softDrop();break;case _0x4e20f2(0x14b):case _0x4e20f2(0xf9):currentPiece[_0x4e20f2(0xd4)](),draw();break;case _0x4e20f2(0xcd):isGhostEnabled?softDrop():hardDrop();break;}});let _0x783fe6=-0x1781+0x46a*0x5+0x16f,_0x330a17=0x73*-0x3a+-0x1*0x1d5d+-0x1279*-0x3,_0x10db9d=-0x13a1+0x1d6f+-0x9ce,_0x336329=-0xcb0+0x2*-0xe96+0xc*0x37d;canvas['addEventListener']('touchstart',_0x2e319c=>{const _0x4bafd3=_0x5b4a06;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x2e319c[_0x4bafd3(0xfb)](),_0x783fe6=_0x2e319c[_0x4bafd3(0x185)][0x18c0+-0x5e7*-0x1+-0x1ea7][_0x4bafd3(0xf3)],_0x330a17=_0x2e319c[_0x4bafd3(0x185)][0x1be9+0x63*0x5+-0x1*0x1dd8]['screenY'],_0x10db9d=currentPiece['x'],_0x336329=currentPiece['y'],clearTimeout(iceSlipTimeout);},{'passive':![]}),canvas[_0x5b4a06(0x125)](_0x5b4a06(0x171),_0x579226=>{const _0x2d6027=_0x5b4a06;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x579226[_0x2d6027(0xfb)]();let _0x13d785=_0x579226[_0x2d6027(0x185)][0x1377+-0x373*0x3+-0x1*0x91e][_0x2d6027(0xf3)]-_0x783fe6,_0x2cff12=_0x579226[_0x2d6027(0x185)][-0x9*0x122+-0x399*0x3+-0x14fd*-0x1][_0x2d6027(0x11c)]-_0x330a17;const _0x3d70f5=currentPiece['x'],_0x5b7c4b=currentPiece['y'];currentPiece[_0x2d6027(0x14e)]===_0x2d6027(0x108)?currentPiece['x']=_0x10db9d+Math['round'](_0x13d785/BLOCK_SIZE):currentPiece['y']=_0x336329+Math[_0x2d6027(0x10c)](_0x2cff12/BLOCK_SIZE),currentPiece[_0x2d6027(0x141)]()&&(currentPiece['x']=_0x3d70f5,currentPiece['y']=_0x5b7c4b),checkWhiteBlockCollision(),draw();},{'passive':![]}),canvas[_0x5b4a06(0x125)](_0x5b4a06(0xe7),_0x571bb7=>{const _0x2ef853=_0x5b4a06;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x571bb7['preventDefault']();let _0x571af4=_0x571bb7[_0x2ef853(0x185)][0x18fd+-0xaeb+-0xe12][_0x2ef853(0xf3)]-_0x783fe6,_0x3ecf78=_0x571bb7[_0x2ef853(0x185)][-0xeee+0xcce+0x220]['screenY']-_0x330a17;const _0x236fef=-0x175+0x200c+-0x1*0x1e7e,_0x548ec8=0x1a54*0x1+-0x1*-0x332+0x432*-0x7,_0x5c8a84=0x1a5a*0x1+-0xa5f+-0xf83;if(Math['abs'](_0x571af4)<_0x236fef&&Math[_0x2ef853(0x119)](_0x3ecf78)<_0x236fef){currentPiece[_0x2ef853(0xd4)](),draw();return;}let _0x300d99=![],_0x4737cc=-0xf76+-0x6b*0x13+0x1767;switch(currentPiece['gravityDirection']){case'DOWN':_0x3ecf78>Math[_0x2ef853(0x119)](_0x571af4)&&_0x3ecf78>_0x548ec8&&(_0x300d99=!![],_0x4737cc=_0x3ecf78);break;case'LEFT':-_0x571af4>Math[_0x2ef853(0x119)](_0x3ecf78)&&-_0x571af4>_0x548ec8&&(_0x300d99=!![],_0x4737cc=-_0x571af4);break;case _0x2ef853(0x174):_0x571af4>Math[_0x2ef853(0x119)](_0x3ecf78)&&_0x571af4>_0x548ec8&&(_0x300d99=!![],_0x4737cc=_0x571af4);break;}if(_0x300d99){if(!isGhostEnabled&&_0x4737cc>_0x5c8a84)hardDrop();else softDrop();}}),submitPasswordButton[_0x5b4a06(0x125)](_0x5b4a06(0x15a),handlePasswordSubmit),passwordInput[_0x5b4a06(0x125)](_0x5b4a06(0x15f),_0x5811a4=>{const _0x54a061=_0x5b4a06;_0x5811a4['key']==='Enter'&&(_0x5811a4['preventDefault'](),handlePasswordSubmit());if(_0x5811a4[_0x54a061(0xdc)]===_0x54a061(0x18d))cancelPasswordPrompt();}),cancelPasswordButton[_0x5b4a06(0x125)]('click',cancelPasswordPrompt),closeTesterMenu[_0x5b4a06(0x125)](_0x5b4a06(0x15a),requestGodMode),setScoreButton[_0x5b4a06(0x125)](_0x5b4a06(0x15a),()=>{const _0x52deef=_0x5b4a06;score=parseInt(scoreInput[_0x52deef(0x1b1)])||0x101e+0x1be*-0xd+0x688,updateProgressBarUI(),draw();}),levelUpButton[_0x5b4a06(0x125)]('click',()=>{score+=-0xb2*-0x33+-0xe*-0x4f+-0x23e0,scoreInput['value']=Math['floor'](score),updateProgressBarUI(),draw();}),endSafePeriodButton[_0x5b4a06(0x125)](_0x5b4a06(0x15a),()=>{const _0x2fca2d=_0x5b4a06;if(!isGameStarted)return;isSafePeriodActive=![],safePeriodStartTime=Date[_0x2fca2d(0x130)]()-SAFE_PERIOD_DURATION,updateProgressBarUI();}),startSafePeriodButton['addEventListener'](_0x5b4a06(0x15a),()=>{const _0x5c9598=_0x5b4a06;if(!isGameStarted)return;isSafePeriodActive=!![],safePeriodStartTime=Date[_0x5c9598(0x130)](),currentZone=_0x5c9598(0x165),switchMusic(_0x5c9598(0x165)),updateProgressBarUI();}),completeZoneButton['addEventListener'](_0x5b4a06(0x15a),()=>{const _0x55c976=_0x5b4a06;if(!isGameStarted||currentZone===_0x55c976(0x165))return;score=zoneStartScore+ZONE_PROGRESS_REQUIREMENT,updateProgressBarUI();}),zoneSelect['addEventListener'](_0x5b4a06(0x1aa),()=>{const _0x459f89=_0x5b4a06,_0x5ae9c5=zoneSelect['value'];stopFlashTimer();if(_0x5ae9c5==='AUTO')isZoneForced=![],isSafePeriodActive=!![],safePeriodStartTime=Date[_0x459f89(0x130)](),currentZone=_0x459f89(0x165),switchMusic(_0x459f89(0x165));else{isZoneForced=!![],currentZone=_0x5ae9c5;if(currentZone===_0x459f89(0x19c))startFlashTimer();switchMusic(currentZone);}updateProgressBarUI(),draw();}),pieceSelect[_0x5b4a06(0x125)](_0x5b4a06(0x1aa),()=>{const _0x4c4693=_0x5b4a06;forcedNextPieceIndex=parseInt(pieceSelect[_0x4c4693(0x1b1)]);}),clearBoardButton[_0x5b4a06(0x125)](_0x5b4a06(0x15a),()=>{const _0x2d1ecd=_0x5b4a06;board=Array[_0x2d1ecd(0x13f)]({'length':ROWS},()=>Array(COLS)[_0x2d1ecd(0x1a7)](-0x1e3b+-0xf7a+0x2db5)),draw();}),testerGhostCheckbox['addEventListener'](_0x5b4a06(0x1aa),()=>{const _0xce635c=_0x5b4a06;isGhostEnabled=testerGhostCheckbox['checked'],document[_0xce635c(0x195)]('[data-option=\x22ghost\x22]')[_0xce635c(0x166)](_0x2adc5b=>_0x2adc5b[_0xce635c(0x15c)]=isGhostEnabled),localStorage[_0xce635c(0x172)]('tetrisGhostEnabled',isGhostEnabled),draw();}),testerGridCheckbox[_0x5b4a06(0x125)](_0x5b4a06(0x1aa),()=>{const _0x101859=_0x5b4a06;isGridEnabled=testerGridCheckbox[_0x101859(0x15c)],document['querySelectorAll'](_0x101859(0x11f))[_0x101859(0x166)](_0x44b7ab=>_0x44b7ab['checked']=isGridEnabled),localStorage['setItem']('tetrisGridEnabled',isGridEnabled),draw();}),testerMusicCheckbox[_0x5b4a06(0x125)](_0x5b4a06(0x1aa),()=>{const _0x3a1169=_0x5b4a06;isMusicEnabled=testerMusicCheckbox[_0x3a1169(0x15c)],document[_0x3a1169(0x195)](_0x3a1169(0x158))[_0x3a1169(0x166)](_0x5d63dd=>_0x5d63dd[_0x3a1169(0x15c)]=isMusicEnabled),localStorage[_0x3a1169(0x172)]('tetrisMusicEnabled',isMusicEnabled),toggleMusic();}),testerEvilCheckbox['addEventListener'](_0x5b4a06(0x1aa),()=>{const _0x4a742b=_0x5b4a06;isEvilMode=testerEvilCheckbox['checked'],document['querySelectorAll'](_0x4a742b(0x18f))['forEach'](_0x51fda1=>_0x51fda1[_0x4a742b(0x15c)]=isEvilMode),localStorage[_0x4a742b(0x172)](_0x4a742b(0x1a3),isEvilMode);}),startHiScoreEl['textContent']=Math[_0x5b4a06(0x11d)](hiScore),startScreen[_0x5b4a06(0x17c)]['add'](_0x5b4a06(0x140)),setTimeout(initStartMenuAnimation,-0x2*-0xebc+0x85*0x35+-0x1*0x38cf);}function pauseGame(_0x474fdf){isGamePaused=_0x474fdf,clearInterval(gameLoopInterval),!isGamePaused&&!isGameOver&&(gameLoopInterval=setInterval(update,gameSpeed));}function setGameSpeed(_0x3892ad){gameSpeed!==_0x3892ad&&(gameSpeed=_0x3892ad,pauseGame(isGamePaused));}function toggleMusic(){const _0x49cdab=_0x57c83f,_0x122175=document[_0x49cdab(0x195)](_0x49cdab(0xd8));if(isMusicEnabled){if(currentMusic)currentMusic[_0x49cdab(0x12a)]()[_0x49cdab(0xef)](_0x1afd3f=>{});_0x122175['forEach'](_0x330b6a=>_0x330b6a[_0x49cdab(0x17c)]['remove']('disabled'));}else Object[_0x49cdab(0x16f)](audioElements)[_0x49cdab(0x166)](_0x23c779=>_0x23c779[_0x49cdab(0xd1)]()),_0x122175['forEach'](_0x15d7a7=>_0x15d7a7[_0x49cdab(0x17c)][_0x49cdab(0x12f)](_0x49cdab(0x14a)));}function setupOptionCheckboxes(){const _0x41c3ee=_0x57c83f,_0xe40b3b=document[_0x41c3ee(0x195)](_0x41c3ee(0x176));_0xe40b3b[_0x41c3ee(0x166)](_0x376fb0=>{const _0x4c5de5=_0x41c3ee,_0x25c81d=_0x376fb0['dataset'][_0x4c5de5(0x18c)],_0x187d8a=_0x4c5de5(0x149)+(_0x25c81d[_0x4c5de5(0x105)](-0x1cb3+0x8*-0x449+0x3efb)[_0x4c5de5(0x170)]()+_0x25c81d[_0x4c5de5(0x146)](0x3c*0x24+-0x1*-0x179+-0x9e8))+_0x4c5de5(0xe8),_0x38c52e=localStorage['getItem'](_0x187d8a)===_0x4c5de5(0x193);_0x376fb0['checked']=_0x38c52e;switch(_0x25c81d){case'ghost':isGhostEnabled=_0x38c52e;break;case _0x4c5de5(0x182):isGridEnabled=_0x38c52e;break;case'music':isMusicEnabled=_0x38c52e;break;case'evil':isEvilMode=_0x38c52e;break;}}),_0xe40b3b[_0x41c3ee(0x166)](_0x52e180=>{const _0x3f04ca=_0x41c3ee;_0x52e180[_0x3f04ca(0x125)](_0x3f04ca(0x1aa),_0x4dc817=>{const _0x383073=_0x3f04ca,_0x42445=_0x4dc817['target'][_0x383073(0xcc)]['option'],_0x1dc629=_0x4dc817[_0x383073(0x169)][_0x383073(0x15c)],_0x4669d0=_0x383073(0x149)+(_0x42445[_0x383073(0x105)](0xd82+0xdf6+0x6*-0x494)[_0x383073(0x170)]()+_0x42445['slice'](-0x13d6+-0x1*0xcfa+0x20d1))+_0x383073(0xe8);switch(_0x42445){case _0x383073(0x19a):isGhostEnabled=_0x1dc629;break;case'grid':isGridEnabled=_0x1dc629;break;case _0x383073(0xc5):isMusicEnabled=_0x1dc629,toggleMusic();break;case _0x383073(0x106):isEvilMode=_0x1dc629;break;}localStorage[_0x383073(0x172)](_0x4669d0,_0x1dc629),document[_0x383073(0x195)](_0x383073(0x13c)+_0x42445+'\x22]')[_0x383073(0x166)](_0x4890b5=>{const _0x18f1c8=_0x383073;_0x4890b5[_0x18f1c8(0x15c)]=_0x1dc629;});if(isGameStarted&&!isGameOver)draw();});}),toggleMusic();}function setupVolumeSliders(){const _0x52850b=_0x57c83f,_0x53a488=document[_0x52850b(0x195)](_0x52850b(0x136)),_0x54947c=document[_0x52850b(0x195)]('.sfx-slider-input'),_0x558306=(_0x17d7da,_0xbd3c95)=>{const _0x5b1b84=_0x52850b;document[_0x5b1b84(0x195)](_0x17d7da)['forEach'](_0x520b5a=>{const _0xf9cde2=_0x5b1b84,_0x425a52=_0x520b5a[_0xf9cde2(0x1ae)];_0x425a52[_0xf9cde2(0x17b)](_0xf9cde2(0x102))[_0xf9cde2(0x110)]['width']=_0xbd3c95*(-0x3d*-0xa1+-0x140b+-0x36*0x55)+'%',_0x425a52['querySelector'](_0xf9cde2(0x157))['style'][_0xf9cde2(0x1ad)]=_0xbd3c95*(0x137*0x1d+0x1d09*0x1+-0x3fe0)+'%',_0x520b5a[_0xf9cde2(0x1b1)]=_0xbd3c95;});};_0x558306(_0x52850b(0x136),musicVolume),_0x558306(_0x52850b(0x179),sfxVolume),_0x53a488[_0x52850b(0x166)](_0x33f141=>{const _0xa00fc3=_0x52850b;_0x33f141[_0xa00fc3(0x125)](_0xa00fc3(0x10f),_0x4235a3=>{const _0x3deddf=_0xa00fc3;musicVolume=parseFloat(_0x4235a3['target'][_0x3deddf(0x1b1)]);if(currentMusic)currentMusic[_0x3deddf(0x173)]=musicVolume;localStorage[_0x3deddf(0x172)]('tetrisMusicVolume',musicVolume),_0x558306(_0x3deddf(0x136),musicVolume);});}),_0x54947c[_0x52850b(0x166)](_0x537b7f=>{const _0x363b0a=_0x52850b;_0x537b7f[_0x363b0a(0x125)](_0x363b0a(0x10f),_0x42a80e=>{const _0x58cf4b=_0x363b0a;sfxVolume=parseFloat(_0x42a80e['target']['value']),localStorage[_0x58cf4b(0x172)](_0x58cf4b(0x14d),sfxVolume),_0x558306(_0x58cf4b(0x179),sfxVolume);});});}function addScore(_0x56f346){const _0x3d58a6=_0x57c83f,_0x2be1db=COLS*ROWS;if(_0x2be1db===-0x9*0xc9+0xf59+-0x848)return;const _0x3b8f34=isMobile?MOBILE_COLS_DIVISOR*MOBILE_ROWS_DIVISOR:DESKTOP_COLS_DIVISOR*DESKTOP_ROWS_DIVISOR,_0x5a1d32=_0x3b8f34/_0x2be1db,_0x16fe2b=isGhostEnabled?-0x10d*0x1d+0xd09+0x1170+0.5:0x10f9+-0x1*0xc9e+0x22d*-0x2,_0x568c13=isGridEnabled?0x1f59+0x25d1+-0x6*0xb87+0.9:0x38*0x2b+-0x1*-0x957+-0x12be;score+=Math[_0x3d58a6(0x14c)](_0x56f346*_0x5a1d32*_0x16fe2b*_0x568c13);}function getWorstPiece(_0x1b2476){const _0x5e2aa2=_0x57c83f;let _0xa48086=[];for(let _0x3b8f45=-0x10b0+-0x1*0x5dd+0x168e;_0x3b8f45<SHAPES[_0x5e2aa2(0x15e)];_0x3b8f45++){let _0x20bb14=Infinity;const _0x24fd6a=SHAPES[_0x3b8f45];for(let _0x555a45=0x8d*-0x15+0x1273*0x1+-0x6e2;_0x555a45<-0x251*0x4+-0x2658+0x2fa0;_0x555a45++){let _0x3583eb=new Piece(_0x24fd6a,_0x3b8f45);for(let _0x5c6cd6=0xa9*-0xe+-0x2277+-0x1*-0x2bb5;_0x5c6cd6<_0x555a45;_0x5c6cd6++)_0x3583eb[_0x5e2aa2(0xd4)]();for(let _0x16a4e9=-(0x14*0x1b7+0x2118+-0x21b1*0x2);_0x16a4e9<COLS;_0x16a4e9++){let _0x46b965=new Piece(_0x3583eb[_0x5e2aa2(0xf2)],_0x3b8f45);_0x46b965['x']=_0x16a4e9;while(!_0x46b965[_0x5e2aa2(0x141)]())_0x46b965[_0x5e2aa2(0x112)](0x270b*0x1+0x3d0+0x9f*-0x45,-0x1235+0x1212+0x24);_0x46b965[_0x5e2aa2(0x112)](-0x1bac+0x2ed+0x5*0x4f3,-(0x21bf+-0x3f2*-0x2+-0x29a2));if(_0x46b965['y']<0x114c+0x48*0x59+-0x2a54)continue;let _0x499f51=![];for(let _0x37ea2b=-0x76*0x2b+-0x9*-0x213+0x127;_0x37ea2b<_0x46b965[_0x5e2aa2(0xf2)][_0x5e2aa2(0x15e)];_0x37ea2b++){for(let _0x247719=0x1bcc+-0x1c80+-0x2*-0x5a;_0x247719<_0x46b965[_0x5e2aa2(0xf2)][_0x37ea2b][_0x5e2aa2(0x15e)];_0x247719++){if(_0x46b965[_0x5e2aa2(0xf2)][_0x37ea2b][_0x247719]>-0x10a5*-0x1+-0x26ad*-0x1+-0x61*0x92&&(_0x46b965['x']+_0x247719<-0x1*-0x2444+0x1*-0x1eff+0x545*-0x1||_0x46b965['x']+_0x247719>=COLS)){_0x499f51=!![];break;}}if(_0x499f51)break;}if(_0x499f51)continue;const _0x4641fb=board[_0x5e2aa2(0x1a6)](_0x412106=>[..._0x412106]);_0x46b965[_0x5e2aa2(0xf2)][_0x5e2aa2(0x166)]((_0x3f32ca,_0x59539c)=>_0x3f32ca[_0x5e2aa2(0x166)]((_0x4d23d5,_0xe36291)=>{_0x4d23d5>-0x1a*0x131+-0xef+0x1fe9&&(_0x4641fb[_0x46b965['y']+_0x59539c]&&(_0x4641fb[_0x46b965['y']+_0x59539c][_0x46b965['x']+_0xe36291]=_0x4d23d5));}));let _0x443d36=-0x1726+0x41*-0x73+-0x9*-0x5d1,_0x3e2402=_0x4641fb[_0x5e2aa2(0x13b)](_0x564d2c=>{const _0x1d105f=_0x5e2aa2;if(_0x564d2c[_0x1d105f(0xc8)](_0x4fd375=>_0x4fd375>0x2463+-0x12ef*-0x2+-0x4a41))return _0x443d36++,![];return!![];});while(_0x3e2402[_0x5e2aa2(0x15e)]<ROWS){_0x3e2402[_0x5e2aa2(0xd2)](Array(COLS)['fill'](0x19f*-0x1+-0x1263+0xd*0x18a));}const _0x6485f4=evaluateBoard(_0x3e2402,_0x443d36);_0x6485f4<_0x20bb14&&(_0x20bb14=_0x6485f4);}}_0xa48086['push']({'pieceIndex':_0x3b8f45,'score':_0x20bb14});}_0xa48086['sort']((_0x424bfd,_0x3c2faf)=>_0x3c2faf[_0x5e2aa2(0xb8)]-_0x424bfd['score']);const _0x1fe121=Math['random']();let _0x50d579;if(_0x1fe121<-0x1373+-0x17cf+0x2b42+0.65)_0x50d579=_0xa48086[0x223b+0x1*0x187d+-0x1*0x3ab8]['pieceIndex'];else{if(_0x1fe121<-0x10e6*-0x2+0xec3*0x1+-0x308f+0.9)_0x50d579=_0xa48086[0x1*-0x14b7+0x1c8+0x12f0][_0x5e2aa2(0x19f)];else _0x50d579=_0xa48086[-0xe86+0xd7*0x1d+-0x9d3][_0x5e2aa2(0x19f)];}_0x1b2476(_0x50d579);}function evaluateBoard(_0x1298d9,_0x1a18fc=-0x1921+0x200d+-0x376*0x2){const _0x10ac1f=_0x57c83f;let _0x5c26ba=0xf8b+0x721+-0x5ab*0x4,_0x49f8e4=-0x5d*0x17+-0x23cc+0x2c27,_0x56f385=0x6b6*0x3+-0x116+0x2*-0x986,_0x575fde=0x1d70+-0x30*0x1+-0x1d40;const _0x3d7614=new Array(COLS)['fill'](-0x8*0x21a+-0x44*-0x20+0x10a*0x8);for(let _0x2299ac=0x1eb8+0x1c4c+-0x3b04;_0x2299ac<COLS;_0x2299ac++){for(let _0x273fbe=-0x71*0x17+0x2101+-0x41*0x5a;_0x273fbe<ROWS;_0x273fbe++){if(_0x1298d9[_0x273fbe][_0x2299ac]>0x1a8+0x1a*0x55+0x525*-0x2){_0x3d7614[_0x2299ac]=ROWS-_0x273fbe;break;}}}_0x5c26ba=_0x3d7614[_0x10ac1f(0x109)]((_0xca5ceb,_0xfaa8c8)=>_0xca5ceb+_0xfaa8c8,0x3*-0x68f+-0x41e+-0x17cb*-0x1);const _0x204e9e=Math[_0x10ac1f(0x1b2)](0xb*0x9f+-0xc45+0x570,..._0x3d7614);for(let _0x2b4695=-0x97*0x13+0xb*-0x2e1+0x2ae0;_0x2b4695<COLS;_0x2b4695++){for(let _0x59ee5f=ROWS-_0x3d7614[_0x2b4695]+(-0x2d7*0x1+-0x2ad*0x7+-0x1593*-0x1);_0x59ee5f<ROWS;_0x59ee5f++){if(_0x1298d9[_0x59ee5f][_0x2b4695]===-0x11de+-0xabb+0x1c99)_0x49f8e4++;}}for(let _0x4f895f=0x1fe*0xa+-0x2020+0x4*0x30d;_0x4f895f<COLS-(0x1*0xcaa+-0x11d*-0xb+-0x8*0x31d);_0x4f895f++){_0x56f385+=Math['abs'](_0x3d7614[_0x4f895f]-_0x3d7614[_0x4f895f+(-0xa9f+-0xb90+0xb18*0x2)]);}for(let _0x33b81c=-0x518*-0x7+0x1aa8+-0x3e50;_0x33b81c<COLS;_0x33b81c++){const _0x561556=_0x33b81c>0x5e2+-0x1f67*0x1+0x1985?_0x3d7614[_0x33b81c-(-0x5b5+-0x2681+0x2c37)]:_0x204e9e,_0x194b33=_0x33b81c<COLS-(0x752+0xdc9*-0x1+0x678)?_0x3d7614[_0x33b81c+(-0x859*-0x3+-0x68*-0x3e+-0x323a)]:_0x204e9e,_0x166619=Math[_0x10ac1f(0xb7)](_0x561556,_0x194b33)-_0x3d7614[_0x33b81c];if(_0x166619>0x2e*-0x56+-0x1780+0x26f5)_0x575fde+=_0x166619*_0x166619;}const _0x25d47b=-0x23a2+0x19*0xbf+0x9*0x1e3+0.6,_0x8ea6a8=0xc20+-0x49d*0x8+0x18c9+0.19999999999999996,_0x3d5f5b=0x73e+0x261b*0x1+-0x37d*0xd+0.25,_0x2775d1=-0x1da5+0x7f*0x2e+0x13*0x5c,_0x32470e=-0x6d*0x1c+-0x1e1f*-0x1+0xb3*-0x1a,_0x144ae5=_0x5c26ba*_0x25d47b+_0x49f8e4*_0x8ea6a8+_0x56f385*_0x3d5f5b+_0x575fde*_0x2775d1-_0x1a18fc*_0x1a18fc*_0x32470e;return _0x144ae5;}function spawnNewPiece(){const _0x24cdaf=_0x57c83f;whiteBlock={'x':null,'y':null};currentZone===_0x24cdaf(0x190)&&(Math['random']()<whiteBlockSpawnChance?(spawnWhiteBlock(),whiteBlockSpawnChance*=0x20b9+-0x12e2*-0x1+-0x339b+0.8):whiteBlockSpawnChance*=0xd14+0x1fff+-0x2d12+0.020000000000000018);const _0x4b24bd=_0x4f883d=>{const _0x345a9b=_0x24cdaf;if(currentZone===_0x345a9b(0x190)){const _0xc09ac6=[_0x345a9b(0x108)],_0x4bd5e7=new Piece(_0x4f883d[_0x345a9b(0xf2)],_0x4f883d[_0x345a9b(0x129)]);_0x4bd5e7['x']=COLS-_0x4bd5e7[_0x345a9b(0xf2)][-0x1*-0x783+0xd79+-0x14fc]['length'],_0x4bd5e7['y']=Math[_0x345a9b(0x11d)](ROWS/(-0x22*0xf9+0x1564+-0x11*-0xb0))-Math['floor'](_0x4bd5e7[_0x345a9b(0xf2)][_0x345a9b(0x15e)]/(-0x1599+0x3*-0x6f5+0x2a7a));!_0x4bd5e7['collides']()&&_0xc09ac6[_0x345a9b(0xde)](_0x345a9b(0xd9));_0x4bd5e7['x']=0x1040*0x1+0x19c2+-0x2*0x1501,_0x4bd5e7['y']=Math['floor'](ROWS/(-0x240e+-0xead+0x32bd))-Math[_0x345a9b(0x11d)](_0x4bd5e7[_0x345a9b(0xf2)][_0x345a9b(0x15e)]/(-0x5*-0x2f2+0x8d2+-0x178a));!_0x4bd5e7[_0x345a9b(0x141)]()&&_0xc09ac6[_0x345a9b(0xde)]('RIGHT');_0x4f883d[_0x345a9b(0x14e)]=_0xc09ac6[Math[_0x345a9b(0x11d)](Math['random']()*_0xc09ac6[_0x345a9b(0x15e)])];const _0x4244fd=-0x25*0x13+0x17df+-0x1*0x151f-(-0x1*-0x2419+0x7*-0x2b+-0x22ec+0.3+Math['random']()*(0x43f*-0x7+-0x8c4+0x267d+0.2));setGameSpeed(INITIAL_SPEED*_0x4244fd);}switch(_0x4f883d[_0x345a9b(0x14e)]){case _0x345a9b(0xd9):_0x4f883d['x']=COLS-_0x4f883d[_0x345a9b(0xf2)][-0x18b8+0xb*0x25+0x1721][_0x345a9b(0x15e)],_0x4f883d['y']=Math['floor'](ROWS/(-0x1*0x14d1+-0x5*0x5df+0x322e))-Math[_0x345a9b(0x11d)](_0x4f883d['shape'][_0x345a9b(0x15e)]/(0x1b1e+0x5f2*-0x5+-0x29e*-0x1));break;case _0x345a9b(0x174):_0x4f883d['x']=0x1584+-0x890*-0x1+-0x1e14,_0x4f883d['y']=Math[_0x345a9b(0x11d)](ROWS/(-0x25ee+-0x112e+0x371e))-Math[_0x345a9b(0x11d)](_0x4f883d[_0x345a9b(0xf2)][_0x345a9b(0x15e)]/(-0x1*-0x329+-0x23b6+0x208f));break;case _0x345a9b(0x108):default:_0x4f883d['x']=Math['floor'](COLS/(-0x112f+0x20f+0xf22*0x1))-Math[_0x345a9b(0x11d)](_0x4f883d['shape'][0x214d+0x2*0x1290+-0x466d][_0x345a9b(0x15e)]/(-0xdce+0x10d6+-0x306)),_0x4f883d['y']=0x248f+0x19*-0xb6+-0x12c9;break;}currentPiece=_0x4f883d;if(currentPiece[_0x345a9b(0x141)]())gameOver();};let _0x4613b1,_0x53055c,_0x158352;if(isEvilMode){currentPiece=null,draw(),setTimeout(()=>{getWorstPiece(_0x242f68=>{const _0x265585=_0x2212;_0x158352=Math['floor'](Math[_0x265585(0x14f)]()*(COLORS[_0x265585(0x15e)]-(-0x3*0xd3+0x17*0x1a3+-0x232b)))+(-0x1a38*-0x1+0x295*0x3+-0x45*0x7e),_0x53055c=SHAPES[_0x242f68][_0x265585(0x1a6)](_0x51bfa9=>_0x51bfa9[_0x265585(0x1a6)](_0x156174=>_0x156174>0x2d7+-0x37b*0x7+0x13*0x122?_0x158352:0x1*0x191e+0x3b*0x64+-0x2*0x1815)),_0x4b24bd(new Piece(_0x53055c,_0x158352)),draw();});},-0x9a7*0x2+-0x2512+0x1*0x3860);return;}else{if(forcedPieceState[_0x24cdaf(0x183)]>0x709*-0x1+-0x24dc+0x11*0x295)_0x4613b1=forcedPieceState[_0x24cdaf(0xca)],forcedPieceState[_0x24cdaf(0x183)]--,_0x53055c=SHAPES[_0x4613b1],_0x158352=_0x4613b1;else{if(forcedNextPieceIndex>0x1747+-0xe92+-0x2e7*0x3)_0x4613b1=forcedNextPieceIndex,forcedNextPieceIndex=-0x51d*0x7+0x4*0xc1+0x20c7,pieceSelect['value']=-0x21e6+0x1005+0x1*0x11e1,_0x53055c=SHAPES[_0x4613b1],_0x158352=_0x4613b1;else{if(currentZone===_0x24cdaf(0x10a)){const _0x491c81=Object[_0x24cdaf(0x1ac)](LETTER_SHAPES),_0x465630=_0x491c81[Math[_0x24cdaf(0x11d)](Math[_0x24cdaf(0x14f)]()*_0x491c81[_0x24cdaf(0x15e)])];_0x53055c=LETTER_SHAPES[_0x465630],_0x158352=LETTER_COLOR_INDEX;}else _0x4613b1=Math[_0x24cdaf(0x11d)](Math['random']()*(SHAPES[_0x24cdaf(0x15e)]-(-0x489*0x8+0x2*0xee3+0x683)))+(0x5d*0x49+-0x23e5+0x961),_0x53055c=SHAPES[_0x4613b1],_0x158352=_0x4613b1;}}}const _0x4c92b2=_0x53055c[_0x24cdaf(0x1a6)](_0x403735=>_0x403735[_0x24cdaf(0x1a6)](_0x1c0532=>_0x1c0532>-0xb4a+0xf*-0x1ce+0x265c?_0x158352:-0x6d9*0x2+-0x1*-0xa09+0x1*0x3a9));_0x4b24bd(new Piece(_0x4c92b2,_0x158352));}function solidifyPiece(){const _0x11fa18=_0x57c83f;if(currentZone===_0x11fa18(0x162)){const _0x2fe10c=['heartbeat',_0x11fa18(0xed),_0x11fa18(0x13d),_0x11fa18(0xda)];playSound(_0x2fe10c[Math['floor'](Math[_0x11fa18(0x14f)]()*_0x2fe10c['length'])]);}else playSound('lock');currentPiece['shape'][_0x11fa18(0x166)]((_0x48f944,_0x318952)=>_0x48f944[_0x11fa18(0x166)]((_0x560ccb,_0xa92108)=>{if(_0x560ccb>-0x952+0x742+-0x84*-0x4&&board[currentPiece['y']+_0x318952])board[currentPiece['y']+_0x318952][currentPiece['x']+_0xa92108]=_0x560ccb;})),clearLines();if(!isZoneForced){if(isSafePeriodActive){}else{if(currentZone!=='NORMAL'){if(score-zoneStartScore>=ZONE_PROGRESS_REQUIREMENT){currentZone=_0x11fa18(0x165);if(flashAnimation)stopFlashTimer();switchMusic(_0x11fa18(0x165)),setGameSpeed(INITIAL_SPEED),isSafePeriodActive=!![],safePeriodStartTime=Date[_0x11fa18(0x130)]();}}else{if(Math[_0x11fa18(0x14f)]()<ZONE_ENTRY_CHANCE){const _0x5ea23e=[_0x11fa18(0x162),'RAINBOW','NINJA',_0x11fa18(0x10a)];currentZone=_0x5ea23e[Math['floor'](Math[_0x11fa18(0x14f)]()*_0x5ea23e['length'])],zoneStartScore=score;if(currentZone==='NINJA')startFlashTimer();if(currentZone===_0x11fa18(0x162))setGameSpeed(RED_ZONE_SPEED);switchMusic(currentZone);}}}}spawnNewPiece();if(!isEvilMode)saveState();updateProgressBarUI();}function clearLines(){const _0x5ec2fd=_0x57c83f;let _0x2bbc6c=0x261+0x1749+0x6*-0x447;for(let _0x84aa1=ROWS-(0x19d0+-0x2*0x2a5+-0x1485);_0x84aa1>=-0x501+-0xd2e+-0x23*-0x85;_0x84aa1--){board[_0x84aa1][_0x5ec2fd(0xc8)](_0x5a93e7=>_0x5a93e7>0x2c9+0x194b+0x95c*-0x3)&&(_0x2bbc6c++,board[_0x5ec2fd(0xd6)](_0x84aa1,0x2ab*-0x2+0x1*0x15a9+-0x1052*0x1),board[_0x5ec2fd(0xd2)](Array(COLS)[_0x5ec2fd(0x1a7)](0xa*0x87+-0x15d0+-0x49*-0x3a)),_0x84aa1++);}_0x2bbc6c>-0x110a+-0x1*0x121f+-0x1*-0x2329&&(playSound('clear'),addScore(_0x2bbc6c*(-0x917+-0x162c+0x1fa7)*_0x2bbc6c));}function drawGrid(){const _0x145544=_0x57c83f;ctx[_0x145544(0xce)]=_0x145544(0x1a2),ctx['lineWidth']=-0x2569+0x1*0x1371+0x2b*0x6b;for(let _0x432886=0x786+0x7ef+-0xf75;_0x432886<=COLS;_0x432886++){ctx['beginPath'](),ctx[_0x145544(0xfe)](_0x432886*BLOCK_SIZE,0x706*-0x2+0x701+-0x259*-0x3),ctx[_0x145544(0x142)](_0x432886*BLOCK_SIZE,canvas[_0x145544(0x16c)]),ctx[_0x145544(0x15d)]();}for(let _0x2b182f=-0x1*-0x810+0x1*-0x257e+0x1d6e;_0x2b182f<=ROWS;_0x2b182f++){ctx[_0x145544(0x188)](),ctx[_0x145544(0xfe)](-0x203*0x8+0x71f*-0x2+-0x161*-0x16,_0x2b182f*BLOCK_SIZE),ctx[_0x145544(0x142)](canvas[_0x145544(0x138)],_0x2b182f*BLOCK_SIZE),ctx[_0x145544(0x15d)]();}}function drawPieceShadow(){const _0x159927=_0x57c83f;if(!flashAnimation||!currentPiece)return;const {x:_0x3f101b,y:_0x38eb7c,opacity:_0x71ca6a}=flashAnimation;if(_0x71ca6a<=0x14da+0x9b*-0x37+0xc73)return;const _0x34e59f=new Set(),_0x16ef4b=0x93*-0x13+0x224b+0x4*-0x5d1;ctx['fillStyle']='rgba(0,\x200,\x200,\x20'+_0x71ca6a*(0x545+0x17df+-0x1d24+0.4)+')',currentPiece[_0x159927(0xf2)][_0x159927(0x166)]((_0x31c935,_0x4c4ff0)=>{_0x31c935['forEach']((_0x3d9d20,_0x245ddf)=>{const _0x575a9b=_0x2212;if(_0x3d9d20===0x11*0x110+0x22fd+0x1b*-0x1f7)return;const _0x1c7d5d=(currentPiece['x']+_0x245ddf+(-0x7*0xb5+-0x1e72+0x2365+0.5))*BLOCK_SIZE,_0x515360=(currentPiece['y']+_0x4c4ff0+(-0x13d1*0x1+-0x6f7*-0x3+-0x114+0.5))*BLOCK_SIZE,_0x532b3b=_0x1c7d5d-_0x3f101b,_0x2521fe=_0x515360-_0x38eb7c,_0x5e606c=Math[_0x575a9b(0x191)](_0x532b3b*_0x532b3b+_0x2521fe*_0x2521fe);if(_0x5e606c===0x2*0x923+-0x17d3+-0x31*-0x1d)return;const _0x5c4bb6=_0x532b3b/_0x5e606c,_0x407179=_0x2521fe/_0x5e606c;for(let _0x4221bd=-0x1669+-0x26*0xa4+0x2ec2;_0x4221bd<_0x16ef4b;_0x4221bd++){const _0x2ef1f2=Math[_0x575a9b(0x11d)]((_0x1c7d5d+_0x5c4bb6*_0x4221bd*BLOCK_SIZE)/BLOCK_SIZE),_0x5bea33=Math['floor']((_0x515360+_0x407179*_0x4221bd*BLOCK_SIZE)/BLOCK_SIZE),_0x57c8ac=_0x2ef1f2+','+_0x5bea33;if(_0x2ef1f2<0x51*-0x39+-0x472+0x167b||_0x2ef1f2>=COLS||_0x5bea33<-0x129*-0x2+0x1*-0x17d7+-0x1585*-0x1||_0x5bea33>=ROWS||board[_0x5bea33]&&board[_0x5bea33][_0x2ef1f2]>-0x5ea+-0x1777*-0x1+-0x118d)break;!_0x34e59f[_0x575a9b(0x17d)](_0x57c8ac)&&_0x34e59f[_0x575a9b(0x12f)](_0x57c8ac);}});}),_0x34e59f['forEach'](_0x329c29=>{const _0x2b7fe=_0x159927,[_0x30f671,_0x4104ec]=_0x329c29['split'](',')[_0x2b7fe(0x1a6)](Number);ctx[_0x2b7fe(0x19e)](_0x30f671*BLOCK_SIZE,_0x4104ec*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);});}function drawGhostPiece(){const _0x345c88=_0x57c83f;if(!currentPiece)return;const _0x4bf511=new Piece(currentPiece[_0x345c88(0xf2)],currentPiece[_0x345c88(0x129)]);_0x4bf511['x']=currentPiece['x'],_0x4bf511['y']=currentPiece['y'],_0x4bf511['gravityDirection']=currentPiece['gravityDirection'];let _0x469460=0x1fff+0x1*-0x147+0x2*-0xf5c,_0x3d0f05=-0x145b+-0x1*-0x1233+0x228;switch(_0x4bf511['gravityDirection']){case'LEFT':_0x469460=-(0x1*-0x234e+0x2436+0x1*-0xe7);break;case'RIGHT':_0x469460=0x11*-0xa0+-0x97+0xb38;break;case'DOWN':default:_0x3d0f05=-0x4d5*-0x3+0x8*0x1aa+0xde7*-0x2;break;}while(!_0x4bf511[_0x345c88(0x141)]()){_0x4bf511[_0x345c88(0x112)](_0x469460,_0x3d0f05);}_0x4bf511['move'](-_0x469460,-_0x3d0f05),_0x4bf511[_0x345c88(0x115)](!![]);}function draw(){const _0x43a66c=_0x57c83f;if(!ctx)return;ctx[_0x43a66c(0xb9)](0x709+0x9b*-0x3e+-0x3*-0xa2b,-0x25a1*0x1+0x1b78+0x99*0x11,canvas[_0x43a66c(0x138)],canvas[_0x43a66c(0x16c)]);if(isGridEnabled)drawGrid();if(flashAnimation){const {x:_0x4080e7,y:_0x4c8f73,radius:_0x491354,opacity:_0x49da00}=flashAnimation,_0x264368=ctx[_0x43a66c(0x1a0)](_0x4080e7,_0x4c8f73,0x5*0x269+0xb0*-0x4+-0x94d,_0x4080e7,_0x4c8f73,_0x491354);_0x264368[_0x43a66c(0x17e)](0x3*-0xbcf+-0x14d6+0x1*0x3843,'rgba(255,\x20255,\x20255,\x20'+_0x49da00*(-0x9b*-0x30+-0xb0c+-0x1204+0.7)+')'),_0x264368[_0x43a66c(0x17e)](-0x20cc+-0x227f+0x434b+0.2,'rgba(255,\x20255,\x20255,\x20'+_0x49da00*(-0x1880+0x3*-0x36b+0x22c1+0.4)+')'),_0x264368[_0x43a66c(0x17e)](-0x35f*0xb+0x1dbf*0x1+-0x757*-0x1,_0x43a66c(0xe2)),ctx[_0x43a66c(0x124)]=_0x264368,ctx[_0x43a66c(0x19e)](-0x2188+-0x9b1*-0x2+0x713*0x2,-0x1d8f+-0x1c9a+-0x3*-0x1363,canvas['width'],canvas[_0x43a66c(0x16c)]);}board['forEach']((_0x29dd64,_0xe74bda)=>{const _0x509451=_0x43a66c;_0x29dd64[_0x509451(0x166)]((_0x9302e7,_0x4ae5ef)=>{const _0x107396=_0x509451;if(_0x9302e7>-0x25*-0x9e+0x603+-0x1cd9){let _0x5aa13b;switch(currentZone){case'NINJA':_0x5aa13b=_0x107396(0xea);break;case _0x107396(0x162):_0x5aa13b=RED_COLORS[_0x9302e7];break;case'RAINBOW':_0x5aa13b=COLORS[Math[_0x107396(0x11d)](Math[_0x107396(0x14f)]()*(COLORS['length']-(-0x7e3+0x8f8+0x17*-0xc)))+(-0x10a6+-0x43*0x36+0x1ec9)];break;default:_0x5aa13b=COLORS[_0x9302e7];break;}drawBlock(_0x4ae5ef,_0xe74bda,_0x5aa13b);}});}),drawPieceShadow();whiteBlock['x']!==null&&currentZone===_0x43a66c(0x190)&&(ctx[_0x43a66c(0x124)]=_0x43a66c(0x151),ctx[_0x43a66c(0x19e)](whiteBlock['x']*BLOCK_SIZE,whiteBlock['y']*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE),ctx['strokeStyle']='#aaaaaa',ctx[_0x43a66c(0xfa)](whiteBlock['x']*BLOCK_SIZE,whiteBlock['y']*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE));if(!isGameOver&&isGhostEnabled&&currentPiece)drawGhostPiece();if(!isGameOver&&currentPiece)currentPiece[_0x43a66c(0x115)]();}function update(){const _0x168674=_0x57c83f;if(isGameOver||isGamePaused||!currentPiece)return;if(!isZoneForced&&isSafePeriodActive){const _0x2b33f4=Date[_0x168674(0x130)]()-safePeriodStartTime;_0x2b33f4>=SAFE_PERIOD_DURATION&&(isSafePeriodActive=![]),updateProgressBarUI();}let _0x3bd6ac=-0xd19*-0x1+-0x270e*0x1+-0x1bb*-0xf,_0x28202d=0x8*-0x326+0x33b*0xb+-0x3*0x373;switch(currentPiece[_0x168674(0x14e)]){case _0x168674(0xd9):_0x3bd6ac=-(0x371*0x7+0xf6b+-0x2781);break;case _0x168674(0x174):_0x3bd6ac=0x1d6e+0x2136+0xf*-0x42d;break;case _0x168674(0x108):default:_0x28202d=-0x3*-0xb01+0x179c+-0x1c4f*0x2;break;}currentPiece[_0x168674(0x112)](_0x3bd6ac,_0x28202d),checkWhiteBlockCollision(),currentPiece[_0x168674(0x141)]()&&(currentPiece[_0x168674(0x112)](-_0x3bd6ac,-_0x28202d),solidifyPiece()),draw();}function softDrop(){const _0x2bc96e=_0x57c83f;if(isGameOver||!currentPiece)return;let _0x4e9a70=-0xbcf*-0x3+0xfb3+0x332*-0x10,_0x740703=0x1*-0x1f17+0x12b3*0x1+0x319*0x4;switch(currentPiece['gravityDirection']){case _0x2bc96e(0xd9):_0x4e9a70=-(-0x1*-0x23c1+-0x50e*-0x5+-0x6b*0x92);break;case _0x2bc96e(0x174):_0x4e9a70=0x5*0x2dd+-0x13dd+-0x31*-0x1d;break;case _0x2bc96e(0x108):default:_0x740703=0x5f+0x1*0x13b2+-0x504*0x4;break;}currentPiece[_0x2bc96e(0x112)](_0x4e9a70,_0x740703),checkWhiteBlockCollision(),currentPiece[_0x2bc96e(0x141)]()?(currentPiece[_0x2bc96e(0x112)](-_0x4e9a70,-_0x740703),solidifyPiece()):(addScore(0x5ae*-0x3+-0x1e20+0x2f2b),updateProgressBarUI()),draw();}function hardDrop(){const _0x90f4dc=_0x57c83f;if(isGameOver||isGhostEnabled||!currentPiece)return;playSound('harddrop');let _0x192839=-0x4*-0x129+0x1*0x25c9+-0x2a6d,_0x16b347=0x2537+0x19d8+-0x3f0f*0x1,_0x2372a5=0x9*0x3c1+0x1314+0x15b*-0x27;switch(currentPiece[_0x90f4dc(0x14e)]){case _0x90f4dc(0xd9):_0x16b347=-(-0x1dff+0x8b2+-0x6*-0x38d);break;case _0x90f4dc(0x174):_0x16b347=0x12d+-0x114f+0x561*0x3;break;case _0x90f4dc(0x108):default:_0x2372a5=-0x1a60+-0x135*-0x19+-0x36*0x12;break;}while(!currentPiece[_0x90f4dc(0x141)]()){currentPiece[_0x90f4dc(0x112)](_0x16b347,_0x2372a5),checkWhiteBlockCollision(),_0x192839++;}currentPiece['move'](-_0x16b347,-_0x2372a5),addScore(_0x192839*(-0x1*0xb32+-0x17a*-0x9+-0x216)),solidifyPiece(),draw();}function gameOver(){const _0x1fa772=_0x57c83f;if(isMusicEnabled){const _0x2caf35=new Audio(SOUNDS[_0x1fa772(0x137)][_0x1fa772(0x165)]['gameover']);_0x2caf35[_0x1fa772(0x173)]=sfxVolume,_0x2caf35['play']()[_0x1fa772(0xef)](_0xd3e286=>{});}isGameOver=!![],isGameStarted=![],progressBarContainer[_0x1fa772(0x110)][_0x1fa772(0x114)]=_0x1fa772(0x17a),pauseGame(!![]),currentPiece=null,clearSaveState(),stopFlashTimer();if(currentMusic)currentMusic[_0x1fa772(0xd1)]();currentMusic=null,startGameOverAnimation();}function dropAnimationPiece(){const _0x18602b=_0x57c83f,_0x37b944=Math[_0x18602b(0x11d)](Math[_0x18602b(0x14f)]()*(SHAPES[_0x18602b(0x15e)]-(-0x1808+0x23f5+-0x2*0x5f6)))+(0x1687+0xd17+-0x239d),_0x4f61be=Math[_0x18602b(0x11d)](Math[_0x18602b(0x14f)]()*(COLORS[_0x18602b(0x15e)]-(0x1*-0x1199+0xfab*0x1+0x1ef)))+(-0x8bb+-0xb*0x1cc+0x1c80),_0x877178=SHAPES[_0x37b944][_0x18602b(0x1a6)](_0x5dabc9=>_0x5dabc9[_0x18602b(0x1a6)](_0x245705=>_0x245705>0x311+-0x7*-0x21+-0x4*0xfe?_0x4f61be:0x3*0x77d+0x5a8+0x1*-0x1c1f)),_0x373f4d=new Piece(_0x877178,_0x4f61be),_0x2d08cc=Math[_0x18602b(0x11d)](Math[_0x18602b(0x14f)]()*(-0x517*0x7+0x8f*0x7+0x1fbc));for(let _0x19ba33=-0x1afd+0x2208+-0x1*0x70b;_0x19ba33<_0x2d08cc;_0x19ba33++)_0x373f4d[_0x18602b(0xd4)]();_0x373f4d['x']=Math[_0x18602b(0x11d)](Math['random']()*(COLS-_0x373f4d['shape'][0x1be8+0x1*-0xf5b+-0x33*0x3f]['length']+(0x18eb+0xea*-0x19+0x58*-0x6))),_0x373f4d['y']=0xb7d*-0x1+0x706*0x2+-0x28f;while(!_0x373f4d[_0x18602b(0x141)]())_0x373f4d[_0x18602b(0x112)](-0x9f*-0x16+-0x6*0x5ea+0x15d2,-0x1061*0x1+-0x6*0x21a+0x1cfe);_0x373f4d[_0x18602b(0x112)](-0x256d+0x8*-0x155+0x1007*0x3,-(0x64+0xc42+-0xca5)),_0x373f4d[_0x18602b(0xf2)][_0x18602b(0x166)]((_0x33ed24,_0x2f03fa)=>_0x33ed24[_0x18602b(0x166)]((_0x3ce056,_0x4c76ed)=>{let _0x1fe372=_0x373f4d['y']+_0x2f03fa,_0x4b3038=_0x373f4d['x']+_0x4c76ed;if(_0x3ce056>0x10c*0x4+0x7*-0x24b+-0xbdd*-0x1&&_0x1fe372>=0x2668+0x1*-0x151+-0x2517&&_0x1fe372<ROWS&&_0x4b3038>=0xc4d+-0xdd6+0x3*0x83&&_0x4b3038<COLS)board[_0x1fe372][_0x4b3038]=_0x3ce056;}));}function startGameOverAnimation(){gameOverAnimationInterval=setInterval(()=>{for(let _0xfb0a90=-0xa5d*0x3+-0x13*0x1c1+0x22*0x1e5;_0xfb0a90<0x1*0x20dd+-0x3*-0xbe9+-0x448e;_0xfb0a90++)dropAnimationPiece();draw();},-0x2591+-0xd31*-0x1+0x1870),setTimeout(endGameOverAnimation,0x8*0x18d+0x25e3+0x2c6f*-0x1);}function endGameOverAnimation(){clearInterval(gameOverAnimationInterval),showGameOverMenu();}function showGameOverMenu(){const _0x31cb62=_0x57c83f;score>hiScore&&(hiScore=score,localStorage[_0x31cb62(0x172)]('tetrisHiScore',hiScore));finalScoreEl[_0x31cb62(0x10d)]=Math[_0x31cb62(0x11d)](score),hiScoreEl[_0x31cb62(0x10d)]=Math['floor'](hiScore),startHiScoreEl['textContent']=Math['floor'](hiScore);const _0x1ae4e2=isMobile?MOBILE_COLS_DIVISOR*MOBILE_ROWS_DIVISOR:DESKTOP_COLS_DIVISOR*DESKTOP_ROWS_DIVISOR,_0x730f93=COLS>-0xb*0x183+0xa5d*-0x2+-0x255b*-0x1&&ROWS>0x123f+-0x28b*-0x4+-0x1c6b?_0x1ae4e2/(COLS*ROWS):-0x1d8b*-0x1+-0x1*-0x12f7+0x1*-0x3081,_0x10d009=isGhostEnabled?-0x1288+0x1649+0x1*-0x3c1+0.5:-0x2*-0x2c9+0x2*0x33d+0xc0b*-0x1,_0x343f6a=isGridEnabled?-0x1*0x322+0x16db*-0x1+0x19fd+0.9:0x234a+0x19a+-0x24e3;scoreMultiplierEl[_0x31cb62(0x10d)]=(_0x730f93*_0x10d009*_0x343f6a)[_0x31cb62(0x177)](-0xfef*-0x1+-0x609+-0xd3*0xc)+'x',gameOverScreen[_0x31cb62(0x17c)][_0x31cb62(0x12f)](_0x31cb62(0x140));}function handlePlayerMove(_0x569f5f){const _0x3d0d4c=_0x57c83f;if(isGameOver||!currentPiece)return;let _0x1c233a=-0x2539+-0x131*-0x3+-0x92*-0x3b,_0x153ee5=0x123*0x13+0x1dbb+-0x3354;switch(currentPiece[_0x3d0d4c(0x14e)]){case _0x3d0d4c(0x108):_0x1c233a=_0x569f5f;break;case'LEFT':case _0x3d0d4c(0x174):_0x153ee5=_0x569f5f;break;}const _0x4c22b8=()=>{const _0x24f53c=_0x3d0d4c;currentPiece[_0x24f53c(0x112)](_0x1c233a,_0x153ee5),checkWhiteBlockCollision(),currentPiece['collides']()&&currentPiece[_0x24f53c(0x112)](-_0x1c233a,-_0x153ee5),draw();};if(currentZone===_0x3d0d4c(0x162)){clearTimeout(iceSlipTimeout),_0x4c22b8();const _0x34b6af=0x2*-0x649+0x59*-0x3d+0x223f;iceSlipTimeout=setTimeout(()=>{const _0xcc07b2=_0x3d0d4c;if(isGameOver||!currentPiece)return;currentPiece[_0xcc07b2(0x112)](_0x1c233a,_0x153ee5),checkWhiteBlockCollision();if(currentPiece[_0xcc07b2(0x141)]()){currentPiece[_0xcc07b2(0x112)](-_0x1c233a,-_0x153ee5),draw();return;}draw(),Math[_0xcc07b2(0x14f)]()<-0x2*-0x17e+0xe*-0x18d+0x12ba+0.3&&setTimeout(()=>{const _0x49cd00=_0xcc07b2;if(isGameOver||!currentPiece)return;currentPiece[_0x49cd00(0x112)](_0x1c233a,_0x153ee5),checkWhiteBlockCollision(),currentPiece[_0x49cd00(0x141)]()&&currentPiece[_0x49cd00(0x112)](-_0x1c233a,-_0x153ee5),draw();},-0xad6*0x1+-0x29f*-0x9+-0x19*0x7f);},_0x34b6af);}else _0x4c22b8();}function spawnWhiteBlock(){const _0x260efc=_0x57c83f,_0x3bf358=[];for(let _0x31b574=-0x26c1*-0x1+0x159*0x1b+-0x4b24;_0x31b574<ROWS;_0x31b574++){for(let _0xabd64e=-0x2671*0x1+0x2*0xee9+0x89f;_0xabd64e<COLS;_0xabd64e++){if(board[_0x31b574][_0xabd64e]===-0x1a*-0x179+-0x14*0x55+-0x1fa6*0x1)_0x3bf358[_0x260efc(0xde)]({'x':_0xabd64e,'y':_0x31b574});}}if(_0x3bf358[_0x260efc(0x15e)]>0x1d7a+-0x3*-0xcf1+-0x444d){const _0x5dee4c=_0x3bf358[Math[_0x260efc(0x11d)](Math[_0x260efc(0x14f)]()*_0x3bf358[_0x260efc(0x15e)])];whiteBlock={'x':_0x5dee4c['x'],'y':_0x5dee4c['y']};}}function checkWhiteBlockCollision(){const _0x5d1d55=_0x57c83f;if(isGameOver||!currentPiece||whiteBlock['x']===null)return;for(let _0x27a3e8=0x2*-0x1147+-0x1655+0x38e3;_0x27a3e8<currentPiece[_0x5d1d55(0xf2)][_0x5d1d55(0x15e)];_0x27a3e8++){for(let _0x518304=0x89*0xd+-0x11b1*-0x1+-0x18a6;_0x518304<currentPiece[_0x5d1d55(0xf2)][_0x27a3e8][_0x5d1d55(0x15e)];_0x518304++){if(currentPiece[_0x5d1d55(0xf2)][_0x27a3e8][_0x518304]>0x1aba+-0x7fe+-0x12bc){const _0x2fd0f0=currentPiece['x']+_0x518304,_0x1178f6=currentPiece['y']+_0x27a3e8;if(_0x2fd0f0===whiteBlock['x']&&_0x1178f6===whiteBlock['y']){playSound(_0x5d1d55(0xc1)),triggerRandomActionBlock(),whiteBlock={'x':null,'y':null};return;}}}}}function triggerRandomActionBlock(){const _0x561010=_0x57c83f,_0x27d99b=Math['random']();if(_0x27d99b<0xbf*-0x2+0x1539*-0x1+0x16b7*0x1+0.005)board=Array[_0x561010(0x13f)]({'length':ROWS},()=>Array(COLS)['fill'](-0xdc6+-0xd7b+0x1b41));else{if(_0x27d99b<0x16f7*-0x1+0x69*0x6+0x1481+0.01)score+=-0x5da+0x6c*0x5b+-0x2dd*0xa;else{if(_0x27d99b<0x12*0x132+0xfb5+-0x2539+0.11)fillBoardWithHoles(0x1836+-0x1d79+0x557);else{if(_0x27d99b<-0x1a51+-0xd44+0x2795+0.31)fillBoardWithHoles(0x3d*-0x7+0x2e8+-0x133);else{const _0x5c16a4=SHAPES['length']-(-0x8e*0xa+-0x1ae0+0x1*0x206d),_0x3b8009=Math[_0x561010(0x11d)](Math[_0x561010(0x14f)]()*_0x5c16a4)+(-0x22f4+0x74f*0x3+-0x4*-0x342);forcedPieceState={'type':_0x3b8009,'count':0x14};}}}}draw();}function fillBoardWithHoles(_0x533904){const _0x376073=_0x57c83f,_0x4c5e17=Math[_0x376073(0xb7)](_0x533904,ROWS);for(let _0x5cbb83=ROWS-(-0x2290+0x1f91+-0x10*-0x30);_0x5cbb83>=ROWS-_0x4c5e17;_0x5cbb83--){const _0x5e8f1b=Math[_0x376073(0x11d)](Math['random']()*COLS);for(let _0x474d3a=-0x15f*-0x17+-0x443*0x3+0xf0*-0x14;_0x474d3a<COLS;_0x474d3a++){_0x474d3a!==_0x5e8f1b&&(board[_0x5cbb83][_0x474d3a]=Math['floor'](Math[_0x376073(0x14f)]()*(COLORS[_0x376073(0x15e)]-(0x251*0x3+0x1755+-0x1e47)))+(-0x16c9+0x228c+-0xbc2));}}}function startFlashTimer(){stopFlashTimer(),scheduleNextLightning();}function scheduleNextLightning(){const _0x290545=_0x57c83f;clearTimeout(flashTimeout);const _0x22103e=-0x2044+0x1*-0x497+0x2ab7+Math[_0x290545(0x14f)]()*(0x2312*0x1+-0x26b*0x7+0x861*-0x1);flashTimeout=setTimeout(()=>{if(isGameOver||currentZone!=='NINJA'||flashAnimation)return;triggerLightningPulse();},_0x22103e);}function triggerLightningPulse(){const _0x45803f=_0x57c83f;if(flashAnimation)return;playSound('lightning');const _0x16c0ec=Math[_0x45803f(0x14f)]()*canvas['width'],_0x349fa2=0x1*-0xc8f+-0x5*0x1bf+0x154a,_0x1a9b6c=canvas[_0x45803f(0x138)]*(-0x10f*0x1a+-0x1aaf+0x3635*0x1+0.8+Math[_0x45803f(0x14f)]()*(-0x172d*0x1+-0x2*0xeb6+0x3499+0.4)),_0x15cb75=[{'time':0x0,'opacity':0x0},{'time':0x3c,'opacity':-0x53*-0x11+-0x5de*0x4+-0x11f5*-0x1+0.6+Math[_0x45803f(0x14f)]()*(-0x143e*-0x1+-0x9b3+0xa8b*-0x1+0.2)},{'time':0x64,'opacity':-0x5*-0x31a+-0x340+0x621*-0x2+0.3+Math[_0x45803f(0x14f)]()*(-0x31e*-0x3+0x1032+-0x198c+0.2)},{'time':0x96,'opacity':0x22f8+0x183+-0x247b+0.5+Math['random']()*(0x15b6+-0x1983+0x3cd+0.2)},{'time':0x118,'opacity':0xb63+0x2696+-0x31f9+0.1+Math[_0x45803f(0x14f)]()*(0x93d+0x70b+-0x1048+0.1)},{'time':0x1c2,'opacity':0x0}],_0x4d3a16=_0x15cb75[_0x15cb75[_0x45803f(0x15e)]-(0x74b*0x1+-0x33d*-0x9+-0x246f)]['time'],_0x1dcbc7=performance[_0x45803f(0x130)]();function _0xc05410(_0xb4f3cf,_0x303e88,_0x189ef6){return _0xb4f3cf*(-0x1*0x221b+-0x1e*0x59+0x1*0x2c8a-_0x189ef6)+_0x303e88*_0x189ef6;}function _0x1f1ba3(_0x4b59d2){const _0x5b752d=_0x45803f,_0x55bc76=_0x4b59d2-_0x1dcbc7;if(_0x55bc76>=_0x4d3a16){flashAnimation=null,draw(),scheduleNextLightning();return;}let _0xb54bcc=-0x14b8+0x48c+0x102c;while(_0xb54bcc<_0x15cb75['length']-(0x1196*0x1+0x22*-0x54+-0x66c)&&_0x55bc76>=_0x15cb75[_0xb54bcc+(0x1ae7+-0x26d0+0xbea)][_0x5b752d(0xc7)]){_0xb54bcc++;}const _0x2d2038=_0x15cb75[_0xb54bcc],_0x458ac5=_0x15cb75[_0xb54bcc+(0x1*0x1b56+0x1ab3+-0x1b04*0x2)],_0x510c0c=_0x458ac5[_0x5b752d(0xc7)]-_0x2d2038[_0x5b752d(0xc7)],_0x1416e9=_0x55bc76-_0x2d2038[_0x5b752d(0xc7)],_0x43f80e=_0x510c0c>-0x23*-0x35+0x1*0x2185+-0x28c4*0x1?_0x1416e9/_0x510c0c:-0x189*0x13+0x1dd8+-0xac,_0x4a9c57=_0xc05410(_0x2d2038[_0x5b752d(0x163)],_0x458ac5['opacity'],_0x43f80e);flashAnimation={'id':requestAnimationFrame(_0x1f1ba3),'x':_0x16c0ec,'y':_0x349fa2,'radius':_0x1a9b6c,'opacity':_0x4a9c57},draw();}flashAnimation={'id':requestAnimationFrame(_0x1f1ba3)};}function stopFlashTimer(){flashAnimation&&flashAnimation['id']&&cancelAnimationFrame(flashAnimation['id']),clearTimeout(flashTimeout),flashTimeout=null,flashAnimation=null;}function updateProgressBarUI(){const _0x2c676c=_0x57c83f;if(!isGameStarted||isGameOver){progressBarContainer[_0x2c676c(0x110)][_0x2c676c(0x114)]=_0x2c676c(0x17a);return;}progressBarContainer[_0x2c676c(0x110)][_0x2c676c(0x114)]=_0x2c676c(0x12c),progressBar[_0x2c676c(0x1a5)]='',progressBar[_0x2c676c(0x110)]['backgroundImage']=_0x2c676c(0x17a),progressBar[_0x2c676c(0x110)][_0x2c676c(0xf5)]=_0x2c676c(0x156);if(isZoneForced)progressBar[_0x2c676c(0x17c)][_0x2c676c(0x12f)](currentZone[_0x2c676c(0x139)]()+_0x2c676c(0x18e)),progressBar[_0x2c676c(0x110)][_0x2c676c(0x138)]='100%';else{if(isSafePeriodActive){const _0x54fe61=Math[_0x2c676c(0x1b2)](-0x2373+0x108+-0x10b*-0x21,SAFE_PERIOD_DURATION-(Date[_0x2c676c(0x130)]()-safePeriodStartTime)),_0x12f8f1=_0x54fe61/SAFE_PERIOD_DURATION;progressBar[_0x2c676c(0x110)][_0x2c676c(0x138)]=_0x12f8f1*(-0x2525+-0x589+0x95*0x4a)+'%';const _0x51dd6b=(-0x292+-0x1c9+0xd*0x5f)*_0x12f8f1,_0xa94607=(0x8*-0x3a2+0x17a7+0x5cd)*_0x12f8f1;progressBar[_0x2c676c(0x110)][_0x2c676c(0x1a1)]=_0x2c676c(0x16b)+_0x51dd6b+',\x20'+_0xa94607+'%,\x2050%)',progressBar['style']['transition']=_0x2c676c(0xdf);}else{if(currentZone!=='NORMAL'){const _0x318f26=Math[_0x2c676c(0xb7)](0x125e*-0x1+-0x6d2+0x1931,(score-zoneStartScore)/ZONE_PROGRESS_REQUIREMENT);progressBar['classList'][_0x2c676c(0x12f)](currentZone['toLowerCase']()+_0x2c676c(0x18e)),progressBar['style'][_0x2c676c(0x138)]=_0x318f26*(-0x8bf+-0x16cf+0x1ff2)+'%';}else progressBar['classList'][_0x2c676c(0x12f)](_0x2c676c(0xff)),progressBar['style'][_0x2c676c(0x138)]=_0x2c676c(0xe6);}}}function requestGodMode(){const _0x5c5d84=_0x57c83f;if(isTesterMenuOpen){testerMenu[_0x5c5d84(0x110)]['display']='none',isTesterMenuOpen=![];if(isGameStarted)pauseGame(![]);}else pauseGame(!![]),passwordPrompt[_0x5c5d84(0x17c)][_0x5c5d84(0x12f)]('modal-visible'),passwordInput[_0x5c5d84(0x11b)]();}function handlePasswordSubmit(){const _0x248955=_0x57c83f;try{if(btoa(passwordInput[_0x248955(0x1b1)][_0x248955(0x18b)]())===GOD_MODE_PASS_B64)passwordPrompt[_0x248955(0x17c)]['remove'](_0x248955(0x140)),passwordInput['value']='',isTesterMenuOpen=!![],updateTesterMenuState(),testerMenu[_0x248955(0x110)][_0x248955(0x114)]='block';else throw new Error(_0x248955(0x101));}catch(_0x410d12){passwordInput[_0x248955(0x1b1)]='',passwordPrompt['classList'][_0x248955(0x12f)](_0x248955(0x15b)),setTimeout(()=>passwordPrompt['classList'][_0x248955(0xf8)](_0x248955(0x15b)),0x1*-0x1f81+-0x3*0x79f+0x3852);}}function cancelPasswordPrompt(){const _0x17bdbb=_0x57c83f;passwordPrompt[_0x17bdbb(0x17c)][_0x17bdbb(0xf8)]('modal-visible'),passwordInput[_0x17bdbb(0x1b1)]='';if(isGameStarted)pauseGame(![]);}function updateTesterMenuState(){const _0x4ed3a8=_0x57c83f;scoreInput[_0x4ed3a8(0x1b1)]=Math[_0x4ed3a8(0x11d)](score),testerGhostCheckbox['checked']=isGhostEnabled,testerGridCheckbox[_0x4ed3a8(0x15c)]=isGridEnabled,testerMusicCheckbox[_0x4ed3a8(0x15c)]=isMusicEnabled,testerEvilCheckbox[_0x4ed3a8(0x15c)]=isEvilMode;}setup();
</script>
</body>
</html>