<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blockgame</title>


<!-- PRECONNECT HINT: Tells the browser to set up a connection to YouTube in the background for a faster click-through -->
<link rel="preconnect" href="https://www.youtube.com">

<style>
    body {
        background-color: #0d0d0d; color: #eee; font-family: 'Courier New', Courier, monospace;
        /* FLEXBOX CENTERING REMOVED - This is the key fix for mobile layout */
        min-height: 100vh; margin: 0; 
        padding: 2px;
        box-sizing: border-box; 
        overflow: hidden; 
        -webkit-tap-highlight-color: transparent;
    }
    canvas { 
        /* NEW ABSOLUTE CENTERING - This is the new, more robust method */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        
        background-color: #000; 
        border: none; 
        transition: background-color 0.5s ease; 
        max-width: 100%; 
        max-height: 100%; 
    }
    
    /* --- UI OVERLAY CONTAINER --- */
    #ui-overlay-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 5;
    }

    /* --- NEW PROGRESS BAR UI --- */
    #progress-bar-container {
        /* FIX 1: Changed position to 'fixed' to ensure visibility on all devices, especially mobile. */
        position: fixed; 
        top: 0;
        left: 0;
        width: 100%;
        height: 2px; /* A little thicker for visibility */
        background-color: #333;
        z-index: 8;
        display: none; /* Hidden by default */
    }
    #progress-bar {
        height: 100%;
        width: 100%;
        background-color: #2ECC40; /* Default green */
        transition: width 0.2s linear, background-color 0.5s ease;
    }
    /* Zone-specific colors */
    #progress-bar.red-zone { background-color: #FF4136; }
    #progress-bar.rainbow-zone { background-image: linear-gradient(to right, #FF4136, #FFDC00, #2ECC40, #7FDBFF, #F012BE); }
    #progress-bar.ninja-zone { background-color: #7FDBFF; }
    #progress-bar.alphabet-zone { background-color: #F012BE; }
    /* Warning state for "Zone Incoming" */
    #progress-bar.warning {
        animation: pulse-warning 1.5s infinite ease-in-out;
    }
    @keyframes pulse-warning {
        0% { background-color: #FF851B; }
        50% { background-color: #FF4136; }
        100% { background-color: #FF851B; }
    }


    /* --- Base Modal Styles --- */
    .modal-overlay {
        display: flex; flex-direction: column;
        position: absolute; top: 50%; left: 50%; 
        transform: translate(-50%, -150%);
        opacity: 0;
        visibility: hidden;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out, visibility 0s 0.3s;
        background-color: #1a1a1a;
        border: 3px solid #fff;
        box-shadow: 0 0 0 3px #000, 0 0 0 6px #fff, 6px 6px 0 6px rgba(0,0,0,0.5);
        text-align: center; z-index: 10;
        padding: 20px 30px;
        width: 90vw; 
        max-width: 450px; 
        max-height: 90vh; 
        overflow-y: auto;
        color: #fff;
        pointer-events: auto; /* Modals are clickable again */
    }
    .modal-overlay.modal-visible {
        transform: translate(-50%, -50%);
        opacity: 1;
        visibility: visible;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }
    .modal-overlay h1, .modal-overlay h2 {
        font-size: 2.5em;
        margin: 0 0 10px 0;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 3px 3px 0 #000;
    }
    #gameOverScreen h1 { color: #ff4136; }
    #passwordPrompt h2 { color: #0074d9; }
    .modal-overlay p { margin: 5px 0 15px 0; font-size: 1.2em; }
    #scoreDetails { font-size: 1em; color: #aaa; margin-top: -10px; }

    /* --- ENHANCED START MENU --- */
    #startScreen {
        position: relative; 
        background-image: 
            repeating-linear-gradient(#282828 0 1px, transparent 1px 100%),
            repeating-linear-gradient(90deg, #282828 0 1px, transparent 1px 100%);
        background-size: 20px 20px;
        overflow: hidden; /* Keep canvas contained */
    }
    #startScreen.modal-visible {
        transform: translate(-50%, -50%);
        transition: opacity 0.3s ease-out;
    }
    #startMenuCanvas {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: -1; /* Place it behind the content */
        opacity: 0.15; /* Make it a subtle background effect */
    }
    #logoTitle {
        display: grid;
        justify-content: center;
        gap: 4px;
        margin-bottom: 20px;
    }
    .logo-pixel {
        width: 10px;
        height: 10px;
        background-color: transparent;
    }
    .logo-pixel.lit {
        background-color: #FFDC00; /* Yellow title color */
        box-shadow: 0 0 8px #FFDC00;
    }
    
    /* --- SOUNDTRACK CREDIT --- */
    #soundtrack-credit {
        position: fixed; /* Pinned to the viewport */
        bottom: 15px;
        left: 15px;
        font-size: 0.9em;
        color: #fff;
        opacity: 0.6;
        text-shadow: 1px 1px 2px #000;
        z-index: 6; /* Above the canvas overlay, below modals */
        pointer-events: auto; /* Make the link clickable */
        transition: opacity 0.5s ease;
    }
    #soundtrack-credit a {
        color: #FFDC00;
        text-decoration: none;
        font-weight: bold;
    }
    #soundtrack-credit a:hover {
        text-decoration: underline;
    }


    /* --- TACTILE BUTTONS --- */
    .btn {
        --btn-bg: #555; --btn-highlight: #777; --btn-shadow: #333; --btn-hover-bg: #606060;
        background-color: var(--btn-bg); color: #fff; 
        font-family: 'Courier New', Courier, monospace; font-size: 1.2em;
        text-transform: uppercase; letter-spacing: 1px;
        text-shadow: 1px 1px 0px var(--btn-shadow);
        padding: 12px 24px; margin-top: 20px;
        cursor: pointer; position: relative;
        border: none;
        border-top: 3px solid var(--btn-highlight);
        border-left: 3px solid var(--btn-highlight);
        border-bottom: 3px solid var(--btn-shadow);
        border-right: 3px solid var(--btn-shadow);
        transition: transform 0.1s ease-out, background-color 0.1s ease-out;
    }
    .btn:hover { background-color: var(--btn-hover-bg); transform: translateY(-2px); }
    .btn:active {
        transform: translateY(1px);
        border-top: 3px solid var(--btn-shadow);
        border-left: 3px solid var(--btn-shadow);
        border-bottom: 3px solid var(--btn-highlight);
        border-right: 3px solid var(--btn-highlight);
        filter: brightness(0.95);
    }
    #restartButton, #startButton { --btn-bg: #2ECC40; --btn-highlight: #3bdd4b; --btn-shadow: #1e8729; --btn-hover-bg: #35d345; }
    #submitPasswordButton { --btn-bg: #0074d9; --btn-highlight: #0088ff; --btn-shadow: #005299; --btn-hover-bg: #0081f2; }
    
    /* --- Custom Checkboxes --- */
    .options-list { margin-top: 20px; display: flex; flex-direction: column; gap: 15px; }
    .checkbox-item {
        position: relative;
        padding-left: 35px;
        min-height: 24px;
        display: flex;
        align-items: center;
        text-align: left;
        font-size: 1em;
        color: #ccc;
    }
    .checkbox-item input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0; width: 0;
    }
    .checkbox-item label { cursor: pointer; }
    .checkbox-item .checkmark {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        height: 14px; width: 14px;
        background-color: #111;
        border: 3px solid #888;
        transition: border-color 0.2s;
    }
    .checkbox-item .checkmark::after {
        content: "";
        position: absolute;
        display: block;
        left: 3px; top: 3px;
        width: 8px; height: 8px;
        background: #FFDC00;
        transform: scale(0);
        transition: transform 0.1s ease-in-out;
    }
    .checkbox-item input:checked ~ .checkmark::after {
        transform: scale(1);
    }
    .checkbox-item input:focus ~ .checkmark {
        border-color: #fff;
    }

    /* --- Custom Volume Sliders --- */
    .slider-item {
        display: flex; align-items: center; gap: 15px;
        text-align: left;
    }
    .slider-item.disabled { opacity: 0.5; pointer-events: none; }
    .slider-item label {
        font-size: 1em; color: #ccc;
        min-width: 50px;
    }
    .slider-container {
        flex-grow: 1; position: relative;
        height: 24px; display: flex; align-items: center;
    }
    .slider-track {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        width: 100%;
        height: 10px;
        background-color: #111;
        border-top: 2px solid #333;
        border-left: 2px solid #333;
        border-bottom: 2px solid #777;
        border-right: 2px solid #777;
        box-sizing: border-box;
    }
    .slider-fill {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        height: 10px;
        background-color: #FFDC00;
    }
    .slider-thumb {
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 16px; height: 24px;
        background-color: #555;
        border-top: 2px solid #777;
        border-left: 2px solid #777;
        border-bottom: 2px solid #333;
        border-right: 2px solid #333;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .slider-input {
        position: absolute;
        width: 100%; height: 100%;
        margin: 0;
        opacity: 0;
        cursor: pointer;
    }
    .slider-container:hover .slider-thumb { background-color: #666; }
    
    /* --- Custom Inputs --- */
    .input-styled {
        padding: 10px; font-size: 1.1em; background-color: #111; color: #eee;
        border: 3px solid #555; 
        width: 100%; box-sizing: border-box;
        margin: 15px 0; text-align: center;
        font-family: 'Courier New', Courier, monospace;
    }
    .input-styled:focus { outline: none; border-color: #FFDC00; }
    .shake { animation: shake 0.5s; border-color: #FF4136 !important; }
    @keyframes shake {
        10%, 90% { transform: translate(calc(-50% - 1px), -50%); } 
        20%, 80% { transform: translate(calc(-50% + 2px), -50%); }
        30%, 50%, 70% { transform: translate(calc(-50% - 4px), -50%); } 
        40%, 60% { transform: translate(calc(-50% + 4px), -50%); }
    }

    /* --- Tester Menu Styles --- */
    #testerMenu {
        display: none; position: absolute; top: 20px; left: 20px;
        background-color: #1a1a1a;
        border: 3px solid #0074d9;
        box-shadow: 4px 4px 0px #000;
        color: #eee;
        padding: 0;
        z-index: 20; font-size: 0.8em; max-width: 250px;
        pointer-events: auto; /* Tester menu is clickable */
    }
    .tester-header {
        background-color: #0074d9;
        color: #fff;
        padding: 5px 10px;
        position: relative;
    }
    #testerMenu h2 { margin: 0; font-size: 1.4em; text-shadow: 2px 2px 0 #000;}
    .tester-content { padding: 15px; }
    #testerMenu div { margin: 15px 0; }
    #testerMenu label, #testerMenu h3 { display: block; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; font-size: 0.9em;}
    #testerMenu input[type="number"], #testerMenu select, #testerMenu button {
        -webkit-appearance: none; appearance: none;
        width: 100%;
        background-color: #111; color: #eee;
        border: 2px solid #444; padding: 8px;
        font-family: 'Courier New', Courier, monospace; font-size: 1em;
        box-sizing: border-box;
    }
    #testerMenu select {
         background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ccc%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
         background-repeat: no-repeat; background-position: right 8px top 50%; background-size: .65em auto;
    }
    #testerMenu button { background-color: #333; cursor: pointer; margin-top: 5px; transition: background-color 0.2s; }
    #testerMenu button:hover { background-color: #555; }
    #closeTesterMenu {
        position: absolute; top: 0; right: 0;
        background: #FF4136; color: #fff;
        border: none; border-left: 3px solid #0074d9;
        font-size: 1.5em; line-height: 1; padding: 5px 8px;
        cursor: pointer; text-shadow: 2px 2px 0 #000;
    }
</style>

</head>
<body>
<canvas id="tetrisCanvas"></canvas>
<!-- Audio elements for dynamic music and sounds -->
<audio id="musicNormal" loop><source src="sound/music_normal.mp3" type="audio/mpeg"></audio>
<audio id="musicRed" loop><source src="sound/music_red.mp3" type="audio/mpeg"></audio>
<audio id="musicRainbow" loop><source src="sound/music_rainbow.mp3" type="audio/mpeg"></audio>
<audio id="musicNinja" loop><source src="sound/music_ninja.mp3" type="audio/mpeg"></audio>

<div id="ui-overlay-container">
    <div id="progress-bar-container">
        <div id="progress-bar"></div>
    </div>

    <div id="startScreen" class="modal-overlay">
        <canvas id="startMenuCanvas"></canvas>
        <div id="logoTitle"></div>
        <p>Hi-Score: <span id="startHiScore">0</span></p>
        <div class="options-list">
            <div class="checkbox-item">
                <input type="checkbox" id="startGhostCheckbox" data-option="ghost">
                <span class="checkmark"></span>
                <label for="startGhostCheckbox">Ghost Piece (halves score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="startGridCheckbox" data-option="grid">
                <span class="checkmark"></span>
                <label for="startGridCheckbox">Show Grid (-10% score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="startEvilCheckbox" data-option="evil">
                <span class="checkmark"></span>
                <label for="startEvilCheckbox">Evil Mode (no saves)</label>
            </div>
             <hr style="border-color: #444; width: 100%;">
            <div class="checkbox-item">
                <input type="checkbox" id="startMusicCheckbox" data-option="music">
                <span class="checkmark"></span>
                <label for="startMusicCheckbox">Enable Sound</label>
            </div>
            <div class="slider-item" data-option="music-slider">
                <label for="startMusicVolume">Music</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="startMusicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
            <div class="slider-item" data-option="sfx-slider">
                <label for="startSfxVolume">SFX</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="startSfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
        <button id="startButton" class="btn">Start Game</button>
    </div>

    <div id="gameOverScreen" class="modal-overlay">
        <h1>Game Over</h1>
        <p>Your Score: <span id="finalScore">0</span></p>
        <p>Hi-Score: <span id="hiScore">0</span></p>
        <p id="scoreDetails">Multiplier: <span id="scoreMultiplier">1.00x</span></p>
        <div id="options" class="options-list">
            <div class="checkbox-item">
                <input type="checkbox" id="ghostCheckbox" data-option="ghost">
                <span class="checkmark"></span>
                <label for="ghostCheckbox">Ghost Piece (halves score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="gridCheckbox" data-option="grid">
                <span class="checkmark"></span>
                <label for="gridCheckbox">Show Grid (-10% score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="evilCheckbox" data-option="evil">
                <span class="checkmark"></span>
                <label for="evilCheckbox">Evil Mode (no saves)</label>
            </div>
            <hr style="border-color: #444; width: 100%;">
             <div class="checkbox-item">
                <input type="checkbox" id="musicCheckbox" data-option="music">
                <span class="checkmark"></span>
                <label for="musicCheckbox">Enable Sound</label>
            </div>
            <div class="slider-item" data-option="music-slider">
                <label for="musicVolume">Music</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="musicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
            <div class="slider-item" data-option="sfx-slider">
                <label for="sfxVolume">SFX</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="sfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
        <button id="restartButton" class="btn">Restart</button>
    </div>

    <div id="passwordPrompt" class="modal-overlay">
        <h2>Access Test Menu</h2>
        <input type="password" id="passwordInput" class="input-styled" placeholder="Enter Password...">
        <div id="passwordButtons">
            <button id="submitPasswordButton" class="btn">Submit</button>
            <button id="cancelPasswordButton" class="btn">Cancel</button>
        </div>
    </div>

    <div id="testerMenu">
        <div class="tester-header">
            <button id="closeTesterMenu" title="Close Menu">Ã—</button>
            <h2>Tester Menu</h2>
        </div>
        <div class="tester-content">
            <div>
                <label for="scoreInput">Set Score:</label>
                <input type="number" id="scoreInput" min="0">
                <button id="setScoreButton">Set</button>
                <button id="levelUpButton" title="Adds 1000 to current score">+1000</button>
            </div>
             <div>
                <h3>Zone Controls</h3>
                <button id="endSafePeriodButton">End Safe Period</button>
                <button id="startSafePeriodButton">Start New Safe Period</button>
                <button id="completeZoneButton">Complete Zone</button>
            </div>
            <div>
                <label for="zoneSelect">Force Zone (Override):</label>
                <select id="zoneSelect">
                    <option value="AUTO">Auto (Time/Score)</option>
                    <option value="NORMAL">Normal</option>
                    <option value="RED">Red Zone</option>
                    <option value="RAINBOW">Rainbow Zone</option>
                    <option value="NINJA">Ninja Zone</option>
                    <option value="ALPHABET">Alphabet Zone</option>
                </select>
            </div>
            <div>
                <label for="pieceSelect">Force Next Piece:</label>
                <select id="pieceSelect">
                    <option value="0">Random</option>
                    <option value="7">I (Line)</option>
                    <option value="2">O (Square)</option>
                    <option value="1">T</option>
                    <option value="4">L</option>
                    <option value="3">J</option>
                    <option value="6">S</option>
                    <option value="5">Z</option>
                </select>
            </div>
             <div class="options-list">
                <h3>Toggles (Live)</h3>
                <div class="checkbox-item">
                    <input type="checkbox" id="testerGhostCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerGhostCheckbox">Ghost Piece</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="testerGridCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerGridCheckbox">Show Grid</label>
                </div>
                 <div class="checkbox-item">
                    <input type="checkbox" id="testerMusicCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerMusicCheckbox">Sound</label>
                </div>
                 <div class="slider-item" data-option="music-slider">
                    <label for="testerMusicVolume">Music</label>
                    <div class="slider-container">
                        <div class="slider-track"></div>
                        <div class="slider-fill"></div>
                        <div class="slider-thumb"></div>
                        <input type="range" id="testerMusicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                    </div>
                </div>
                <div class="slider-item" data-option="sfx-slider">
                    <label for="testerSfxVolume">SFX</label>
                    <div class="slider-container">
                        <div class="slider-track"></div>
                        <div class="slider-fill"></div>
                        <div class="slider-thumb"></div>
                        <input type="range" id="testerSfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                    </div>
                </div>
                 <div class="checkbox-item">
                    <input type="checkbox" id="testerEvilCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerEvilCheckbox">Evil Mode</label>
                </div>
            </div>
            <div>
                <h3>Actions</h3>
                <button id="clearBoardButton">Clear Board</button>
            </div>
        </div>
    </div>
    
    <div id="soundtrack-credit">
        soundtrack by <a href="https://www.youtube.com/@Staphlo4718" target="_blank" rel="noopener noreferrer">@Staphlo</a>
    </div>
</div>

<script>
const _0x12a679=_0x2e27;(function(_0x2d15eb,_0x145787){const _0x12f740=_0x2e27,_0x1b6561=_0x2d15eb();while(!![]){try{const _0x4aa754=-parseInt(_0x12f740(0x236))/(-0x2493*0x1+0x1*0x25b+0x2239)*(parseInt(_0x12f740(0x253))/(-0xcda+0x73*0xd+-0x705*-0x1))+-parseInt(_0x12f740(0x226))/(-0x2*0x623+-0x1672*-0x1+-0xa29)*(parseInt(_0x12f740(0x244))/(0xe73*-0x1+0x426+0x13*0x8b))+parseInt(_0x12f740(0x22c))/(0x4*-0x5ef+-0x1c25+0x33e6)+-parseInt(_0x12f740(0x1b4))/(-0x5cd*-0x1+-0x6*-0x4b+-0x789)+parseInt(_0x12f740(0x1c1))/(0x2499+-0x1181*0x2+-0x190)+parseInt(_0x12f740(0x219))/(0x55e*0x4+0x1ed8*0x1+-0x4*0xd12)*(parseInt(_0x12f740(0x256))/(-0x23e*0x2+-0x43*0x55+0x6*0x476))+parseInt(_0x12f740(0x249))/(0x1d27+-0x1985+-0x398)*(parseInt(_0x12f740(0x1e4))/(0x1474+0x35*-0x12+-0x10af*0x1));if(_0x4aa754===_0x145787)break;else _0x1b6561['push'](_0x1b6561['shift']());}catch(_0x334dbc){_0x1b6561['push'](_0x1b6561['shift']());}}}(_0x18be,-0xc6*0x134f+0x2b*0x1da7+0x1297ec));const canvas=document[_0x12a679(0x231)](_0x12a679(0x1da)),ctx=canvas[_0x12a679(0x19c)]('2d'),startScreen=document[_0x12a679(0x231)](_0x12a679(0x1e0)),startButton=document[_0x12a679(0x231)](_0x12a679(0x198)),gameOverScreen=document['getElementById'](_0x12a679(0x183)),finalScoreEl=document[_0x12a679(0x231)](_0x12a679(0x194)),hiScoreEl=document[_0x12a679(0x231)]('hiScore'),scoreMultiplierEl=document[_0x12a679(0x231)]('scoreMultiplier'),startHiScoreEl=document[_0x12a679(0x231)](_0x12a679(0x1cd)),restartButton=document[_0x12a679(0x231)](_0x12a679(0x1bf)),soundtrackCredit=document[_0x12a679(0x231)](_0x12a679(0x265)),progressBarContainer=document[_0x12a679(0x231)](_0x12a679(0x19e)),progressBar=document[_0x12a679(0x231)](_0x12a679(0x1a5)),audioElements={'NORMAL':document[_0x12a679(0x231)](_0x12a679(0x1e6)),'RED':document[_0x12a679(0x231)]('musicRed'),'RAINBOW':document['getElementById'](_0x12a679(0x1be)),'NINJA':document['getElementById'](_0x12a679(0x1f8)),'ALPHABET':document['getElementById'](_0x12a679(0x1e6))};let currentMusic=null,musicVolume=parseFloat(localStorage['getItem'](_0x12a679(0x165)))||0x1976+0xd0e+0x244*-0x11+0.5,sfxVolume=parseFloat(localStorage[_0x12a679(0x1d1)](_0x12a679(0x17e)))||0x11c+0x10de+-0x11fa*0x1+0.7;const sfxChannels=[];let currentSfxChannel=-0x4*0x266+0x3*0xf1+0x6c5;function _0x2e27(_0x5961a8,_0xf42dd5){const _0x41c007=_0x18be();return _0x2e27=function(_0xa5d1b0,_0x51e35a){_0xa5d1b0=_0xa5d1b0-(-0x254e+-0x16fe+0x3db1);let _0x4ec435=_0x41c007[_0xa5d1b0];return _0x4ec435;},_0x2e27(_0x5961a8,_0xf42dd5);}const NUM_SFX_CHANNELS=-0x8b7+-0x14cf+0x4e*0x61,startMenuCanvas=document[_0x12a679(0x231)]('startMenuCanvas'),startMenuCtx=startMenuCanvas['getContext']('2d'),logoTitle=document[_0x12a679(0x231)]('logoTitle');let bgAnimationInterval=null;const testerMenu=document[_0x12a679(0x231)](_0x12a679(0x225)),closeTesterMenu=document[_0x12a679(0x231)](_0x12a679(0x1db)),scoreInput=document[_0x12a679(0x231)](_0x12a679(0x202)),setScoreButton=document[_0x12a679(0x231)](_0x12a679(0x172)),levelUpButton=document[_0x12a679(0x231)]('levelUpButton'),zoneSelect=document[_0x12a679(0x231)](_0x12a679(0x1c2)),pieceSelect=document[_0x12a679(0x231)]('pieceSelect'),testerGhostCheckbox=document[_0x12a679(0x231)](_0x12a679(0x199)),testerGridCheckbox=document[_0x12a679(0x231)]('testerGridCheckbox'),testerMusicCheckbox=document[_0x12a679(0x231)](_0x12a679(0x1c6)),testerEvilCheckbox=document[_0x12a679(0x231)]('testerEvilCheckbox'),clearBoardButton=document[_0x12a679(0x231)](_0x12a679(0x228)),passwordPrompt=document['getElementById'](_0x12a679(0x205)),passwordInput=document[_0x12a679(0x231)](_0x12a679(0x1ef)),submitPasswordButton=document['getElementById'](_0x12a679(0x187)),cancelPasswordButton=document[_0x12a679(0x231)](_0x12a679(0x1b1)),endSafePeriodButton=document[_0x12a679(0x231)]('endSafePeriodButton'),startSafePeriodButton=document[_0x12a679(0x231)](_0x12a679(0x21c)),completeZoneButton=document[_0x12a679(0x231)](_0x12a679(0x22e)),SOUNDS={'sfx':{'NORMAL':{'rotate':_0x12a679(0x1cf),'lock':'sound/NORMAL/lock.wav','harddrop':_0x12a679(0x252),'clear':_0x12a679(0x171),'gameover':'sound/NORMAL/gameover.wav','click':'sound/NORMAL/click.wav'},'RED':{'heartbeat':'sound/RED/heartbeat.mp3','scrape':'sound/RED/scrape.mp3','whisper1':'sound/RED/whisper1.mp3','whisper2':_0x12a679(0x184),'rotate':_0x12a679(0x1cf),'harddrop':'sound/NORMAL/harddrop.wav','clear':_0x12a679(0x171)},'RAINBOW':{'powerup':_0x12a679(0x1e2)},'NINJA':{'lightning':_0x12a679(0x191)}}};let BLOCK_SIZE=-0x41+0xcea+-0xca8,isMobile=![],COLS,ROWS,board=[],score=-0x2263+0x37d*0xa+-0x7f*0x1,hiScore=localStorage[_0x12a679(0x1d1)]('tetrisHiScore')||0x23be+-0xd68+0x3b9*-0x6,currentPiece,gameLoopInterval,gameOverAnimationInterval,isGameOver=![],isGamePaused=![],isGameStarted=![],isGhostEnabled=![],isMusicEnabled=![],isEvilMode=![],isGridEnabled=![],currentZone=_0x12a679(0x24a),gameSpeed=-0x5*-0x42e+-0x4ef+-0xe03,iceSlipTimeout=null;const SAFE_PERIOD_DURATION=(0x4b5+-0x1a26+0x43*0x52)*(-0xa*0x18e+0x16bb*-0x1+0x2683)*(0x1339+0xb*-0x61+-0x593*0x2),ZONE_PROGRESS_REQUIREMENT=-0x22ce+0x25d2+0x4cc,ZONE_ENTRY_CHANCE=-0x11e8+0xdb1+0x437+0.15;let isSafePeriodActive=!![],safePeriodStartTime=0x1514+0x1*0x1bf7+-0x1d1*0x1b,zoneStartScore=-0xe75*0x1+-0x2*-0x4c6+0x1a3*0x3;const INITIAL_SPEED=0x1*-0x148+-0x1cdd+0x2019,RED_ZONE_SPEED=-0x1dcd+-0xac9+0x8*0x532,MIN_SPEED=0xbca+0xc9f*0x1+-0x1837,DESKTOP_COLS_DIVISOR=0x1*-0x13cd+0x8b8+-0x3*-0x3bf,DESKTOP_ROWS_DIVISOR=-0x6bb+-0x74*0x20+0x5*0x449,MOBILE_COLS_DIVISOR=-0xa03+-0x2033+0x2a44,MOBILE_ROWS_DIVISOR=-0x3+-0x41*0xd+0x1*0x368;let whiteBlock={'x':null,'y':null},whiteBlockSpawnChance=-0x2ea+-0xb31+0xe1b+0.07,forcedPieceState={'type':null,'count':0x0},flashTimeout=null,flashAnimation=null;const GOD_MODE_PASS_B64=_0x12a679(0x1d4);let isTesterMenuOpen=![],isZoneForced=![],forcedNextPieceIndex=0x23f6+0x21f*0x10+0x30a*-0x17;const COLORS=[null,_0x12a679(0x1f2),_0x12a679(0x203),_0x12a679(0x1ec),_0x12a679(0x22d),_0x12a679(0x188),_0x12a679(0x178),_0x12a679(0x24b)],RED_COLORS=[null,_0x12a679(0x21a),_0x12a679(0x1b6),_0x12a679(0x208),_0x12a679(0x1fe),_0x12a679(0x17a),_0x12a679(0x22a),_0x12a679(0x1ac)],SHAPES=[[],[[0x1073*-0x1+0x1*-0x952+0x19c6,0xbda+-0x2*0x568+-0x109,-0x5*0x471+-0x1*0x1d37+0x336d],[-0x1d5f+-0x5*0x577+-0x2*-0x1c59,0x1dc8+0xc3*0x3+-0x2010,0x1*-0x391+0x214d+-0x1dbc]],[[0xb3*-0x23+-0xe18+0x2692,-0xf*0x281+-0x1834+0x3dc4],[0x551*0x3+0x115*0x9+-0x5*0x523,-0x7c4+-0x1*-0x117a+-0x163*0x7]],[[-0x186e+0x2*-0x251+0x3c*0x7c,-0x365+0x160*0x6+-0x4da,0x52f+0x1*-0x104a+-0xb1b*-0x1],[0x6*0x5ab+-0x92*0xe+0x1a06*-0x1,-0x4*0x96c+-0xc06+-0x59*-0x8f,-0x3*0xb42+-0x1d12+0x3ed8],[-0x2590+-0xca*-0x1d+-0x15*-0xb3,-0x3ac*0x1+0x1*-0x1a6c+0x1e19,0x132+-0x1fb*-0x6+-0xd14]],[[0x1565*-0x1+0x50*-0x1+0x15b5,0x1*-0x1147+-0x7*-0x3af+-0x881,0xa06*-0x1+-0x7*-0xac+-0x3*-0x1c6],[0x101*-0x6+0x1b65*0x1+-0x155f,0xe35+0x241c+-0x1928*0x2,0x1331+0x23a0+-0x1*0x36d1],[-0x10c1+-0x1*-0xa52+0x1*0x66f,-0xf3b+-0x1d37+0x2c73,0x55*0x5d+-0x356+-0x1b8a]],[[0x57*0x4c+0x1f70+0x2dd*-0x14,0x1183+0xb0+-0x1232,-0xeb1+-0x45*-0x1b+0x76b],[0x1cdc*-0x1+0xc*-0x7f+-0x3*-0xb9b,0x105+0x1dd+-0x2e1,-0x1422+-0x1560+0x2982]],[[0x18c6+0x2*-0x127f+0x95*0x15,-0x43*0x29+0x966+0x156,0x17e*0x17+-0x71*-0x1d+-0x2f1f*0x1],[0x1274+-0x7fc+-0x4*0x29e,-0x22*0x6e+0x61a+0x883,-0x259c+0x2575+0x28]],[[0xb5f+-0x5*0x34+0xb*-0xf1,-0x2*-0xbec+-0x7db*-0x1+-0x657*0x5,0x582+-0x161c+0x5*0x352,0x479*0x8+-0xa2d+-0x199b],[-0x749+-0x1*-0x6cb+0x1*0x7f,0x15b4*0x1+0x1*-0x1cc6+0x713*0x1,-0x1db2+-0x24db+-0x428e*-0x1,0x1*-0x21f+-0x516+-0x1a*-0x47],[-0x6d*-0x40+0x1d*-0xa3+0x1*-0x8c9,0x20c5*-0x1+0x17*0xbb+0xff8,-0x1*0xb89+-0x1*-0x349+0x840,0x112c+0x23+0x7*-0x279],[0xc31+-0xa*-0x362+-0x3*0xf57,-0x5e*0x4+-0x10f5*-0x1+-0x3d*0x41,-0x26c3+-0x2*-0x1290+-0x1*-0x1a3,-0xb*-0x121+-0x10e*0x1a+0x17*0xa7]]],LETTER_SHAPES={'A':[[0x642+0x4*0x65e+0xfdd*-0x2,0x133*-0x11+-0x17f3+-0x1*-0x2c57,0xa4*-0x9+0xa8b*-0x2+0xe*0x1eb],[-0x4*0x287+0x327*-0x2+0x579*0x3,-0x1*-0x3cb+-0xf30+0xb66,-0x1e73+0x21d*-0x3+-0x24cb*-0x1],[0x2b5*0x4+0x7a5*0x3+-0x21c2*0x1,0x24*-0x5+0x704+-0x650,0x11*0x58+-0x101e+0xa47],[0x15aa+0x4b9+-0x1a62,0x5*0x70f+0x43b+-0x2786,-0xa5*0x29+-0x3bc+0xf15*0x2]],'B':[[-0x24a8+-0x11f*0x3+-0x2806*-0x1,0x23a0+-0x1*0x1e2+-0x21bd,0x4b*0x25+0x24b2+-0x11b*0x2b],[-0x2*-0x994+0x14d5*0x1+-0x27fc,-0x1279+-0x22a2+-0x1*-0x351b,-0x2574+-0x1e15+0x2*0x21c5],[-0xef*0x11+-0x98+0x1078,0x25ee+0xb30+0x477*-0xb,0x1da0+0x42f+-0x21cf],[-0xdaa+-0x14c8+0x2273,-0x1*0x1b6b+-0x1*-0x4d7+0x242*0xa,0x1*0xec7+-0x7bf+-0x7*0x101],[-0xbc4+-0x329+0x7*0x222,-0x248*-0x7+0xed2+-0x25*0xd5,-0x1061*0x1+-0x26b2+-0x17*-0x265]],'C':[[0x2f*0xad+-0x1*0x2117+0x154,-0x1a*0x80+-0x1f24*-0x1+-0x1223*0x1,0x20a1+0x1c44+-0x3ce4],[0x1cd*-0xe+-0x1661*-0x1+0x2d6,-0x1b90+-0x7a+0x1c0a,0x231e+-0x1e4*-0x4+-0x2aae*0x1],[0x2*0x9f7+-0x739*0x1+-0xcb4,-0x5b9+0x81*0x43+-0x1c0a,0x1c4d+-0xb2*-0x2b+-0x3a33],[0xfa7*0x1+0x2e*-0x8b+-0x1f*-0x4d,-0x11d*-0x4+-0xa*0x41+0x3*-0xa3,-0x10bc+0x1*-0xbcf+-0x7e*-0x3a]],'E':[[0x7*0x1bb+-0x25d9+0x19bd,-0x129c*0x1+0x1447*0x1+-0x1aa,0x2696+-0xf3e+0x19*-0xef],[-0x721+-0x1119*-0x1+0x1*-0x9f7,-0x4f4*0x1+-0x11c9+0x16bd,0x20ce+-0xa95+-0x1*0x1639],[0x8f+0x1*0x1baf+-0x1*0x1c3d,-0x2*-0x10f1+-0xd9f*0x1+0xa21*-0x2,-0x2a6*0x9+-0x15b2*0x1+0x2d88],[0x1b95*-0x1+0x1c54+0xbe*-0x1,0x19e+-0x1c54+0x1ab6,0x120+0x1812+0x102*-0x19],[0x283+0xd79+-0xffb,0x14*-0x68+0xd*0x106+-0x52d,0x233b+0xd2b+0x3b9*-0xd]],'F':[[0x29b+-0x19f+-0xfb,0x155*0x6+0x1c1*0xb+-0x1b48,-0x1450+0x178e+0x33d*-0x1],[0x4ec+0x105b+-0x1546,0x116*0x6+-0x8bb*0x2+0xaf2,-0xc*-0x10+-0xcab+0xbeb],[0x72*-0x47+-0x2571+0x4510,0xf0d*-0x2+-0x3e9+0x2204,0x1194+-0x12f8+-0x59*-0x4],[0x26ad*0x1+0x1*0xa67+-0x3113,-0x2123+0x1ed7+0x24c,-0x352+0x1c10+0x1*-0x18be],[-0x2c*0x56+0xce3+0x1e6,-0x76f*0x1+0xc*-0x33d+0x7*0x69d,0xaf9+-0x23a2+0x18a9]],'H':[[0x1d39+0x155f+0x9*-0x59f,-0xe8c+0x869*-0x3+0x27c7,-0x1*0x1f8f+-0xca7*0x2+-0x1d*-0x1f6],[0xec4+0x1c*-0x14b+0x1f3*0xb,0x2b*0xb0+-0x1869+-0x527,-0x943*0x4+0x383*-0x5+0x369c],[0x1001+0x130e+-0x230e,0x92e+0x1550+-0x7*0x45b,0x1ac4+-0x1e63+0x3a0*0x1],[0x309*-0x1+-0xe0e+0x1118,0x5*-0x181+-0x3*0x137+-0x1*-0xb2a,-0x1e63+0x16a+0x1*0x1cfa],[0x609+-0x1*-0x6d3+-0xcdb,0xbd2+0xb72*0x2+-0x22b6,0x1ad4*0x1+0x1*0x788+0x5*-0x6df]],'I':[[-0x1*0x95f+0x4*0x7f8+-0x4*0x5a0,0x1bc8+0x54f+-0x2116,0x4*-0x220+0xae+0x7d3*0x1],[-0x2fe*0xa+0x4d*0x4f+0x629,0x1f9f+-0x1c80+-0x31e,-0x305*-0x1+-0x3de*0x7+0x180d],[-0x1ffd+0x1*0x102+-0x1efb*-0x1,-0x1ca4+0x21aa+-0x5*0x101,-0x13*-0x6d+-0xae9+0x2*0x169],[0x2418+0x17*0x67+-0x2d59,-0x16bd+0xaed+0xbd1,0xe5*-0x29+-0x2505+0x49b2],[0x245f+-0x23*-0x22+0x7*-0x5dc,-0x199*-0x2+0x73a*0x4+-0x391*0x9,0x662+-0xd*-0x14d+0x174a*-0x1]],'J':[[-0x801*-0x4+0xd55+-0x13*0x263,-0xd0f+0xc1e+-0x1*-0xf1,-0x17c4+0x5*-0x4ff+-0x9c0*-0x5],[0x2320+0xb11+-0x2b*0x113,0x23b7+-0x155*0x5+0xe87*-0x2,-0x15*-0x25+-0x20*0x116+-0x1d*-0x118],[0x2b3*-0x5+-0x1737+0x24b7,0x1111*0x2+-0x586+-0x1c9c,0x71b*-0x5+-0x18*0x6f+0x2df0],[-0x145c+0x1b*-0x2e+0x5*0x50b,0x1f06+-0x18a*-0xc+-0x107f*0x3,0x13*-0xe3+-0xa3*0x23+0x2723]],'L':[[-0x1b6*0x11+-0x1915+0x362c,-0x2*-0x112+-0x3c6+0x1a2,-0x229a+0xf0b+-0x3*-0x685],[-0x2*0x382+-0x1477+0xdbe*0x2,-0xdb2*-0x1+-0x188e+0x8b*0x14,-0x1fb4+-0x1b32+-0x1d73*-0x2],[-0x1fdb+0x148e+0x2*0x5a7,-0x12a3*-0x1+-0xf5d+0x2*-0x1a3,-0x1bf*-0x12+0x1*-0x1b05+-0x469],[-0x11e6+-0x8b8+0x1a9f,-0x1*-0x1253+0x6*-0x1f5+-0x694,0x1*-0x25e+-0x101*-0x1b+-0xc5e*0x2]],'O':[[0x15f1+-0x2457+-0x1*-0xe67,-0x117a+0x1*-0x7f0+0x3*0x879],[-0x1*-0xd13+0x1550+-0x2262,0xfda+0x501+-0x14da]],'P':[[-0x1e5*-0x2+-0x1bc6+-0x17*-0x10b,-0x694+-0x177*-0x6+-0x235,-0x556*0x4+0x1e79+0x490*-0x2],[0x314+0x1e2+0x4f5*-0x1,-0x7*-0xf7+0x15*-0xe+0x29*-0x23,0x1bc9+-0x78e+-0x143a],[-0x6*0x5d5+-0x25c5+0x48c4,0x1042+-0x116*-0x6+0x16c5*-0x1,-0x449*-0x7+-0xe3f+-0xfbf],[-0x251e*0x1+0x1*0x1d54+-0x85*-0xf,-0x1*0x18ee+-0x1328+-0x26*-0x129,-0xc65*0x1+0x1df*-0xc+0x1*0x22d9],[0x9*-0x5+-0xbe6*-0x3+-0x4*0x8e1,-0x1*-0x11b+-0x26de+-0x7*-0x565,-0x9d*-0x1d+-0x1*0x1bf7+0x1*0xa2e]],'S':[[0xc0f+-0xec1+-0x5*-0x8a,-0x1028+0x1d9d+-0xd74,0x256f+-0x196a+-0x4*0x301],[-0x1*-0xc9a+-0x14df+-0x846*-0x1,0x271+0xe59+0xe*-0x133,-0x1c73+0xe46+0xe2d],[0x744+-0x2487*-0x1+-0x25*0x12f,-0xc31+0xc79*0x3+-0x1939,0x4*-0x5a7+0x1dc1+-0x725],[0x1de9+-0xad4+-0x1315,0x195d+0x25a7+0x2*-0x1f82,-0x135d*-0x1+0x1ada+0x34d*-0xe],[0x19f7+0x1554+0x1*-0x2f4a,-0xaca*-0x1+0xcc4+-0x178d,0x2*-0x8c3+0x150f*0x1+0x389*-0x1]],'T':[[0x223c+0x174b+-0x3986,0x1c9e+-0x1*-0xc5e+-0x28fb,-0x24df*-0x1+0x1eb*-0x1+-0x22f3],[0x1*-0x212d+0x26e+0x1ebf,0xc83*0x1+-0x1adf+-0x1*-0xe5d,0x5ff+-0x110a+-0x101*-0xb],[-0xb1*0xc+0x34d*0x1+0x4ff,0x10*-0xfd+0xb*0xad+0x25*0x3a,-0xeca+-0x24bc+-0xa*-0x527],[0x3db+-0x137c+0xfa1,-0x606+0x30d*-0x2+0x87*0x17,0x5*0x140+-0x5*0x5d5+0x16e9]],'U':[[-0x23ea+0x1a3d+0x4d7*0x2,-0x2255+0x1*-0x71b+-0x44*-0x9c,0x1*-0x13e8+0x1df3+-0xa0a],[-0x1a6b*0x1+-0x19c7*0x1+0x3433,0x2*-0x12cd+0x59*-0x6f+0x4c31,0x1ba2*0x1+0x1*0x652+-0x21f3*0x1],[-0x17c6+0x142+0x1685*0x1,0x9f*0x6+0x2f*0x56+0x4*-0x4e1,0x2*-0x241+-0x1*0x12dc+-0x1f*-0xc1],[0x1*0x108c+0x1543+-0x25ce*0x1,-0x142c+0x6*-0x35e+0x2861,-0x1*-0x1f0b+-0x33*0x9c+0xa]],'Y':[[0xef*-0x4+0x1b4*0x1+0x209,-0xd*-0x21+-0xd4a*-0x2+-0x1c41,0x1b09+-0x1*-0x33d+-0x1e45],[0x1efd*-0x1+-0x8b*-0x2e+0x604,-0x411+-0x89*-0x22+-0x1*0xe21,-0x90c+0x11d7+0x9*-0xfa],[-0x2*-0x191+0x2018+-0x233a,0x205b+-0x5*0x264+-0x1466,0x1*0x22e0+-0x1dc1+-0x51f],[-0x1bbb+0xa*-0x16d+0x29fd,0x1*-0x1df+-0xec6+0x10a6,0x238e+-0x26ce+0xd0*0x4]],'Z':[[-0x5*-0x526+-0x1c*-0xa3+-0x2b91,0x19a9*-0x1+-0x1700+0x30aa,-0x1*-0x155a+-0x3cb*0x7+0x533],[0x5*-0x116+0x7*-0x38f+0x1e57,-0xafa+-0x12*0x19+0x3*0x43f,-0x2055+0x183a+0x19f*0x5],[-0xedf*0x2+0xb6b+0x1253,-0x3*0x1f3+0x6b1*0x2+0x1*-0x788,-0x2077+0x1d*0x10d+0xf*0x22],[-0x1*0x1125+-0x1079+0x219e,0x709+-0x1044+0x3*0x314,0x1*-0xe59+0x91c+0x53e]]},LETTER_COLOR_INDEX=-0xc*-0x29+0x16*0xd3+-0x140a,LOGO_DATA={'B':[[0x1fc6+-0xce*-0x24+-0x3*0x143f,-0x1*-0x1976+-0x1998+-0x7*-0x5,-0x1*-0x263a+-0x123d+-0x13fd],[-0x5*-0x24b+-0x67*-0xd+0x1*-0x10b1,0x14e2+0x1d7c+0x732*-0x7,-0x60+0x2458+-0x23f7*0x1],[-0x1e36+0x543*-0x1+-0x1de*-0x13,-0xd7b+0x224*0x4+0x4ec,0xe11*0x1+-0x3cf*-0x3+-0x2*0xcbf],[-0x36f*0x2+0x22e5*0x1+0x1a6*-0x11,-0xfd1+0x5*0x655+-0xfd8,-0x24a+0x244a+-0x21ff],[-0x23f3+-0x3*-0x51+0x135*0x1d,0x1*-0x4d2+0x10a3+-0xbd0,0x217b*0x1+-0x1b50+-0x1*0x62b]],'L':[[-0x581+-0x26*0xfd+-0xd4*-0x34,0x1*-0x25e1+-0x1d4+0x27b5,-0x25*0xf1+0xd47*-0x1+0x301c],[-0x1*-0x1d2d+0x112*-0x19+0x3*-0xce,0x43*-0x17+0x42*0x89+-0x1d4d,0x1*0x133+-0x5*-0x766+-0x3*0xcbb],[-0x2334+-0x1*0x1ccf+0x4004,-0xb69+-0x422*0x2+0x1*0x13ad,0x494+0x704*-0x3+0x1078],[-0x205e+-0x71*-0x3e+0x501,0x13b9+-0x3*-0xcbb+-0x39e9,-0x97*-0x32+0x233f*-0x1+0x5c2]],'O':[[0xfbb*-0x2+0x9*-0x38+0x185*0x16,-0x144a+0x30+-0x1*-0x141b,0x296*0x8+0x23bd+-0x386d],[-0x1bc1+0x227a+0x28*-0x2b,0x125d+0xacc+-0x1d29,0x4ad*0x1+0x9*-0x4f+0x1*-0x1e5],[-0x7bb*0x3+-0x221a+0x394c,-0x51c*0x1+-0x7*0x50e+0x287e,0x2220+-0x21dd+-0x42],[0x1a2e+0x1da2+-0x37d0,0xdb2+-0x1e6c+-0x10bb*-0x1,0x14b1+-0x2e1+-0x11d0]],'C':[[-0xf37+-0x3*0x20c+0x155b,-0x20ea+-0x27*-0x8b+0xbbe,0x2*-0xb32+-0xaa1+0x2106],[-0x134+-0x127*-0xe+-0x1*0xeed,0x17*-0x199+-0x22b2*0x1+0x4771,-0x73+0x2259+-0x21e6],[-0x2*0x93f+-0x1dc4+0x1*0x3043,0x1d0c+0x2664+0x34*-0x14c,-0xa62+-0xa0d+0x146f],[-0x23*0x69+0x1eba+-0x105f,0x189*-0xf+-0x3*-0x1d+-0x25*-0x9d,-0x1*0x2b+-0x318*-0x2+0x5*-0x134]],'K':[[-0xee8+-0x1491+-0xef*-0x26,0x20c*0x8+0x26f7+-0x1*0x3757,0x2460+-0x26e9+0x28a],[-0xab0+0x1*-0x24d9+-0x4c1*-0xa,-0x1*0x1462+-0x1049+0x24ac,-0x99b+0x5cb*-0x3+0x1afc],[0x1e61+0x1440+-0x32a0,-0x1afd+0x1139*0x1+-0x9c5*-0x1,0x20d2+-0x4b2*0x2+-0x176e],[-0x22a5+-0x140e*0x1+0x30a*0x12,-0x135d*-0x1+0x1*0x1393+-0x26f0,0x3a*0x2f+0x947+-0x33*0x64]],'G':[[0x2100+-0x236e+0x1*0x26e,0x1764+-0x935*0x1+0x4ba*-0x3,-0x3bf*-0x8+-0xf01*0x1+0x17f*-0xa],[0x244f+-0x901*0x1+-0x1d*0xf1,-0xaac*0x2+-0x1f8c+0x34e4,0x2*0x760+0xdb2*-0x1+-0x10e],[0xd9b+-0x5*0x6a1+0x1*0x138b,0xec3*-0x1+-0x47*0x3f+-0x2*-0x101e,-0xb*0x1f8+-0x226+0x17cf],[0x7e*-0x25+-0x18aa+-0x70*-0x62,-0x75c+0x1771+-0x62*0x2a,0x8f4*-0x1+-0x1ab3+-0x146*-0x1c]],'A':[[0xfb*0x17+0x1f4a+-0x35d7,0x1658*-0x1+-0x188b+0x2ee4,-0x1bde+0x26f6+-0xb18],[0x4b*-0x32+0x862*-0x2+0x15*0x17f,-0x7b*-0x7+0xe6f+0x11*-0x10c,-0x1b*0x96+0x1d5*-0x7+0x1ca6],[0x123f+-0xb28+0x716*-0x1,-0x2d*-0x70+0x51*0x1b+0x1*-0x1c3a,0xf9c+-0x21b3+0x1218],[0x19a1+0x12d0+-0x2c70,0xf*0x17b+0x25df+0xa*-0x602,0x24f8+-0x2*-0xa75+-0xb*0x543]],'M':[[0x51d*0x5+-0x9ad+-0xfe3,0x6*-0x2a7+-0x125f+0x43*0x83,0x3b*-0x3d+-0x12ef*-0x1+-0x4df],[0xe3*0x11+-0x479*0x7+-0x1*-0x103d,0x22fb+0x35e*-0x6+-0x7a*0x1f,0x15a4+-0x1cd3+0x28*0x2e],[-0x181+-0x1*0x1119+0x129b,-0x1*0x17e3+-0x1623+0x1703*0x2,-0x1*-0xa8b+-0x1*0x1bb5+0x112b],[0x2243+0x1*-0x183b+-0xa07,0xd4d+-0x1*0x1bab+-0x1*-0xe5e,-0x3d5+0x1a91+-0xb*0x211]],'E':[[0xc60+-0x1e07+0x11a8*0x1,0xe*0x65+0xfe6+-0x1*0x156b,0x2*0x5e3+-0x26cb+-0x6*-0x481],[0x1601+-0x65*-0x7+-0x3*0x841,-0x1*0x14e8+0x1*-0x5ac+0x1a94,0xf*0x1f2+0x1e9f+0x51*-0xbd],[-0xde+0x2446+-0x3ef*0x9,-0x4*-0x907+0x9*0xfa+-0x2ce5,-0x2185*0x1+0x7*-0x526+-0x458f*-0x1],[0x6d*0x5a+0x1*0x1e89+-0x44da,0x1df5*-0x1+0xbad*0x1+0x1248,0x71d+0x1ab+-0x1*0x8c8],[-0x20*-0x9d+-0x964+-0x369*0x3,-0x336+-0x2c3*0x1+0x5fa,0x4ea+0x1bf5+-0x20de]]},LOGO_TEXT=['B','L','O','C','K','G','A','M','E'];function generateLogoTitle(){const _0x4bcc47=_0x12a679;logoTitle['innerHTML']='';let _0x4a97c7=0xa3*0x1+-0x37*0xf+0x296;const _0x9de952=document[_0x4bcc47(0x1a6)]();LOGO_TEXT[_0x4bcc47(0x20d)]((_0xcf4a0c,_0x204721)=>{const _0x569d24=_0x4bcc47,_0x1fd708=LOGO_DATA[_0xcf4a0c];if(!_0x1fd708)return;const _0x1cc770=_0x1fd708[-0x673*-0x4+0x18b1+0x205*-0x19][_0x569d24(0x25e)];_0x4a97c7+=_0x1cc770;for(let _0x28afcd=-0x149e+0xa7a+0xa24;_0x28afcd<_0x1fd708[_0x569d24(0x25e)];_0x28afcd++){for(let _0x5eafe0=-0xbfe+-0x3*0x544+0x1bca;_0x5eafe0<_0x1fd708[_0x28afcd][_0x569d24(0x25e)];_0x5eafe0++){const _0x3bef88=document['createElement'](_0x569d24(0x1a4));_0x3bef88[_0x569d24(0x237)]=_0x569d24(0x18d);if(_0x1fd708[_0x28afcd][_0x5eafe0]===0xff*0x1b+-0x733+-0x13b1*0x1)_0x3bef88[_0x569d24(0x214)][_0x569d24(0x235)](_0x569d24(0x264));_0x3bef88[_0x569d24(0x221)][_0x569d24(0x17b)]=_0x28afcd+(-0x63*-0x4f+0x1*-0x17fb+0x1*-0x691),_0x3bef88['style'][_0x569d24(0x1ca)]=_0x4a97c7-_0x1cc770+_0x5eafe0+(-0x579+0x1d8*0x8+-0x946),_0x9de952[_0x569d24(0x24c)](_0x3bef88);}}if(_0x204721<LOGO_TEXT[_0x569d24(0x25e)]-(0x52*0x3b+-0x6df*0x1+-0xc06*0x1))_0x4a97c7+=-0xd57+-0xbf3+0x194b;}),logoTitle[_0x4bcc47(0x221)][_0x4bcc47(0x177)]='repeat('+_0x4a97c7+_0x4bcc47(0x217),logoTitle['appendChild'](_0x9de952);}function initStartMenuAnimation(){const _0x1dd87a=_0x12a679;if(bgAnimationInterval)clearInterval(bgAnimationInterval);let _0x9e75c0=[];const _0x134b15=-0x1*-0x727+-0xb3*-0x28+-0x230b;startMenuCanvas[_0x1dd87a(0x1cb)]=startMenuCanvas[_0x1dd87a(0x242)],startMenuCanvas['height']=startMenuCanvas[_0x1dd87a(0x20c)];const _0x400ce1=Math[_0x1dd87a(0x260)](startMenuCanvas[_0x1dd87a(0x1cb)]/_0x134b15),_0x4cc749=Math['ceil'](startMenuCanvas[_0x1dd87a(0x1a7)]/_0x134b15),_0x33ee8d=()=>{const _0x3ca67e=_0x1dd87a;if(_0x9e75c0['length']>-0x23*0xc5+-0x1606*-0x1+-0x1*-0x4ee)return;const _0x558ec6=Math[_0x3ca67e(0x20a)](Math[_0x3ca67e(0x19f)]()*(SHAPES[_0x3ca67e(0x25e)]-(-0x3*-0x16+-0x2f2*-0x5+-0xefb)))+(-0x42e+-0x31c+0x1*0x74b),_0x22c0eb=Math[_0x3ca67e(0x20a)](Math[_0x3ca67e(0x19f)]()*(COLORS[_0x3ca67e(0x25e)]-(-0xe36+0x2*-0x605+0x1a41)))+(-0x1ad5*0x1+-0x1*-0xfbb+0xb1b);_0x9e75c0[_0x3ca67e(0x21d)]({'shape':SHAPES[_0x558ec6],'color':COLORS[_0x22c0eb],'x':Math[_0x3ca67e(0x20a)](Math[_0x3ca67e(0x19f)]()*(_0x400ce1-(-0x1*-0xc43+0x2319*0x1+-0x2f59))),'y':-(-0x1118+0x2437*-0x1+-0x49*-0xbb),'speed':-0x227a+0x1*0x1741+0x1*0xb39+0.02+Math[_0x3ca67e(0x19f)]()*(0x6c0+0x349*0x2+0x1f*-0x6e+0.05)});},_0x1bfc92=()=>{const _0x4bda25=_0x1dd87a;startMenuCtx[_0x4bda25(0x1cc)](0x448+-0x1*-0x1383+-0x17cb,0x1f+0x36*0x95+-0x1f8d,startMenuCanvas['width'],startMenuCanvas[_0x4bda25(0x1a7)]),_0x9e75c0[_0x4bda25(0x20d)]((_0x46b36b,_0x6853fb)=>{const _0x3bef94=_0x4bda25;_0x46b36b['y']+=_0x46b36b[_0x3bef94(0x1b3)],_0x46b36b[_0x3bef94(0x192)][_0x3bef94(0x20d)]((_0x362a43,_0xef6450)=>_0x362a43[_0x3bef94(0x20d)]((_0x52cd94,_0x35a128)=>{_0x52cd94>0xb*-0x37c+0x15d*-0x13+0x105*0x3f&&(startMenuCtx['fillStyle']=_0x46b36b['color'],startMenuCtx['fillRect']((_0x46b36b['x']+_0x35a128)*_0x134b15,(_0x46b36b['y']+_0xef6450)*_0x134b15,_0x134b15,_0x134b15));}));if(_0x46b36b['y']*_0x134b15>startMenuCanvas['height'])_0x9e75c0[_0x3bef94(0x1b8)](_0x6853fb,-0xa4c+0x1*-0x4c5+0x6*0x283);});if(Math['random']()<0x24d*0xe+0x914*0x1+-0x294a+0.05)_0x33ee8d();};_0x33ee8d(),bgAnimationInterval=setInterval(_0x1bfc92,-0x1651*0x1+-0x14dd+0x19a*0x1b);}function playSound(_0xe0282c){const _0x259228=_0x12a679;if(!isMusicEnabled||!isGameStarted)return;const _0x3f6b78=SOUNDS['sfx'][currentZone]&&SOUNDS[_0x259228(0x1a9)][currentZone][_0xe0282c]||SOUNDS['sfx']['NORMAL'][_0xe0282c];if(_0x3f6b78){const _0x4ccde2=sfxChannels[currentSfxChannel];_0x4ccde2[_0x259228(0x1a0)]=_0x3f6b78,_0x4ccde2['volume']=sfxVolume,_0x4ccde2[_0x259228(0x200)]()['catch'](_0x2a59a6=>console[_0x259228(0x21f)](_0x259228(0x238)+_0xe0282c+_0x259228(0x1b9)+_0x3f6b78)),currentSfxChannel=(currentSfxChannel+(-0x81d*0x1+-0x2*0x768+-0x496*-0x5))%NUM_SFX_CHANNELS;}}function switchMusic(_0xd3b356){const _0x5d7a65=_0x12a679,_0x5078e6=_0xd3b356||_0x5d7a65(0x24a),_0x14c248=audioElements[_0x5078e6];if(currentMusic===_0x14c248&&!_0x14c248[_0x5d7a65(0x243)])return;Object[_0x5d7a65(0x1bb)](audioElements)[_0x5d7a65(0x20d)](_0x2e21d8=>{_0x2e21d8!==_0x14c248&&(_0x2e21d8['pause'](),_0x2e21d8['currentTime']=-0x20a7+-0x1fa5+0x404c);}),currentMusic=_0x14c248,currentMusic&&(currentMusic[_0x5d7a65(0x259)]=musicVolume,currentMusic[_0x5d7a65(0x263)]=-0xa64+-0xc5*0x13+0x1*0x1903,isMusicEnabled&&currentMusic[_0x5d7a65(0x200)]()['catch'](_0x422ea3=>console['warn'](_0x5d7a65(0x245)+_0x5078e6)));}function shadeColor(_0x37d628,_0x4655e8){const _0x36956b=_0x12a679;let _0x12a585=parseInt(_0x37d628[_0x36956b(0x20e)](-0x649*0x1+0x9*0xb6+-0x1c,-0xbb7+0x1e21+-0x1267),0x1b95+-0xa25*-0x2+0x1*-0x2fcf),_0x454689=parseInt(_0x37d628[_0x36956b(0x20e)](-0x219b+0x4*0x5fc+0x19d*0x6,-0x5*-0x1dd+-0x1c6d+0x1321),0x1*0x1a8+0x145*0x1e+-0x27ae),_0x461a90=parseInt(_0x37d628['substring'](0x13f8+0xca0+-0x1*0x2093,-0x112c+-0x2263*-0x1+-0x1130),-0xd23+0x256a*0x1+0x1837*-0x1);_0x12a585=parseInt(_0x12a585*(0xdf8+-0x1*0x232f+-0x1*-0x159b+_0x4655e8)/(0xb*-0x283+-0x1db3*0x1+-0x4*-0xe6e)),_0x454689=parseInt(_0x454689*(-0x10a4+-0x15fc+0x2704+_0x4655e8)/(-0x79b+-0x8d1+0x10d0*0x1)),_0x461a90=parseInt(_0x461a90*(0x6d*-0x1+-0x90e*-0x1+-0x83d+_0x4655e8)/(0x1556+-0x16a6+0x1b4)),_0x12a585=_0x12a585<0x18c5+-0x1*0x2462+0xc*0x10d?_0x12a585:-0x1*-0x159b+-0x5ea*-0x4+-0x1*0x2c44,_0x454689=_0x454689<-0x3*-0x4a7+-0x22b5*-0x1+-0x2fab*0x1?_0x454689:-0x5*-0x4a3+-0x1*0x74f+0x1*-0xee1,_0x461a90=_0x461a90<0x1cd9+-0x9d*0x37+0x5e1?_0x461a90:0x745*-0x2+-0x1cbc*-0x1+-0xd33;const _0x2e1229=_0x12a585['toString'](-0x1a69*0x1+-0x1d53+0x2*0x1be6)[_0x36956b(0x25e)]==0x1fc*-0x11+-0x19e1*0x1+0x3b9e?'0'+_0x12a585[_0x36956b(0x1a8)](0x200a*0x1+0x1ff6+-0x3ff0):_0x12a585[_0x36956b(0x1a8)](-0x1*-0x1648+0xc1d+0x2f*-0xbb),_0xc9fd5e=_0x454689[_0x36956b(0x1a8)](0x70c+-0x2*0x274+-0x214)[_0x36956b(0x25e)]==-0x1c0d+-0x1ee*0x4+0x1*0x23c6?'0'+_0x454689[_0x36956b(0x1a8)](-0x1*0xd99+0x20c*-0xa+-0x2221*-0x1):_0x454689[_0x36956b(0x1a8)](0x184c+-0x1af*-0x14+-0x39e8),_0x16fec2=_0x461a90[_0x36956b(0x1a8)](-0x829*0x1+0x25b4+-0x1d7b)[_0x36956b(0x25e)]==0x26c1+0x435*0x1+-0x623*0x7?'0'+_0x461a90[_0x36956b(0x1a8)](0x162+-0x66*0x2a+0xf6a):_0x461a90[_0x36956b(0x1a8)](0x2*0x1271+0x1*0x25f+0x1*-0x2731);return'#'+_0x2e1229+_0xc9fd5e+_0x16fec2;}function drawBlock(_0x2fd089,_0x38dc1e,_0x5b972e){const _0x3d88e7=_0x12a679,_0x405306=shadeColor(_0x5b972e,-0x1713+-0x24*-0x35+-0x33*-0x4f),_0x2ebb3e=shadeColor(_0x5b972e,-(0x4e5*-0x1+-0x5+0x512)),_0x17811a=Math[_0x3d88e7(0x18c)](-0x1*-0x23f2+-0x5bf*-0x2+0x1*-0x2f6f,Math[_0x3d88e7(0x20a)](BLOCK_SIZE/(-0x57a*0x4+0x1573+0x7d))),_0x3d601a=_0x2fd089*BLOCK_SIZE,_0x17eab1=_0x38dc1e*BLOCK_SIZE;ctx[_0x3d88e7(0x213)]=_0x5b972e,ctx['fillRect'](_0x3d601a,_0x17eab1,BLOCK_SIZE,BLOCK_SIZE),ctx[_0x3d88e7(0x213)]=_0x405306,ctx[_0x3d88e7(0x234)](_0x3d601a,_0x17eab1,BLOCK_SIZE,_0x17811a),ctx[_0x3d88e7(0x234)](_0x3d601a,_0x17eab1,_0x17811a,BLOCK_SIZE),ctx[_0x3d88e7(0x213)]=_0x2ebb3e,ctx[_0x3d88e7(0x234)](_0x3d601a+_0x17811a,_0x17eab1+BLOCK_SIZE-_0x17811a,BLOCK_SIZE-_0x17811a,_0x17811a),ctx['fillRect'](_0x3d601a+BLOCK_SIZE-_0x17811a,_0x17eab1,_0x17811a,BLOCK_SIZE-_0x17811a);}class Piece{constructor(_0x4d0f91,_0x1f4241){const _0x5661b5=_0x12a679;this[_0x5661b5(0x192)]=_0x4d0f91,this[_0x5661b5(0x1f0)]=_0x1f4241,this['x']=-0x15ae+-0x1637+0x11*0x295,this['y']=0x123e+0x13a6+-0x25e4,this['gravityDirection']=_0x5661b5(0x21e);}['draw'](_0x5744c2=![]){const _0x5ac3e2=_0x12a679;if(_0x5744c2){ctx['fillStyle']=_0x5ac3e2(0x17f),this['shape']['forEach']((_0x2d3d2c,_0x59acea)=>_0x2d3d2c[_0x5ac3e2(0x20d)]((_0x553595,_0xeaf452)=>{_0x553595>-0x372+-0x178*-0xe+-0x111e&&ctx['fillRect']((this['x']+_0xeaf452)*BLOCK_SIZE,(this['y']+_0x59acea)*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);}));return;}this[_0x5ac3e2(0x192)][_0x5ac3e2(0x20d)]((_0x541a73,_0x4a7d35)=>{const _0x594ab1=_0x5ac3e2;_0x541a73[_0x594ab1(0x20d)]((_0x222f8a,_0x31f083)=>{const _0x5495ae=_0x594ab1;if(_0x222f8a>-0x1c5a*-0x1+-0x25af+0x955*0x1){let _0x17e7bf;switch(currentZone){case'NINJA':ctx['fillStyle']=_0x5495ae(0x1c8),ctx[_0x5495ae(0x234)]((this['x']+_0x31f083)*BLOCK_SIZE,(this['y']+_0x4a7d35)*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);return;case _0x5495ae(0x211):_0x17e7bf=RED_COLORS[this[_0x5495ae(0x1f0)]];break;case'RAINBOW':_0x17e7bf=COLORS[Math['floor'](Math[_0x5495ae(0x19f)]()*(COLORS['length']-(0x195c+-0x33*0x47+-0xb36)))+(-0x20a+-0x23d*0x3+0x8c2)];break;default:_0x17e7bf=COLORS[this['colorIndex']];break;}drawBlock(this['x']+_0x31f083,this['y']+_0x4a7d35,_0x17e7bf);}});});}[_0x12a679(0x1b7)](_0x352a18,_0x2e75be){this['x']+=_0x352a18,this['y']+=_0x2e75be;}['rotate'](){const _0x320dfa=_0x12a679,_0x4fe059=this[_0x320dfa(0x192)][-0x14e4+-0xc49+-0x1bf*-0x13][_0x320dfa(0x1c3)]((_0xa50e78,_0x2eb7ae)=>this[_0x320dfa(0x192)]['map'](_0x163e1e=>_0x163e1e[_0x2eb7ae]))[_0x320dfa(0x1ce)](),_0x50e6c2=this[_0x320dfa(0x192)],_0xcbcbe5=this['x'],_0x56ebcc=this['y'];this[_0x320dfa(0x192)]=_0x4fe059;let _0x48d249=-0x1c7+-0x91a+0x18e*0x7;while(this['collides']()){if(this[_0x320dfa(0x1c0)]==='DOWN'){this['x']+=_0x48d249,_0x48d249=-(_0x48d249+(_0x48d249>-0x1970+-0x198e+-0x2*-0x197f?0x749+-0x1e7*-0x2+-0xb16:-(0x1e47*-0x1+-0x1167+0x2faf)));if(Math['abs'](_0x48d249)>this[_0x320dfa(0x192)][-0x1461*-0x1+0x230c+0x1*-0x376d][_0x320dfa(0x25e)]+(0x1d4f*0x1+-0xda9*0x2+-0x7f*0x4)){this[_0x320dfa(0x192)]=_0x50e6c2,this['x']=_0xcbcbe5,this['y']=_0x56ebcc;return;}}else{this['y']+=_0x48d249,_0x48d249=-(_0x48d249+(_0x48d249>-0x22a5*0x1+0xf35+0x1370?0x1731+-0xf37+-0x7f9*0x1:-(0xe51+-0x2*-0xe5c+-0x561*0x8)));if(Math['abs'](_0x48d249)>this[_0x320dfa(0x192)]['length']+(-0x3c1*-0x7+-0x1103+0x1*-0x943)){this[_0x320dfa(0x192)]=_0x50e6c2,this['x']=_0xcbcbe5,this['y']=_0x56ebcc;return;}}}playSound(_0x320dfa(0x1ff)),checkWhiteBlockCollision();}[_0x12a679(0x218)](){const _0x132e56=_0x12a679;for(let _0x3ae827=-0x2*-0x47f+0x2*-0x4e4+0xca;_0x3ae827<this[_0x132e56(0x192)][_0x132e56(0x25e)];_0x3ae827++){for(let _0x11f41e=-0x1b67+-0x209d+0x3c04;_0x11f41e<this[_0x132e56(0x192)][_0x3ae827][_0x132e56(0x25e)];_0x11f41e++){if(this[_0x132e56(0x192)][_0x3ae827][_0x11f41e]>-0x26e4+0x465+-0x1*-0x227f){let _0x459200=this['x']+_0x11f41e,_0x30bbdd=this['y']+_0x3ae827;if(_0x459200<-0x1eec+0x230a+0x41e*-0x1||_0x459200>=COLS||_0x30bbdd>=ROWS||board[_0x30bbdd]&&board[_0x30bbdd][_0x459200]>0x183c+-0x1233*-0x2+-0x3ca2)return!![];}}}return![];}}function saveState(){const _0x1897b0=_0x12a679;if(isGameOver||!currentPiece||isEvilMode)return;const _0xd63aa5={'board':board,'currentPiece':{'shape':currentPiece[_0x1897b0(0x192)],'colorIndex':currentPiece[_0x1897b0(0x1f0)],'x':currentPiece['x'],'y':currentPiece['y'],'gravityDirection':currentPiece[_0x1897b0(0x1c0)]},'score':score,'currentZone':currentZone,'COLS':COLS,'ROWS':ROWS,'whiteBlockSpawnChance':whiteBlockSpawnChance,'forcedPieceState':forcedPieceState,'isSafePeriodActive':isSafePeriodActive,'safePeriodStartTime':safePeriodStartTime,'zoneStartScore':zoneStartScore};localStorage['setItem'](_0x1897b0(0x1af),JSON['stringify'](_0xd63aa5));}function loadState(){const _0x54f08f=_0x12a679;if(isEvilMode)return![];const _0x3b8705=localStorage[_0x54f08f(0x1d1)](_0x54f08f(0x1af));if(!_0x3b8705)return![];const _0x2155f9=JSON[_0x54f08f(0x239)](_0x3b8705);if(_0x2155f9[_0x54f08f(0x179)]===undefined)return![];const _0x40b6bc=Math[_0x54f08f(0x20a)]((document['documentElement'][_0x54f08f(0x242)]-(-0x4*0x2a3+0xff3+-0x563))/BLOCK_SIZE),_0x232d05=Math[_0x54f08f(0x20a)]((document['documentElement'][_0x54f08f(0x20c)]-(0xb9*0x13+0x1467+0x110f*-0x2))/BLOCK_SIZE),_0x50c1e2=_0x2155f9[_0x54f08f(0x19a)],_0x31e381=_0x2155f9['ROWS'],_0x1f05d5=Array['from']({'length':_0x232d05},()=>Array(_0x40b6bc)[_0x54f08f(0x1e1)](-0x2a5*0x1+0xa05+0xec*-0x8));for(let _0x20258c=-0x24*0x45+-0x1a3*-0xb+-0x84d;_0x20258c<Math[_0x54f08f(0x1f7)](_0x232d05,_0x31e381);_0x20258c++){for(let _0x14cb1b=-0x14eb+0x4e*-0x61+0x3279;_0x14cb1b<Math['min'](_0x40b6bc,_0x50c1e2);_0x14cb1b++){const _0x15fa4e=_0x20258c+(_0x31e381-_0x232d05>0x47c*0x3+-0x1b4b+0xdd7?_0x31e381-_0x232d05:0x2*-0x52+-0x25*0x45+-0x8f*-0x13);_0x2155f9['board'][_0x15fa4e]&&(_0x1f05d5[_0x20258c][_0x14cb1b]=_0x2155f9[_0x54f08f(0x261)][_0x15fa4e][_0x14cb1b]||-0xa*0xc2+0xd45*0x1+-0x5b1);}}board=_0x1f05d5,COLS=_0x40b6bc,ROWS=_0x232d05,score=_0x2155f9[_0x54f08f(0x216)],currentZone=_0x2155f9[_0x54f08f(0x209)],whiteBlockSpawnChance=_0x2155f9[_0x54f08f(0x224)]||0x2414+0x228e+-0x2*0x2351+0.07,forcedPieceState=_0x2155f9[_0x54f08f(0x220)]||{'type':null,'count':0x0},isSafePeriodActive=_0x2155f9[_0x54f08f(0x201)],safePeriodStartTime=_0x2155f9[_0x54f08f(0x179)],zoneStartScore=_0x2155f9[_0x54f08f(0x1f6)];const _0x5237e4=_0x2155f9[_0x54f08f(0x19d)];currentPiece=new Piece(_0x5237e4['shape'],_0x5237e4['colorIndex']),currentPiece['y']=_0x5237e4['y']-(_0x31e381>_0x232d05?_0x31e381-_0x232d05:0x18d8+0xfd6+-0x7f*0x52),currentPiece['x']=_0x5237e4['x'],currentPiece[_0x54f08f(0x1c0)]=_0x2155f9[_0x54f08f(0x19d)][_0x54f08f(0x1c0)]||_0x54f08f(0x21e);currentPiece['x']+currentPiece['shape'][0x20c2+-0x179*-0x1+-0x17d*0x17][_0x54f08f(0x25e)]>_0x40b6bc&&(currentPiece['x']=_0x40b6bc-currentPiece[_0x54f08f(0x192)][0x269b*-0x1+-0x6*-0x2a6+0x16b7][_0x54f08f(0x25e)]);currentPiece['x']=Math['max'](-0x1bcb+-0x3d*0x13+0x2052,currentPiece['x']);while(currentPiece[_0x54f08f(0x218)]()){currentPiece['y']--;if(currentPiece['y']<-(0x2*-0x455+-0x5cf*0x2+0x144d)){currentPiece=null;break;}}if(!currentPiece)spawnNewPiece();return!![];}function clearSaveState(){const _0x1a65c=_0x12a679;localStorage[_0x1a65c(0x176)](_0x1a65c(0x1af));}function startGame(){const _0x403baa=_0x12a679;bgAnimationInterval&&(clearInterval(bgAnimationInterval),bgAnimationInterval=null);isGameStarted=!![],startScreen[_0x403baa(0x214)][_0x403baa(0x1e9)](_0x403baa(0x195)),soundtrackCredit[_0x403baa(0x221)]['opacity']='0',soundtrackCredit[_0x403baa(0x221)]['pointerEvents']=_0x403baa(0x1df),isGameOver=![],pauseGame(!![]),clearInterval(gameOverAnimationInterval),clearTimeout(iceSlipTimeout),stopFlashTimer(),isZoneForced=![],forcedNextPieceIndex=-0x8a4+-0x1421+0x1cc5*0x1,zoneSelect[_0x403baa(0x1e5)]=_0x403baa(0x23c),pieceSelect[_0x403baa(0x1e5)]=0x18c4+-0x1*0x20d2+0x80e,whiteBlock={'x':null,'y':null},forcedPieceState={'type':null,'count':0x0},whiteBlockSpawnChance=-0xb32*0x3+-0x1919*0x1+0x3aaf+0.07,isMobile=window[_0x403baa(0x246)]<-0x141d+0x95f*-0x3+-0x1*-0x333a;const _0x44d651=isMobile?MOBILE_COLS_DIVISOR:DESKTOP_COLS_DIVISOR,_0x170338=isMobile?MOBILE_ROWS_DIVISOR:DESKTOP_ROWS_DIVISOR;BLOCK_SIZE=Math[_0x403baa(0x18c)](0x1*-0xa51+0x9*-0x66+0x2*0x6f4,Math[_0x403baa(0x1f7)](Math['floor'](window[_0x403baa(0x246)]/_0x44d651),Math[_0x403baa(0x20a)](window[_0x403baa(0x1ed)]/_0x170338)));if(!isEvilMode&&loadState()){}else{if(isEvilMode)clearSaveState();COLS=Math[_0x403baa(0x20a)]((document[_0x403baa(0x1e3)][_0x403baa(0x242)]-(0x2123+0x1ed2+-0x3ff1))/BLOCK_SIZE),ROWS=Math[_0x403baa(0x20a)]((document['documentElement'][_0x403baa(0x20c)]-(0x1*0x2485+-0x16*-0x96+-0x9e1*0x5))/BLOCK_SIZE),board=Array['from']({'length':ROWS},()=>Array(COLS)[_0x403baa(0x1e1)](-0x151*-0x2+-0x1bd0+-0xb*-0x24a)),score=0x1*0x1519+-0xfd*-0x27+-0x3ba4,currentZone=_0x403baa(0x24a),isSafePeriodActive=!![],safePeriodStartTime=Date[_0x403baa(0x18a)](),zoneStartScore=0x114b+0x446*-0x2+0x8bf*-0x1,spawnNewPiece();}gameOverScreen[_0x403baa(0x214)]['remove'](_0x403baa(0x195));let _0x4641a0;switch(currentZone){case _0x403baa(0x211):_0x4641a0=RED_ZONE_SPEED;break;default:_0x4641a0=INITIAL_SPEED;break;}gameSpeed=_0x4641a0,switchMusic(currentZone),canvas[_0x403baa(0x1cb)]=COLS*BLOCK_SIZE,canvas[_0x403baa(0x1a7)]=ROWS*BLOCK_SIZE,pauseGame(![]),updateProgressBarUI(),draw();}function setup(){const _0xa3042d=_0x12a679;generateLogoTitle();for(let _0x199996=0x2117+0xb7b+-0xa*0x475;_0x199996<NUM_SFX_CHANNELS;_0x199996++){sfxChannels[_0xa3042d(0x21d)](new Audio());}setupOptionCheckboxes(),setupVolumeSliders(),document[_0xa3042d(0x257)](_0xa3042d(0x223))[_0xa3042d(0x20d)](_0x7ca72d=>{const _0x55b536=_0xa3042d;_0x7ca72d[_0x55b536(0x20f)]('click',()=>{const _0x251f41=_0x55b536;if(isMusicEnabled){const _0x5b083c=new Audio(SOUNDS[_0x251f41(0x1a9)][_0x251f41(0x24a)][_0x251f41(0x170)]);_0x5b083c['volume']=sfxVolume,_0x5b083c[_0x251f41(0x200)]()[_0x251f41(0x16b)](_0x4a62e3=>{});}});}),startButton[_0xa3042d(0x20f)]('click',startGame),restartButton[_0xa3042d(0x20f)](_0xa3042d(0x170),()=>{clearSaveState(),startGame();});let _0x2ad4ce;window[_0xa3042d(0x20f)](_0xa3042d(0x1eb),()=>{clearTimeout(_0x2ad4ce),_0x2ad4ce=setTimeout(()=>{if(isGameStarted&&!isGameOver)saveState(),startGame();else!isGameStarted&&initStartMenuAnimation();},-0x22ee+-0x920+0x2d08);}),window[_0xa3042d(0x20f)]('beforeunload',saveState),document[_0xa3042d(0x20f)](_0xa3042d(0x19b),_0x1dfb47=>{const _0x49b2c1=_0xa3042d;if(_0x1dfb47[_0x49b2c1(0x1bc)]===_0x49b2c1(0x230)){_0x1dfb47['preventDefault'](),requestGodMode();return;}if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x1dfb47[_0x49b2c1(0x1f4)]();switch(_0x1dfb47[_0x49b2c1(0x1bc)]){case _0x49b2c1(0x1d5):case _0x49b2c1(0x169):handlePlayerMove(-(-0x7*0x247+0x3b9*-0x8+0x2dba));break;case _0x49b2c1(0x227):case _0x49b2c1(0x1e7):handlePlayerMove(0x24c7+0x147*-0x1+-0x237f);break;case'ArrowDown':case'KeyS':softDrop();break;case _0x49b2c1(0x175):case _0x49b2c1(0x1d6):currentPiece['rotate'](),draw();break;case _0x49b2c1(0x167):isGhostEnabled?softDrop():hardDrop();break;}});let _0x24117c=0x2ab*0x3+-0x181d+0x407*0x4,_0xcad1a=0x1*-0xfd+-0xda0+0x3*0x4df,_0x1c272b=0x134e+-0x1057+-0x2f7,_0xd28aac=-0x6be+0x72c+0x16*-0x5;canvas['addEventListener'](_0xa3042d(0x23b),_0x5c4050=>{const _0xca7ecb=_0xa3042d;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x5c4050[_0xca7ecb(0x1f4)](),_0x24117c=_0x5c4050['changedTouches'][-0x1c0c+0x2c1+0x194b][_0xca7ecb(0x23d)],_0xcad1a=_0x5c4050[_0xca7ecb(0x1aa)][-0x3*0xa5c+0x251e+-0x305*0x2][_0xca7ecb(0x16d)],_0x1c272b=currentPiece['x'],_0xd28aac=currentPiece['y'],clearTimeout(iceSlipTimeout);},{'passive':![]}),canvas['addEventListener'](_0xa3042d(0x1d8),_0x5c88ef=>{const _0x59c0e7=_0xa3042d;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x5c88ef[_0x59c0e7(0x1f4)]();let _0x50cc9d=_0x5c88ef[_0x59c0e7(0x1aa)][0x2*0xe26+0x1*0x22ed+-0x3f39][_0x59c0e7(0x23d)]-_0x24117c,_0x17ed91=_0x5c88ef['changedTouches'][-0x10ff+-0xa70+0x1b6f][_0x59c0e7(0x16d)]-_0xcad1a;const _0x488554=currentPiece['x'],_0x425427=currentPiece['y'];currentPiece['gravityDirection']===_0x59c0e7(0x21e)?currentPiece['x']=_0x1c272b+Math[_0x59c0e7(0x25b)](_0x50cc9d/BLOCK_SIZE):currentPiece['y']=_0xd28aac+Math[_0x59c0e7(0x25b)](_0x17ed91/BLOCK_SIZE),currentPiece[_0x59c0e7(0x218)]()&&(currentPiece['x']=_0x488554,currentPiece['y']=_0x425427),checkWhiteBlockCollision(),draw();},{'passive':![]}),canvas['addEventListener']('touchend',_0x14464f=>{const _0x3fdf24=_0xa3042d;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x14464f[_0x3fdf24(0x1f4)]();let _0x11cd8d=_0x14464f[_0x3fdf24(0x1aa)][-0xcdb*0x2+0x6d0*0x1+0x52*0x3b][_0x3fdf24(0x23d)]-_0x24117c,_0x13202f=_0x14464f[_0x3fdf24(0x1aa)][-0x1f26+-0xf6*0x27+0x44a0][_0x3fdf24(0x16d)]-_0xcad1a;const _0x246908=-0x1*-0x71b+-0xbd6+0x26a*0x2,_0x437da6=-0x1272+-0x1*0x1ce5+0x2f7f,_0xfe654d=0xdec+-0x228a*-0x1+-0x2ffe;if(Math[_0x3fdf24(0x23f)](_0x11cd8d)<_0x246908&&Math[_0x3fdf24(0x23f)](_0x13202f)<_0x246908){currentPiece[_0x3fdf24(0x1ff)](),draw();return;}let _0x342bc9=![],_0x4354f8=0x773*-0x3+0x377+0x12e2;switch(currentPiece['gravityDirection']){case _0x3fdf24(0x21e):_0x13202f>Math[_0x3fdf24(0x23f)](_0x11cd8d)&&_0x13202f>_0x437da6&&(_0x342bc9=!![],_0x4354f8=_0x13202f);break;case _0x3fdf24(0x1c9):-_0x11cd8d>Math['abs'](_0x13202f)&&-_0x11cd8d>_0x437da6&&(_0x342bc9=!![],_0x4354f8=-_0x11cd8d);break;case _0x3fdf24(0x1a2):_0x11cd8d>Math[_0x3fdf24(0x23f)](_0x13202f)&&_0x11cd8d>_0x437da6&&(_0x342bc9=!![],_0x4354f8=_0x11cd8d);break;}if(_0x342bc9){if(!isGhostEnabled&&_0x4354f8>_0xfe654d)hardDrop();else softDrop();}}),submitPasswordButton[_0xa3042d(0x20f)](_0xa3042d(0x170),handlePasswordSubmit),passwordInput[_0xa3042d(0x20f)](_0xa3042d(0x19b),_0x77b575=>{const _0x3f668e=_0xa3042d;_0x77b575[_0x3f668e(0x1ae)]===_0x3f668e(0x1de)&&(_0x77b575[_0x3f668e(0x1f4)](),handlePasswordSubmit());if(_0x77b575[_0x3f668e(0x1ae)]===_0x3f668e(0x240))cancelPasswordPrompt();}),cancelPasswordButton[_0xa3042d(0x20f)](_0xa3042d(0x170),cancelPasswordPrompt),closeTesterMenu[_0xa3042d(0x20f)](_0xa3042d(0x170),requestGodMode),setScoreButton[_0xa3042d(0x20f)](_0xa3042d(0x170),()=>{const _0x1eea06=_0xa3042d;score=parseInt(scoreInput[_0x1eea06(0x1e5)])||-0x101d+-0x1d94+0x2db1,updateProgressBarUI(),draw();}),levelUpButton[_0xa3042d(0x20f)](_0xa3042d(0x170),()=>{const _0x2aa982=_0xa3042d;score+=0x63c+-0x2*0xb48+0x143c,scoreInput[_0x2aa982(0x1e5)]=Math[_0x2aa982(0x20a)](score),updateProgressBarUI(),draw();}),endSafePeriodButton[_0xa3042d(0x20f)]('click',()=>{const _0x30ad59=_0xa3042d;if(!isGameStarted)return;isSafePeriodActive=![],safePeriodStartTime=Date[_0x30ad59(0x18a)]()-SAFE_PERIOD_DURATION,updateProgressBarUI();}),startSafePeriodButton[_0xa3042d(0x20f)]('click',()=>{const _0x41bc95=_0xa3042d;if(!isGameStarted)return;isSafePeriodActive=!![],safePeriodStartTime=Date['now'](),currentZone=_0x41bc95(0x24a),switchMusic(_0x41bc95(0x24a)),updateProgressBarUI();}),completeZoneButton[_0xa3042d(0x20f)](_0xa3042d(0x170),()=>{const _0x87150c=_0xa3042d;if(!isGameStarted||currentZone===_0x87150c(0x24a))return;score=zoneStartScore+ZONE_PROGRESS_REQUIREMENT,updateProgressBarUI();}),zoneSelect['addEventListener'](_0xa3042d(0x210),()=>{const _0x68f89c=_0xa3042d,_0x5dcd83=zoneSelect[_0x68f89c(0x1e5)];stopFlashTimer();if(_0x5dcd83===_0x68f89c(0x23c))isZoneForced=![],isSafePeriodActive=!![],safePeriodStartTime=Date[_0x68f89c(0x18a)](),currentZone=_0x68f89c(0x24a),switchMusic('NORMAL');else{isZoneForced=!![],currentZone=_0x5dcd83;if(currentZone===_0x68f89c(0x1f9))startFlashTimer();switchMusic(currentZone);}updateProgressBarUI(),draw();}),pieceSelect[_0xa3042d(0x20f)](_0xa3042d(0x210),()=>{const _0x355c23=_0xa3042d;forcedNextPieceIndex=parseInt(pieceSelect[_0x355c23(0x1e5)]);}),clearBoardButton[_0xa3042d(0x20f)]('click',()=>{const _0x4d0de8=_0xa3042d;board=Array[_0x4d0de8(0x1dd)]({'length':ROWS},()=>Array(COLS)['fill'](-0xc7*-0x1f+-0x5*0x611+0x72*0xe)),draw();}),testerGhostCheckbox[_0xa3042d(0x20f)]('change',()=>{const _0x521103=_0xa3042d;isGhostEnabled=testerGhostCheckbox[_0x521103(0x17c)],document['querySelectorAll'](_0x521103(0x1b5))[_0x521103(0x20d)](_0xfc1494=>_0xfc1494[_0x521103(0x17c)]=isGhostEnabled),localStorage[_0x521103(0x182)]('tetrisGhostEnabled',isGhostEnabled),draw();}),testerGridCheckbox[_0xa3042d(0x20f)](_0xa3042d(0x210),()=>{const _0x3640b9=_0xa3042d;isGridEnabled=testerGridCheckbox[_0x3640b9(0x17c)],document['querySelectorAll']('[data-option=\x22grid\x22]')['forEach'](_0x165a63=>_0x165a63[_0x3640b9(0x17c)]=isGridEnabled),localStorage[_0x3640b9(0x182)](_0x3640b9(0x215),isGridEnabled),draw();}),testerMusicCheckbox[_0xa3042d(0x20f)]('change',()=>{const _0x35d728=_0xa3042d;isMusicEnabled=testerMusicCheckbox[_0x35d728(0x17c)],document[_0x35d728(0x257)]('[data-option=\x22music\x22]')[_0x35d728(0x20d)](_0xaf8402=>_0xaf8402[_0x35d728(0x17c)]=isMusicEnabled),localStorage[_0x35d728(0x182)](_0x35d728(0x1e8),isMusicEnabled),toggleMusic();}),testerEvilCheckbox[_0xa3042d(0x20f)](_0xa3042d(0x210),()=>{const _0x29daf0=_0xa3042d;isEvilMode=testerEvilCheckbox[_0x29daf0(0x17c)],document[_0x29daf0(0x257)](_0x29daf0(0x241))[_0x29daf0(0x20d)](_0x5907ad=>_0x5907ad[_0x29daf0(0x17c)]=isEvilMode),localStorage['setItem'](_0x29daf0(0x16c),isEvilMode);}),startHiScoreEl[_0xa3042d(0x232)]=Math[_0xa3042d(0x20a)](hiScore),startScreen[_0xa3042d(0x214)]['add'](_0xa3042d(0x195)),setTimeout(initStartMenuAnimation,0x1a8*0x4+-0x1f5+-0x479);}function pauseGame(_0x4fe316){if(isGamePaused===_0x4fe316)return;isGamePaused=_0x4fe316,clearInterval(gameLoopInterval),gameLoopInterval=null,!isGamePaused&&!isGameOver&&(gameLoopInterval=setInterval(update,gameSpeed));}function setGameSpeed(_0x1ec5d0){if(!_0x1ec5d0||_0x1ec5d0<=0x7ce+-0xe2c+0x2*0x32f)return;gameSpeed!==_0x1ec5d0&&(gameSpeed=_0x1ec5d0,!isGamePaused&&!isGameOver&&(clearInterval(gameLoopInterval),gameLoopInterval=setInterval(update,gameSpeed)));}function toggleMusic(){const _0x29b45a=_0x12a679,_0x3cea0b=document[_0x29b45a(0x257)](_0x29b45a(0x22f));if(isMusicEnabled){if(currentMusic)currentMusic[_0x29b45a(0x200)]()[_0x29b45a(0x16b)](_0x2253f0=>{});_0x3cea0b['forEach'](_0xa3eff8=>_0xa3eff8[_0x29b45a(0x214)][_0x29b45a(0x1e9)](_0x29b45a(0x16a)));}else Object[_0x29b45a(0x1bb)](audioElements)[_0x29b45a(0x20d)](_0x3939c6=>_0x3939c6[_0x29b45a(0x212)]()),_0x3cea0b[_0x29b45a(0x20d)](_0x5c2785=>_0x5c2785[_0x29b45a(0x214)]['add'](_0x29b45a(0x16a)));}function setupOptionCheckboxes(){const _0xbbfcea=_0x12a679,_0x27d2a2=document[_0xbbfcea(0x257)](_0xbbfcea(0x197));_0x27d2a2[_0xbbfcea(0x20d)](_0x5a1525=>{const _0x5ef8c4=_0xbbfcea,_0x5c8f01=_0x5a1525[_0x5ef8c4(0x1fa)][_0x5ef8c4(0x18e)],_0x335456=_0x5ef8c4(0x1ee)+(_0x5c8f01[_0x5ef8c4(0x193)](0x1a98+-0x2176+0x6*0x125)['toUpperCase']()+_0x5c8f01[_0x5ef8c4(0x229)](0x21e+-0x5*0x59e+0x19f9))+_0x5ef8c4(0x168),_0x4f01f4=localStorage[_0x5ef8c4(0x1d1)](_0x335456)===_0x5ef8c4(0x1dc);_0x5a1525['checked']=_0x4f01f4;switch(_0x5c8f01){case _0x5ef8c4(0x196):isGhostEnabled=_0x4f01f4;break;case _0x5ef8c4(0x247):isGridEnabled=_0x4f01f4;break;case'music':isMusicEnabled=_0x4f01f4;break;case _0x5ef8c4(0x1c4):isEvilMode=_0x4f01f4;break;}}),_0x27d2a2[_0xbbfcea(0x20d)](_0x242a15=>{const _0x3a62a6=_0xbbfcea;_0x242a15['addEventListener'](_0x3a62a6(0x210),_0x16cb54=>{const _0x577d5f=_0x3a62a6,_0x4d6cc8=_0x16cb54[_0x577d5f(0x166)][_0x577d5f(0x1fa)][_0x577d5f(0x18e)],_0x3b569d=_0x16cb54['target'][_0x577d5f(0x17c)],_0x48d1f2=_0x577d5f(0x1ee)+(_0x4d6cc8['charAt'](0x4e*-0x25+0x1744+-0xbfe)[_0x577d5f(0x24f)]()+_0x4d6cc8[_0x577d5f(0x229)](0xf6c+0x2*-0xd55+-0xb3f*-0x1))+'Enabled';switch(_0x4d6cc8){case _0x577d5f(0x196):isGhostEnabled=_0x3b569d;break;case _0x577d5f(0x247):isGridEnabled=_0x3b569d;break;case _0x577d5f(0x250):isMusicEnabled=_0x3b569d,toggleMusic();break;case _0x577d5f(0x1c4):isEvilMode=_0x3b569d;break;}localStorage[_0x577d5f(0x182)](_0x48d1f2,_0x3b569d),document[_0x577d5f(0x257)]('input[type=\x22checkbox\x22][data-option=\x22'+_0x4d6cc8+'\x22]')[_0x577d5f(0x20d)](_0x3a8e41=>{_0x3a8e41['checked']=_0x3b569d;});if(isGameStarted&&!isGameOver)draw();});}),toggleMusic();}function setupVolumeSliders(){const _0x2597db=_0x12a679,_0x570abf=document[_0x2597db(0x257)](_0x2597db(0x1a3)),_0x2fcc1b=document[_0x2597db(0x257)]('.sfx-slider-input'),_0x1f13a7=(_0x381925,_0x3d42ba)=>{const _0x3a6af=_0x2597db;document[_0x3a6af(0x257)](_0x381925)[_0x3a6af(0x20d)](_0x159a23=>{const _0x3a6798=_0x3a6af,_0x22ff9b=_0x159a23[_0x3a6798(0x1fd)];_0x22ff9b['querySelector'](_0x3a6798(0x233))[_0x3a6798(0x221)][_0x3a6798(0x1cb)]=_0x3d42ba*(0x953*-0x1+0x2*0x78d+-0x563)+'%',_0x22ff9b[_0x3a6798(0x1f1)](_0x3a6798(0x23e))['style'][_0x3a6798(0x255)]=_0x3d42ba*(0x195a+-0x1d53+0x45d)+'%',_0x159a23['value']=_0x3d42ba;});};_0x1f13a7(_0x2597db(0x1a3),musicVolume),_0x1f13a7(_0x2597db(0x1f3),sfxVolume),_0x570abf['forEach'](_0x3f9da9=>{const _0x1d0911=_0x2597db;_0x3f9da9[_0x1d0911(0x20f)](_0x1d0911(0x1a1),_0x412ccb=>{const _0x1d8d21=_0x1d0911;musicVolume=parseFloat(_0x412ccb['target'][_0x1d8d21(0x1e5)]);if(currentMusic)currentMusic['volume']=musicVolume;localStorage[_0x1d8d21(0x182)](_0x1d8d21(0x165),musicVolume),_0x1f13a7(_0x1d8d21(0x1a3),musicVolume);});}),_0x2fcc1b['forEach'](_0x59e13a=>{_0x59e13a['addEventListener']('input',_0x3eeac9=>{const _0x2dd72e=_0x2e27;sfxVolume=parseFloat(_0x3eeac9[_0x2dd72e(0x166)][_0x2dd72e(0x1e5)]),localStorage[_0x2dd72e(0x182)]('tetrisSfxVolume',sfxVolume),_0x1f13a7(_0x2dd72e(0x1f3),sfxVolume);});});}function addScore(_0x4eeb49){const _0x4a873b=_0x12a679,_0x22aa20=COLS*ROWS;if(_0x22aa20===-0x1300+0x265b+-0x135b*0x1)return;const _0x6b54cf=isMobile?MOBILE_COLS_DIVISOR*MOBILE_ROWS_DIVISOR:DESKTOP_COLS_DIVISOR*DESKTOP_ROWS_DIVISOR,_0x461b3e=_0x6b54cf/_0x22aa20,_0x301fe2=isGhostEnabled?0x3*-0x333+0x5e1+0x3b8+0.5:-0x1593+0x18da*-0x1+0x2e6e,_0x21909d=isGridEnabled?0x1f76+-0x28*-0x3d+-0x28fe+0.9:-0x328+-0x1*0x146b+0x1f7*0xc;score+=Math[_0x4a873b(0x260)](_0x4eeb49*_0x461b3e*_0x301fe2*_0x21909d);}function getWorstPiece(_0x2940af){const _0x2d18b6=_0x12a679;let _0x4215a0=[];for(let _0x521efb=-0x605+0x1e16+-0x1810;_0x521efb<SHAPES[_0x2d18b6(0x25e)];_0x521efb++){let _0x173c6a=Infinity;const _0x486a6e=SHAPES[_0x521efb];for(let _0x3daa06=-0x1927+0x1c78+-0x351;_0x3daa06<0x703*0x5+-0x1eda+-0x431;_0x3daa06++){let _0x2c36c8=new Piece(_0x486a6e,_0x521efb);for(let _0xf8802c=-0x1d68*0x1+0x4*-0x6e6+0x3900;_0xf8802c<_0x3daa06;_0xf8802c++)_0x2c36c8[_0x2d18b6(0x1ff)]();for(let _0x1956d1=-(-0xab4+0x1108+0x329*-0x2);_0x1956d1<COLS;_0x1956d1++){let _0x1c2671=new Piece(_0x2c36c8[_0x2d18b6(0x192)],_0x521efb);_0x1c2671['x']=_0x1956d1;while(!_0x1c2671['collides']())_0x1c2671[_0x2d18b6(0x1b7)](-0x1*0x2113+-0x1*-0x157a+0xb99,-0x9dc+0x35+0xce*0xc);_0x1c2671[_0x2d18b6(0x1b7)](-0x1*0x409+0x1*-0x2416+0x281f,-(-0x1*0x5d1+0xb*-0x2ef+0x2617));if(_0x1c2671['y']<0x3ca*0x1+0x4d1+-0x89b)continue;let _0x304103=![];for(let _0x5e211b=-0x240d*-0x1+0x30f+0x1*-0x271c;_0x5e211b<_0x1c2671[_0x2d18b6(0x192)][_0x2d18b6(0x25e)];_0x5e211b++){for(let _0x4139d4=0x154f+0x1*0x1966+-0x2eb5;_0x4139d4<_0x1c2671[_0x2d18b6(0x192)][_0x5e211b][_0x2d18b6(0x25e)];_0x4139d4++){if(_0x1c2671[_0x2d18b6(0x192)][_0x5e211b][_0x4139d4]>-0x40c*-0x4+0xc*0xa7+-0x1804&&(_0x1c2671['x']+_0x4139d4<-0x2*0xbd+-0x2*-0x12dd+-0x8*0x488||_0x1c2671['x']+_0x4139d4>=COLS)){_0x304103=!![];break;}}if(_0x304103)break;}if(_0x304103)continue;const _0x4f5198=board[_0x2d18b6(0x1c3)](_0x223b7c=>[..._0x223b7c]);_0x1c2671[_0x2d18b6(0x192)][_0x2d18b6(0x20d)]((_0x2aaec1,_0x50be2f)=>_0x2aaec1['forEach']((_0x9d193c,_0x4dd11e)=>{_0x9d193c>-0x5*0x176+0x9b3+-0x265&&(_0x4f5198[_0x1c2671['y']+_0x50be2f]&&(_0x4f5198[_0x1c2671['y']+_0x50be2f][_0x1c2671['x']+_0x4dd11e]=_0x9d193c));}));let _0x39089f=-0x243f+-0xaa1+0x7d*0x60,_0x54d816=_0x4f5198[_0x2d18b6(0x1f5)](_0x1c8ab2=>{const _0x569a04=_0x2d18b6;if(_0x1c8ab2[_0x569a04(0x204)](_0x4bbcc7=>_0x4bbcc7>0x1176+0xd22+-0x1e98))return _0x39089f++,![];return!![];});while(_0x54d816[_0x2d18b6(0x25e)]<ROWS){_0x54d816[_0x2d18b6(0x206)](Array(COLS)[_0x2d18b6(0x1e1)](0x1*-0x19c9+-0x1*-0x1cca+0x1*-0x301));}const _0x228642=evaluateBoard(_0x54d816,_0x39089f);_0x228642<_0x173c6a&&(_0x173c6a=_0x228642);}}_0x4215a0[_0x2d18b6(0x21d)]({'pieceIndex':_0x521efb,'score':_0x173c6a});}_0x4215a0['sort']((_0x13aaf3,_0x55221d)=>_0x55221d['score']-_0x13aaf3[_0x2d18b6(0x216)]);const _0x42fc69=Math[_0x2d18b6(0x19f)]();let _0x39a4e8;if(_0x42fc69<-0x256b+-0x1d*0xa7+0x3856+0.65)_0x39a4e8=_0x4215a0[-0x11*-0x8f+0x7f4*0x2+-0x1967][_0x2d18b6(0x18b)];else{if(_0x42fc69<-0x5*0x21+-0xc25+0xcca+0.9)_0x39a4e8=_0x4215a0[-0xd90+-0x2510+0x32a1]['pieceIndex'];else _0x39a4e8=_0x4215a0[0x5*0x173+-0xd03*0x1+0x5c6][_0x2d18b6(0x18b)];}_0x2940af(_0x39a4e8);}function evaluateBoard(_0x4036da,_0x5046e=-0x416*0x1+-0x14c*-0xb+-0xa2e){const _0x1cce43=_0x12a679;let _0x40c392=-0x15d*-0x1b+-0x49a+0x5*-0x671,_0x5e4df3=0x42*0x13+0x206a+-0x2550,_0x1beaa5=0x89b*-0x1+0x1fd*-0x1+-0x6*-0x1c4,_0x14af97=0x796*-0x4+0x1*0xec+-0x21a*-0xe;const _0x3b8a10=new Array(COLS)['fill'](-0x10*-0x96+-0x23e+-0x722);for(let _0x1d997d=-0xc1*0x21+0x197+0x174a;_0x1d997d<COLS;_0x1d997d++){for(let _0x39476f=-0x6f5*0x5+-0x2*0xf0e+0x40e5;_0x39476f<ROWS;_0x39476f++){if(_0x4036da[_0x39476f][_0x1d997d]>-0x1*-0x14af+-0x29a+-0x1215){_0x3b8a10[_0x1d997d]=ROWS-_0x39476f;break;}}}_0x40c392=_0x3b8a10[_0x1cce43(0x25d)]((_0x50ba29,_0x3def5d)=>_0x50ba29+_0x3def5d,-0x3*-0xa7f+-0x3b5+0xe*-0x1fc);const _0x272303=Math[_0x1cce43(0x18c)](0x2666*-0x1+0x1560+0x1106,..._0x3b8a10);for(let _0x1f6088=-0x9*-0x3f4+-0x1*-0x107b+-0x340f*0x1;_0x1f6088<COLS;_0x1f6088++){for(let _0x4d92c6=ROWS-_0x3b8a10[_0x1f6088]+(0x17ec+0x3*0x63e+0x4bd*-0x9);_0x4d92c6<ROWS;_0x4d92c6++){if(_0x4036da[_0x4d92c6][_0x1f6088]===-0x2dd+-0x7e6+-0x5*-0x227)_0x5e4df3++;}}for(let _0x34b575=0x2*-0x3a9+0x266b+-0x1f19;_0x34b575<COLS-(0x1d8a+-0x1f73+0x1ea);_0x34b575++){_0x1beaa5+=Math[_0x1cce43(0x23f)](_0x3b8a10[_0x34b575]-_0x3b8a10[_0x34b575+(-0x2d7*-0x4+0x1030+-0x1*0x1b8b)]);}for(let _0x5c0583=-0x2055*-0x1+0xfd1+-0x2*0x1813;_0x5c0583<COLS;_0x5c0583++){const _0x44e4bc=_0x5c0583>-0xfb5+0xdcd*-0x1+0x1d82?_0x3b8a10[_0x5c0583-(-0xd4b+0x263d+-0x18f1)]:_0x272303,_0x3af8dd=_0x5c0583<COLS-(-0x19db+0x2145+-0x769)?_0x3b8a10[_0x5c0583+(-0x99a*-0x4+-0x1313+-0x1354)]:_0x272303,_0x1e03a9=Math[_0x1cce43(0x1f7)](_0x44e4bc,_0x3af8dd)-_0x3b8a10[_0x5c0583];if(_0x1e03a9>-0x1bc5*-0x1+0x4ec+-0x20b0)_0x14af97+=_0x1e03a9*_0x1e03a9;}const _0x4a90a2=0x59*-0x41+-0x7*-0x331+-0x21*-0x2+0.6,_0x41db34=0x106d+0x164d+-0x26b9+0.19999999999999996,_0x31fa26=0x1bdf+-0x7*-0x9a+-0x2015*0x1+0.25,_0x42534b=0x3*-0xa93+0xbfd*-0x1+0x2bb7,_0x371c62=0xcc*0xa+-0x1da1+0x15ae,_0x115a7c=_0x40c392*_0x4a90a2+_0x5e4df3*_0x41db34+_0x1beaa5*_0x31fa26+_0x14af97*_0x42534b-_0x5046e*_0x5046e*_0x371c62;return _0x115a7c;}function spawnNewPiece(){const _0x312788=_0x12a679;whiteBlock={'x':null,'y':null};currentZone===_0x312788(0x1b2)&&(Math[_0x312788(0x19f)]()<whiteBlockSpawnChance?(spawnWhiteBlock(),whiteBlockSpawnChance*=0x799*-0x1+0x17a*0xc+-0xa1f+0.8):whiteBlockSpawnChance*=-0x1b85+-0x1a6c+-0x1af9*-0x2+0.020000000000000018);const _0x5b4b3a=_0x218a56=>{const _0x372717=_0x312788;if(currentZone===_0x372717(0x1b2)){const _0x4bcf97=[_0x372717(0x21e)],_0x35a8f9=new Piece(_0x218a56[_0x372717(0x192)],_0x218a56['colorIndex']);_0x35a8f9['x']=COLS-_0x35a8f9[_0x372717(0x192)][0xa4f+0x1d8c+-0x27db][_0x372717(0x25e)],_0x35a8f9['y']=Math[_0x372717(0x20a)](ROWS/(0x3*-0xb54+-0xb*-0x1e9+0xcfb))-Math[_0x372717(0x20a)](_0x35a8f9[_0x372717(0x192)][_0x372717(0x25e)]/(0x1f00+-0x1184+-0x1e*0x73));!_0x35a8f9[_0x372717(0x218)]()&&_0x4bcf97[_0x372717(0x21d)](_0x372717(0x1c9));_0x35a8f9['x']=0x35f*-0x1+-0x1331*-0x1+-0xfd2,_0x35a8f9['y']=Math[_0x372717(0x20a)](ROWS/(0x18e*0x4+-0x216f+0x1b39))-Math[_0x372717(0x20a)](_0x35a8f9[_0x372717(0x192)][_0x372717(0x25e)]/(-0x225b+-0x19*-0x19+0xaa4*0x3));!_0x35a8f9[_0x372717(0x218)]()&&_0x4bcf97[_0x372717(0x21d)](_0x372717(0x1a2));_0x218a56[_0x372717(0x1c0)]=_0x4bcf97[Math[_0x372717(0x20a)](Math[_0x372717(0x19f)]()*_0x4bcf97[_0x372717(0x25e)])];const _0x2d2f7c=0x53f*-0x3+-0xc*0xb5+0x1bb*0xe-(-0x6ce*-0x1+-0x9de+0xe*0x38+0.3+Math[_0x372717(0x19f)]()*(0x1695+0xae+-0x1743+0.2));setGameSpeed(INITIAL_SPEED*_0x2d2f7c);}switch(_0x218a56[_0x372717(0x1c0)]){case _0x372717(0x1c9):_0x218a56['x']=COLS-_0x218a56['shape'][0x1be9+0xca3+0xc*-0x361][_0x372717(0x25e)],_0x218a56['y']=Math['floor'](ROWS/(0x7dd+-0x8cf+-0x7a*-0x2))-Math[_0x372717(0x20a)](_0x218a56[_0x372717(0x192)][_0x372717(0x25e)]/(0x2277*-0x1+0xcf7+0x1582*0x1));break;case'RIGHT':_0x218a56['x']=0x2158+-0xc37+-0x1521,_0x218a56['y']=Math[_0x372717(0x20a)](ROWS/(0x2*-0x443+-0x8e9+-0x13*-0xeb))-Math['floor'](_0x218a56[_0x372717(0x192)][_0x372717(0x25e)]/(-0x1351+-0x1c4*0x1+0x1517));break;case'DOWN':default:_0x218a56['x']=Math[_0x372717(0x20a)](COLS/(0xc7a*-0x2+0xf92+-0x1*-0x964))-Math['floor'](_0x218a56[_0x372717(0x192)][-0x23d5*-0x1+-0x1cae+-0x727][_0x372717(0x25e)]/(-0x1*-0x125f+0x186a+-0x2ac7)),_0x218a56['y']=0x18b9+-0x68*0x18+0x1*-0xef9;break;}currentPiece=_0x218a56;if(currentPiece[_0x372717(0x218)]())gameOver();};let _0x6f63d7,_0x4d4372,_0x5f108;if(isEvilMode){currentPiece=null,draw(),setTimeout(()=>{getWorstPiece(_0x377760=>{const _0x25984f=_0x2e27;_0x5f108=Math[_0x25984f(0x20a)](Math[_0x25984f(0x19f)]()*(COLORS[_0x25984f(0x25e)]-(-0x1e3d+0x1*-0x209f+0x3edd)))+(-0x1*-0xf0b+0x140a+-0x2314),_0x4d4372=SHAPES[_0x377760][_0x25984f(0x1c3)](_0x31d730=>_0x31d730[_0x25984f(0x1c3)](_0x4dc44c=>_0x4dc44c>0x659+-0x202d*-0x1+-0x1*0x2686?_0x5f108:0x89e*-0x4+-0x5*0x5de+0x2*0x1fe7)),_0x5b4b3a(new Piece(_0x4d4372,_0x5f108)),draw();});},0x138c+-0x127*-0x3+-0x1701*0x1);return;}else{if(forcedPieceState[_0x312788(0x24d)]>-0x3*0x43f+0x97e+-0x115*-0x3)_0x6f63d7=forcedPieceState[_0x312788(0x190)],forcedPieceState[_0x312788(0x24d)]--,_0x4d4372=SHAPES[_0x6f63d7],_0x5f108=_0x6f63d7;else{if(forcedNextPieceIndex>0x22f3+-0x145*-0x19+-0x610*0xb)_0x6f63d7=forcedNextPieceIndex,forcedNextPieceIndex=0xbc9+-0x9ea+-0x1*0x1df,pieceSelect[_0x312788(0x1e5)]=0xd*0x23b+-0xb7*-0x1b+0xc13*-0x4,_0x4d4372=SHAPES[_0x6f63d7],_0x5f108=_0x6f63d7;else{if(currentZone===_0x312788(0x25c)){const _0x3127b9=Object[_0x312788(0x17d)](LETTER_SHAPES),_0xc6eb11=_0x3127b9[Math['floor'](Math['random']()*_0x3127b9[_0x312788(0x25e)])];_0x4d4372=LETTER_SHAPES[_0xc6eb11],_0x5f108=LETTER_COLOR_INDEX;}else _0x6f63d7=Math[_0x312788(0x20a)](Math[_0x312788(0x19f)]()*(SHAPES[_0x312788(0x25e)]-(0x998+0x20d2*-0x1+0x173b)))+(-0x1*0x176e+0x11*-0x194+-0x3*-0x10c1),_0x4d4372=SHAPES[_0x6f63d7],_0x5f108=_0x6f63d7;}}}const _0x4780ce=_0x4d4372['map'](_0x87fc12=>_0x87fc12[_0x312788(0x1c3)](_0x295184=>_0x295184>-0x4*-0x563+-0x25da+-0x2*-0x827?_0x5f108:-0x20*-0x85+0x242*0xc+-0x2bb8*0x1));_0x5b4b3a(new Piece(_0x4780ce,_0x5f108));}function solidifyPiece(){const _0x3698e0=_0x12a679;if(currentZone===_0x3698e0(0x211)){const _0x65bb64=['heartbeat','whisper1',_0x3698e0(0x251),_0x3698e0(0x20b)];playSound(_0x65bb64[Math[_0x3698e0(0x20a)](Math['random']()*_0x65bb64['length'])]);}else playSound(_0x3698e0(0x248));currentPiece['shape'][_0x3698e0(0x20d)]((_0x439088,_0x511112)=>_0x439088[_0x3698e0(0x20d)]((_0x399e8e,_0x96a37)=>{if(_0x399e8e>-0x1*0x2ea+-0xf*-0x11c+-0xdba&&board[currentPiece['y']+_0x511112])board[currentPiece['y']+_0x511112][currentPiece['x']+_0x96a37]=_0x399e8e;})),clearLines();if(!isZoneForced){if(isSafePeriodActive){}else{if(currentZone!==_0x3698e0(0x24a)){if(score-zoneStartScore>=ZONE_PROGRESS_REQUIREMENT){currentZone=_0x3698e0(0x24a);if(flashAnimation)stopFlashTimer();switchMusic(_0x3698e0(0x24a)),setGameSpeed(INITIAL_SPEED),isSafePeriodActive=!![],safePeriodStartTime=Date['now']();}}else{if(Math['random']()<ZONE_ENTRY_CHANCE){const _0x28f5e9=[_0x3698e0(0x211),'RAINBOW','NINJA',_0x3698e0(0x25c)];currentZone=_0x28f5e9[Math[_0x3698e0(0x20a)](Math['random']()*_0x28f5e9[_0x3698e0(0x25e)])],zoneStartScore=score;if(currentZone===_0x3698e0(0x1f9))startFlashTimer();if(currentZone===_0x3698e0(0x211))setGameSpeed(RED_ZONE_SPEED);switchMusic(currentZone);}}}}spawnNewPiece();if(!isEvilMode)saveState();updateProgressBarUI();}function clearLines(){const _0x3cbb31=_0x12a679;let _0x41d2a6=0x1e3b+0x32e+0xb23*-0x3;for(let _0x211eb4=ROWS-(-0x19*-0xf1+-0x3*0x5b9+-0x3*0x21f);_0x211eb4>=0x240+0x563+-0x7a3;_0x211eb4--){board[_0x211eb4][_0x3cbb31(0x204)](_0x2d10da=>_0x2d10da>0x236a+-0xcf2*0x1+-0x2*0xb3c)&&(_0x41d2a6++,board[_0x3cbb31(0x1b8)](_0x211eb4,-0x7*0x112+-0xbdf+0x135e),board[_0x3cbb31(0x206)](Array(COLS)[_0x3cbb31(0x1e1)](-0x1fdf+-0x1336*-0x1+0xca9)),_0x211eb4++);}_0x41d2a6>-0x1ae9+0x83*0x2d+0x3e2&&(playSound('clear'),addScore(_0x41d2a6*(-0x1*-0x17d1+-0xbf*0x7+-0x1234)*_0x41d2a6));}function drawGrid(){const _0x514d25=_0x12a679;ctx['strokeStyle']='rgba(255,\x20255,\x20255,\x200.15)',ctx[_0x514d25(0x207)]=0x1*-0xe51+-0x7*0x2e3+-0x2287*-0x1;for(let _0x8bb43e=-0x4f3*0x4+0x18d*-0xa+0x11a7*0x2;_0x8bb43e<=COLS;_0x8bb43e++){ctx['beginPath'](),ctx['moveTo'](_0x8bb43e*BLOCK_SIZE,0x312+0x14b*0x11+0x79*-0x35),ctx[_0x514d25(0x1bd)](_0x8bb43e*BLOCK_SIZE,canvas[_0x514d25(0x1a7)]),ctx[_0x514d25(0x1d2)]();}for(let _0x3febb8=0xb63+-0xa1*0x34+0x1*0x1551;_0x3febb8<=ROWS;_0x3febb8++){ctx[_0x514d25(0x18f)](),ctx[_0x514d25(0x1d7)](0x7*0x3f2+0xb6*0xf+-0x2648,_0x3febb8*BLOCK_SIZE),ctx[_0x514d25(0x1bd)](canvas['width'],_0x3febb8*BLOCK_SIZE),ctx[_0x514d25(0x1d2)]();}}function drawPieceShadow(){const _0x5814bb=_0x12a679;if(!flashAnimation||!currentPiece)return;const {x:_0xf22878,y:_0x13c688,opacity:_0x33d6dc}=flashAnimation;if(_0x33d6dc<=-0x1f*0xd9+0x643*0x5+-0x508)return;const _0x1cb8e3=new Set(),_0x330965=-0x1*-0x16ff+-0x1*-0x98c+-0x206d*0x1;ctx['fillStyle']='rgba(0,\x200,\x200,\x20'+_0x33d6dc*(0x1b01+-0x2ed*-0x2+0x20db*-0x1+0.4)+')',currentPiece[_0x5814bb(0x192)][_0x5814bb(0x20d)]((_0x4a83f5,_0x3f05d6)=>{const _0x49c135=_0x5814bb;_0x4a83f5[_0x49c135(0x20d)]((_0x10c1d4,_0x19b045)=>{const _0x596505=_0x49c135;if(_0x10c1d4===0x256*0x5+0x3*0x5db+-0x1d3f)return;const _0x141e59=(currentPiece['x']+_0x19b045+(-0x8db*0x1+-0x864+0x113f+0.5))*BLOCK_SIZE,_0x5d2867=(currentPiece['y']+_0x3f05d6+(-0x11fe+-0x215b*-0x1+0x13*-0xcf+0.5))*BLOCK_SIZE,_0x5ba67f=_0x141e59-_0xf22878,_0xd78196=_0x5d2867-_0x13c688,_0x20245b=Math[_0x596505(0x1d0)](_0x5ba67f*_0x5ba67f+_0xd78196*_0xd78196);if(_0x20245b===0x1*0x119d+0x118b*-0x2+0x1179)return;const _0x3499d0=_0x5ba67f/_0x20245b,_0x4011f2=_0xd78196/_0x20245b;for(let _0x5df6c2=0x60e*-0x1+0x100e+-0x9ff;_0x5df6c2<_0x330965;_0x5df6c2++){const _0xb826ca=Math[_0x596505(0x20a)]((_0x141e59+_0x3499d0*_0x5df6c2*BLOCK_SIZE)/BLOCK_SIZE),_0xb43a19=Math[_0x596505(0x20a)]((_0x5d2867+_0x4011f2*_0x5df6c2*BLOCK_SIZE)/BLOCK_SIZE),_0x261847=_0xb826ca+','+_0xb43a19;if(_0xb826ca<0x2*0xedc+0x6*-0x20b+-0x1176||_0xb826ca>=COLS||_0xb43a19<-0x29*0xe5+-0x35b+0x2808||_0xb43a19>=ROWS||board[_0xb43a19]&&board[_0xb43a19][_0xb826ca]>0x22c4+-0xb84+0xc0*-0x1f)break;!_0x1cb8e3[_0x596505(0x21b)](_0x261847)&&_0x1cb8e3[_0x596505(0x235)](_0x261847);}});}),_0x1cb8e3[_0x5814bb(0x20d)](_0x3884=>{const _0x286400=_0x5814bb,[_0x14a563,_0x529960]=_0x3884[_0x286400(0x189)](',')[_0x286400(0x1c3)](Number);ctx[_0x286400(0x234)](_0x14a563*BLOCK_SIZE,_0x529960*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);});}function drawGhostPiece(){const _0x26eb77=_0x12a679;if(!currentPiece)return;const _0x473d79=new Piece(currentPiece[_0x26eb77(0x192)],currentPiece['colorIndex']);_0x473d79['x']=currentPiece['x'],_0x473d79['y']=currentPiece['y'],_0x473d79[_0x26eb77(0x1c0)]=currentPiece[_0x26eb77(0x1c0)];let _0x4f5a1f=-0x3*-0x5dd+0x1b*0xb4+0x2493*-0x1,_0x446ab4=0x142c+-0x13e6+-0x46;switch(_0x473d79[_0x26eb77(0x1c0)]){case _0x26eb77(0x1c9):_0x4f5a1f=-(0x90e+0x2226+-0x2b33);break;case _0x26eb77(0x1a2):_0x4f5a1f=0x5*-0x5bf+-0x147f+0x313b;break;case _0x26eb77(0x21e):default:_0x446ab4=-0x6*0x21+0x2034+-0x1f6d;break;}while(!_0x473d79['collides']()){_0x473d79[_0x26eb77(0x1b7)](_0x4f5a1f,_0x446ab4);}_0x473d79['move'](-_0x4f5a1f,-_0x446ab4),_0x473d79[_0x26eb77(0x1c5)](!![]);}function draw(){const _0x403ce1=_0x12a679;if(!ctx)return;ctx['clearRect'](-0x1109+0xce4+0x425,0x2f2*-0xc+-0x2210+0x4568,canvas[_0x403ce1(0x1cb)],canvas['height']);if(isGridEnabled)drawGrid();if(flashAnimation){const {x:_0x3298e6,y:_0x2d2a55,radius:_0x23a842,opacity:_0x532090}=flashAnimation,_0x29d28b=ctx[_0x403ce1(0x1ea)](_0x3298e6,_0x2d2a55,0x1db4+0xbbd+-0x2971,_0x3298e6,_0x2d2a55,_0x23a842);_0x29d28b[_0x403ce1(0x254)](-0x18a8+0x3*0x5bd+-0x771*-0x1,_0x403ce1(0x22b)+_0x532090*(-0xf5f*0x1+-0x3c*0x45+0x1a9*0x13+0.7)+')'),_0x29d28b[_0x403ce1(0x254)](0x1972+0x1a9*0x5+-0x21bf+0.2,_0x403ce1(0x22b)+_0x532090*(-0x2176+0x33f+-0x55*-0x5b+0.4)+')'),_0x29d28b[_0x403ce1(0x254)](0x5*0x5bd+0x26ad+-0x435d,_0x403ce1(0x262)),ctx[_0x403ce1(0x213)]=_0x29d28b,ctx['fillRect'](0x41*0x84+0x18f*-0x6+-0x182a,-0x24f0+-0xe31+0x110b*0x3,canvas[_0x403ce1(0x1cb)],canvas[_0x403ce1(0x1a7)]);}board[_0x403ce1(0x20d)]((_0x41fc95,_0x4f0d83)=>{_0x41fc95['forEach']((_0x4964b2,_0x5054f5)=>{const _0x219ef7=_0x2e27;if(_0x4964b2>0x126b+-0x6f2*-0x1+-0x195d){let _0x59f331;switch(currentZone){case'NINJA':_0x59f331='#FFFFFF';break;case'RED':_0x59f331=RED_COLORS[_0x4964b2];break;case'RAINBOW':_0x59f331=COLORS[Math[_0x219ef7(0x20a)](Math[_0x219ef7(0x19f)]()*(COLORS[_0x219ef7(0x25e)]-(0x2b3*-0x1+0x17b4+0x10*-0x150)))+(0x9bc*-0x2+0x1161+0x218)];break;default:_0x59f331=COLORS[_0x4964b2];break;}drawBlock(_0x5054f5,_0x4f0d83,_0x59f331);}});}),drawPieceShadow();whiteBlock['x']!==null&&currentZone===_0x403ce1(0x1b2)&&(ctx[_0x403ce1(0x213)]='#ffffff',ctx[_0x403ce1(0x234)](whiteBlock['x']*BLOCK_SIZE,whiteBlock['y']*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE),ctx[_0x403ce1(0x1d3)]=_0x403ce1(0x25a),ctx[_0x403ce1(0x174)](whiteBlock['x']*BLOCK_SIZE,whiteBlock['y']*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE));if(!isGameOver&&isGhostEnabled&&currentPiece)drawGhostPiece();if(!isGameOver&&currentPiece)currentPiece[_0x403ce1(0x1c5)]();}function update(){const _0x2552e7=_0x12a679;if(isGameOver||isGamePaused||!currentPiece)return;if(!isZoneForced&&isSafePeriodActive){const _0x5d62dc=Date[_0x2552e7(0x18a)]()-safePeriodStartTime;_0x5d62dc>=SAFE_PERIOD_DURATION&&(isSafePeriodActive=![]),updateProgressBarUI();}let _0x3c6536=-0x1c8f+0x67a*-0x2+0x2983,_0x492224=-0x32*0x6e+0x1be8+-0x66c;switch(currentPiece[_0x2552e7(0x1c0)]){case _0x2552e7(0x1c9):_0x3c6536=-(0xb*0x1cd+-0x1f4*0x13+-0x1*-0x114e);break;case _0x2552e7(0x1a2):_0x3c6536=0x1647+-0x20b0+0x3e*0x2b;break;case _0x2552e7(0x21e):default:_0x492224=0x1*0x2483+-0x2043+-0x43f;break;}currentPiece['move'](_0x3c6536,_0x492224),checkWhiteBlockCollision(),currentPiece['collides']()&&(currentPiece['move'](-_0x3c6536,-_0x492224),solidifyPiece()),draw();}function softDrop(){const _0xf43bf6=_0x12a679;if(isGameOver||!currentPiece)return;let _0x15e6a6=-0x1ce4+-0x317*-0x1+-0x1*-0x19cd,_0x1094fd=0x1287*-0x2+0x638*0x1+0x1ed6;switch(currentPiece[_0xf43bf6(0x1c0)]){case _0xf43bf6(0x1c9):_0x15e6a6=-(0x241*-0x8+0x259+0x3ec*0x4);break;case _0xf43bf6(0x1a2):_0x15e6a6=0x175b+0x251d*-0x1+0xdc3;break;case _0xf43bf6(0x21e):default:_0x1094fd=-0x2097+0x1d64+0x334;break;}currentPiece['move'](_0x15e6a6,_0x1094fd),checkWhiteBlockCollision(),currentPiece['collides']()?(currentPiece[_0xf43bf6(0x1b7)](-_0x15e6a6,-_0x1094fd),solidifyPiece()):(addScore(0xb3*0x21+0x12a*-0x13+-0xf4),updateProgressBarUI()),draw();}function hardDrop(){const _0x38288b=_0x12a679;if(isGameOver||isGhostEnabled||!currentPiece)return;playSound(_0x38288b(0x186));let _0x503cfd=-0x145e+0x988+0xad6,_0x57dc94=0x1328+0xd1e+-0x2046,_0x4b7353=0x2*0xe01+0x4*0x5b3+0x3a1*-0xe;switch(currentPiece[_0x38288b(0x1c0)]){case _0x38288b(0x1c9):_0x57dc94=-(-0x176d+-0x18dc+0x304a);break;case'RIGHT':_0x57dc94=-0x33e*0x3+0x317*-0x2+0xfe9;break;case _0x38288b(0x21e):default:_0x4b7353=-0x2*0x12b5+0xb5+0x24b6;break;}while(!currentPiece[_0x38288b(0x218)]()){currentPiece[_0x38288b(0x1b7)](_0x57dc94,_0x4b7353),checkWhiteBlockCollision(),_0x503cfd++;}currentPiece['move'](-_0x57dc94,-_0x4b7353),addScore(_0x503cfd*(0x2*-0x2ae+0x10f5*0x1+-0xb97)),solidifyPiece(),draw();}function gameOver(){const _0x359970=_0x12a679;if(isMusicEnabled){const _0x42de6f=new Audio(SOUNDS[_0x359970(0x1a9)][_0x359970(0x24a)]['gameover']);_0x42de6f[_0x359970(0x259)]=sfxVolume,_0x42de6f[_0x359970(0x200)]()['catch'](_0x11f0d8=>{});}isGameOver=!![],isGameStarted=![],progressBarContainer[_0x359970(0x221)][_0x359970(0x16e)]=_0x359970(0x1df),pauseGame(!![]),currentPiece=null,clearSaveState(),stopFlashTimer();if(currentMusic)currentMusic[_0x359970(0x212)]();currentMusic=null,startGameOverAnimation();}function dropAnimationPiece(){const _0x5d0faf=_0x12a679,_0x5ea043=Math[_0x5d0faf(0x20a)](Math[_0x5d0faf(0x19f)]()*(SHAPES[_0x5d0faf(0x25e)]-(-0x21f1+-0x7*-0x367+0xa21)))+(0x1*-0x1169+0xb*-0x7d+0x16c9),_0x14e13d=Math[_0x5d0faf(0x20a)](Math[_0x5d0faf(0x19f)]()*(COLORS[_0x5d0faf(0x25e)]-(-0x2119+0x2f*0xd+0x1eb7)))+(0x49b*-0x3+-0x100c+0x1dde),_0x27c350=SHAPES[_0x5ea043][_0x5d0faf(0x1c3)](_0x594060=>_0x594060[_0x5d0faf(0x1c3)](_0x2cdaf2=>_0x2cdaf2>0x253f+0x59f*0x2+-0x307d?_0x14e13d:0x8*0x246+0x2167+-0x3397)),_0x432d89=new Piece(_0x27c350,_0x14e13d),_0x12de0b=Math['floor'](Math[_0x5d0faf(0x19f)]()*(-0x1ea9+0x1e4e+0x5f));for(let _0xf70b45=-0x71*-0x9+0x4*0x3db+-0x1365;_0xf70b45<_0x12de0b;_0xf70b45++)_0x432d89['rotate']();_0x432d89['x']=Math['floor'](Math['random']()*(COLS-_0x432d89[_0x5d0faf(0x192)][0x1dee+-0x4c6+-0x1928][_0x5d0faf(0x25e)]+(-0x18a2+0x19ca+-0x127))),_0x432d89['y']=0x2c3+-0x1b75+0x2*0xc59;while(!_0x432d89[_0x5d0faf(0x218)]())_0x432d89[_0x5d0faf(0x1b7)](-0xf46+-0x1139+0x207f,0x1c79+-0x78e+0x1*-0x14ea);_0x432d89['move'](0x2258+-0x3da*0x3+-0x1*0x16ca,-(0x3d9*-0x1+-0x10f1+0x14cb)),_0x432d89['shape']['forEach']((_0x1760f8,_0x3cc183)=>_0x1760f8[_0x5d0faf(0x20d)]((_0x30473a,_0xbd0045)=>{let _0x21b712=_0x432d89['y']+_0x3cc183,_0x30e255=_0x432d89['x']+_0xbd0045;if(_0x30473a>0x257f+-0x1974+0xc0b*-0x1&&_0x21b712>=-0x65*-0x4f+-0x1*0x1537+-0xc4*0xd&&_0x21b712<ROWS&&_0x30e255>=0x1*0x20d2+0x1*0x99d+-0x2a6f&&_0x30e255<COLS)board[_0x21b712][_0x30e255]=_0x30473a;}));}function startGameOverAnimation(){gameOverAnimationInterval=setInterval(()=>{for(let _0x5b40bb=0x249c+-0x14cc+-0xfd0;_0x5b40bb<-0x869*0x1+-0xb15*-0x1+0x2*-0x151;_0x5b40bb++)dropAnimationPiece();draw();},-0xd7e+0x12b4+-0x2*0x293),setTimeout(endGameOverAnimation,0x23*-0x7c+0x2d7+0x1*0x13f9);}function endGameOverAnimation(){clearInterval(gameOverAnimationInterval),showGameOverMenu();}function showGameOverMenu(){const _0x5be8ac=_0x12a679;score>hiScore&&(hiScore=score,localStorage[_0x5be8ac(0x182)]('tetrisHiScore',hiScore));finalScoreEl[_0x5be8ac(0x232)]=Math[_0x5be8ac(0x20a)](score),hiScoreEl['textContent']=Math[_0x5be8ac(0x20a)](hiScore),startHiScoreEl[_0x5be8ac(0x232)]=Math[_0x5be8ac(0x20a)](hiScore);const _0x98bda7=isMobile?MOBILE_COLS_DIVISOR*MOBILE_ROWS_DIVISOR:DESKTOP_COLS_DIVISOR*DESKTOP_ROWS_DIVISOR,_0x48aeb9=COLS>0x99b+-0x1a4e*-0x1+-0x23e9&&ROWS>-0x9c1+-0xfaf*-0x2+0x159d*-0x1?_0x98bda7/(COLS*ROWS):-0x183+-0x26d8*-0x1+0x4*-0x955,_0x1cde89=isGhostEnabled?0x1832+0xb59+-0x238b+0.5:0xb47+-0x1*-0xf7d+-0x1ac3,_0x441edd=isGridEnabled?-0x19d6+-0x1a*0x14e+0x3bc2+0.9:-0x174*0x7+0x49*-0x19+-0x114e*-0x1;scoreMultiplierEl['textContent']=(_0x48aeb9*_0x1cde89*_0x441edd)[_0x5be8ac(0x1c7)](0x14b1*-0x1+-0x1ee7+0x339a)+'x',gameOverScreen['classList'][_0x5be8ac(0x235)](_0x5be8ac(0x195));}function handlePlayerMove(_0x20803d){const _0x1ee11b=_0x12a679;if(isGameOver||!currentPiece)return;let _0x19a20e=0x1408+-0xa3*-0xd+-0x1*0x1c4f,_0x3a6083=0x12a*0x16+0x8a1*0x1+-0x223d;switch(currentPiece['gravityDirection']){case _0x1ee11b(0x21e):_0x19a20e=_0x20803d;break;case'LEFT':case _0x1ee11b(0x1a2):_0x3a6083=_0x20803d;break;}const _0x15abc9=()=>{const _0x3db32f=_0x1ee11b;currentPiece[_0x3db32f(0x1b7)](_0x19a20e,_0x3a6083),checkWhiteBlockCollision(),currentPiece[_0x3db32f(0x218)]()&&currentPiece[_0x3db32f(0x1b7)](-_0x19a20e,-_0x3a6083),draw();};if(currentZone===_0x1ee11b(0x211)){clearTimeout(iceSlipTimeout),_0x15abc9();const _0x14b185=-0x5*-0x1f3+-0x5de+-0x369;iceSlipTimeout=setTimeout(()=>{const _0x42cc8d=_0x1ee11b;if(isGameOver||!currentPiece)return;currentPiece[_0x42cc8d(0x1b7)](_0x19a20e,_0x3a6083),checkWhiteBlockCollision();if(currentPiece['collides']()){currentPiece[_0x42cc8d(0x1b7)](-_0x19a20e,-_0x3a6083),draw();return;}draw(),Math['random']()<0x1429+0x2012+-0x343b+0.3&&setTimeout(()=>{const _0xa0b979=_0x42cc8d;if(isGameOver||!currentPiece)return;currentPiece[_0xa0b979(0x1b7)](_0x19a20e,_0x3a6083),checkWhiteBlockCollision(),currentPiece[_0xa0b979(0x218)]()&&currentPiece[_0xa0b979(0x1b7)](-_0x19a20e,-_0x3a6083),draw();},0x47b*-0x6+0x1584+0xf4*0x6);},_0x14b185);}else _0x15abc9();}function spawnWhiteBlock(){const _0x930571=_0x12a679,_0x1e4ed7=[];for(let _0x2be01c=0x220+-0x791+-0xc7*-0x7;_0x2be01c<ROWS;_0x2be01c++){for(let _0x4d208c=-0x1*-0x1c3b+-0xcb1+-0xf8a;_0x4d208c<COLS;_0x4d208c++){if(board[_0x2be01c][_0x4d208c]===0x149c+-0x24a6+0x100a)_0x1e4ed7['push']({'x':_0x4d208c,'y':_0x2be01c});}}if(_0x1e4ed7['length']>0x1113+0x237b+-0x1f*0x1b2){const _0x20cb52=_0x1e4ed7[Math[_0x930571(0x20a)](Math[_0x930571(0x19f)]()*_0x1e4ed7[_0x930571(0x25e)])];whiteBlock={'x':_0x20cb52['x'],'y':_0x20cb52['y']};}}function checkWhiteBlockCollision(){const _0x37e3d8=_0x12a679;if(isGameOver||!currentPiece||whiteBlock['x']===null)return;for(let _0x4a0fe5=-0x17e2+0x1*-0x253a+0x3d1c;_0x4a0fe5<currentPiece[_0x37e3d8(0x192)][_0x37e3d8(0x25e)];_0x4a0fe5++){for(let _0x50d9ab=-0x1a15+-0x2*-0x1035+-0x655*0x1;_0x50d9ab<currentPiece[_0x37e3d8(0x192)][_0x4a0fe5][_0x37e3d8(0x25e)];_0x50d9ab++){if(currentPiece[_0x37e3d8(0x192)][_0x4a0fe5][_0x50d9ab]>0x86*0x10+-0x2493+-0x1c33*-0x1){const _0x3ac86e=currentPiece['x']+_0x50d9ab,_0x5918b2=currentPiece['y']+_0x4a0fe5;if(_0x3ac86e===whiteBlock['x']&&_0x5918b2===whiteBlock['y']){playSound(_0x37e3d8(0x23a)),triggerRandomActionBlock(),whiteBlock={'x':null,'y':null};return;}}}}}function triggerRandomActionBlock(){const _0x429c5a=_0x12a679,_0x16c573=Math[_0x429c5a(0x19f)]();if(_0x16c573<-0x1*-0x6ee+-0x1*-0x140f+-0x1afd+0.005)board=Array['from']({'length':ROWS},()=>Array(COLS)[_0x429c5a(0x1e1)](0x1*-0x2109+0x1925*-0x1+-0x2a5*-0x16));else{if(_0x16c573<-0x1bc3*0x1+0x10a2+-0x1*-0xb21+0.01)score+=-0x6cd+0x1db2+-0x12fd;else{if(_0x16c573<-0x1e4e+0x4ee+0x1960+0.11)fillBoardWithHoles(-0x1efb+-0x1d*-0xa3+0xc98);else{if(_0x16c573<0x3*-0x9c9+0x1b55+0x206+0.31)fillBoardWithHoles(0x3cb*0x4+0x51*0x42+-0x2404);else{const _0x35d1ee=SHAPES['length']-(-0x1d*0x71+-0x642+-0xa*-0x1e8),_0x53a703=Math[_0x429c5a(0x20a)](Math['random']()*_0x35d1ee)+(0x856+0x73b*-0x1+-0x11a);forcedPieceState={'type':_0x53a703,'count':0x14};}}}}draw();}function fillBoardWithHoles(_0x18053a){const _0x597e17=_0x12a679,_0x2d43eb=Math[_0x597e17(0x1f7)](_0x18053a,ROWS);for(let _0x70fc24=ROWS-(0x302+-0xfe1+0x670*0x2);_0x70fc24>=ROWS-_0x2d43eb;_0x70fc24--){const _0x3ae9ac=Math[_0x597e17(0x20a)](Math['random']()*COLS);for(let _0x3a2bd8=-0x1e87+0x2374+0x61*-0xd;_0x3a2bd8<COLS;_0x3a2bd8++){_0x3a2bd8!==_0x3ae9ac&&(board[_0x70fc24][_0x3a2bd8]=Math[_0x597e17(0x20a)](Math[_0x597e17(0x19f)]()*(COLORS['length']-(0xc08+-0x2*-0xc09+-0x2419*0x1)))+(0x1a8*-0xf+-0xc7*0x12+0x26d7));}}}function startFlashTimer(){stopFlashTimer(),scheduleNextLightning();}function scheduleNextLightning(){clearTimeout(flashTimeout);const _0x5648f7=0x213f+-0x249b*-0x1+-0x3ffe+Math['random']()*(0x1006+0x20ff+0x1*-0x2741);flashTimeout=setTimeout(()=>{const _0x1ef846=_0x2e27;if(isGameOver||currentZone!==_0x1ef846(0x1f9)||flashAnimation)return;triggerLightningPulse();},_0x5648f7);}function triggerLightningPulse(){const _0x27aa23=_0x12a679;if(flashAnimation)return;playSound('lightning');const _0x372dd3=Math[_0x27aa23(0x19f)]()*canvas[_0x27aa23(0x1cb)],_0x108244=0xc76+0xa8a+-0x1700,_0x9974a3=canvas[_0x27aa23(0x1cb)]*(-0xca5+0x1ac1+-0xe1c+0.8+Math[_0x27aa23(0x19f)]()*(0x1*-0x269+0x2582+-0x2319+0.4)),_0x109617=[{'time':0x0,'opacity':0x0},{'time':0x3c,'opacity':0x1*-0xdd5+-0x287+0x105c+0.6+Math[_0x27aa23(0x19f)]()*(0xf97+-0x10bf+0x128+0.2)},{'time':0x64,'opacity':-0x20f0+0x1*0x2186+-0x96+0.3+Math[_0x27aa23(0x19f)]()*(0x1a9d+0xd86+0x3*-0xd61+0.2)},{'time':0x96,'opacity':-0xb6d+0x9*-0x336+0x47b*0x9+0.5+Math['random']()*(0xb92*-0x2+0x2*0xc68+-0x1ac+0.2)},{'time':0x118,'opacity':-0x124e+0xe*-0x270+0x117a*0x3+0.1+Math[_0x27aa23(0x19f)]()*(-0x4f4+0x160d*-0x1+0x1b01+0.1)},{'time':0x1c2,'opacity':0x0}],_0x59fae5=_0x109617[_0x109617[_0x27aa23(0x25e)]-(0x167*-0x13+0x44*0x15+0x1512)][_0x27aa23(0x16f)],_0x249227=performance[_0x27aa23(0x18a)]();function _0x4b072e(_0x141509,_0x4a3cda,_0x107c62){return _0x141509*(-0x13d*-0x2+-0x21d0+0x1f57-_0x107c62)+_0x4a3cda*_0x107c62;}function _0x3e6c5b(_0x246d8c){const _0x5dc349=_0x27aa23,_0x28d44b=_0x246d8c-_0x249227;if(_0x28d44b>=_0x59fae5){flashAnimation=null,draw(),scheduleNextLightning();return;}let _0x1a84c4=0x61*0x11+0x1*0x16bf+-0x1d30;while(_0x1a84c4<_0x109617[_0x5dc349(0x25e)]-(-0x4c7*-0x1+-0x395+-0x130)&&_0x28d44b>=_0x109617[_0x1a84c4+(0x18d*-0x1+-0x1*-0xdab+-0xc1d)][_0x5dc349(0x16f)]){_0x1a84c4++;}const _0xa317e=_0x109617[_0x1a84c4],_0x5d51e8=_0x109617[_0x1a84c4+(0x601+-0x168c+0x108c)],_0x5055a9=_0x5d51e8[_0x5dc349(0x16f)]-_0xa317e['time'],_0x17de1d=_0x28d44b-_0xa317e[_0x5dc349(0x16f)],_0x1673b7=_0x5055a9>0x14*0x136+-0x92*-0x31+0xb*-0x4be?_0x17de1d/_0x5055a9:-0xf45*0x1+0x16*-0x182+0x3072,_0x57739d=_0x4b072e(_0xa317e[_0x5dc349(0x180)],_0x5d51e8[_0x5dc349(0x180)],_0x1673b7);flashAnimation={'id':requestAnimationFrame(_0x3e6c5b),'x':_0x372dd3,'y':_0x108244,'radius':_0x9974a3,'opacity':_0x57739d},draw();}flashAnimation={'id':requestAnimationFrame(_0x3e6c5b)};}function stopFlashTimer(){flashAnimation&&flashAnimation['id']&&cancelAnimationFrame(flashAnimation['id']),clearTimeout(flashTimeout),flashTimeout=null,flashAnimation=null;}function updateProgressBarUI(){const _0x1595a9=_0x12a679;if(!isGameStarted||isGameOver){progressBarContainer[_0x1595a9(0x221)]['display']=_0x1595a9(0x1df);return;}progressBarContainer['style']['display']=_0x1595a9(0x258),progressBar[_0x1595a9(0x237)]='',progressBar['style'][_0x1595a9(0x1ab)]=_0x1595a9(0x1df),progressBar[_0x1595a9(0x221)][_0x1595a9(0x25f)]=_0x1595a9(0x181);if(isZoneForced)progressBar[_0x1595a9(0x214)][_0x1595a9(0x235)](currentZone[_0x1595a9(0x185)]()+'-zone'),progressBar[_0x1595a9(0x221)]['width']=_0x1595a9(0x1fb);else{if(isSafePeriodActive){const _0x407344=Math[_0x1595a9(0x18c)](0x305*-0x2+-0x2094+-0x269e*-0x1,SAFE_PERIOD_DURATION-(Date[_0x1595a9(0x18a)]()-safePeriodStartTime)),_0x38481f=_0x407344/SAFE_PERIOD_DURATION;progressBar[_0x1595a9(0x221)][_0x1595a9(0x1cb)]=_0x38481f*(0xd95+0x9c+-0xdcd)+'%';const _0x141998=(-0x11cc+0x2499+-0x1255)*_0x38481f,_0x589f40=(0x9d6+0x1*-0x103d+0x6cb)*_0x38481f;progressBar['style'][_0x1595a9(0x24e)]=_0x1595a9(0x1d9)+_0x141998+',\x20'+_0x589f40+_0x1595a9(0x1ba),progressBar['style'][_0x1595a9(0x25f)]='width\x201s\x20linear,\x20background-color\x201s\x20linear';}else{if(currentZone!==_0x1595a9(0x24a)){const _0x51351c=Math[_0x1595a9(0x1f7)](0x1*0x7d5+0x2173+-0x2947,(score-zoneStartScore)/ZONE_PROGRESS_REQUIREMENT);progressBar[_0x1595a9(0x214)][_0x1595a9(0x235)](currentZone[_0x1595a9(0x185)]()+_0x1595a9(0x1fc)),progressBar[_0x1595a9(0x221)][_0x1595a9(0x1cb)]=_0x51351c*(-0x8f+-0x1d4d+0x4*0x790)+'%';}else progressBar[_0x1595a9(0x214)][_0x1595a9(0x235)]('warning'),progressBar['style']['width']=_0x1595a9(0x1fb);}}}function _0x18be(){const _0x147bfa=['modal-visible','ghost','input[type=\x22checkbox\x22][data-option]','startButton','testerGhostCheckbox','COLS','keydown','getContext','currentPiece','progress-bar-container','random','src','input','RIGHT','.music-slider-input','div','progress-bar','createDocumentFragment','height','toString','sfx','changedTouches','backgroundImage','#E63946','focus','key','tetrisGameState','Incorrect\x20password','cancelPasswordButton','RAINBOW','speed','5207472JQnBJX','[data-option=\x22ghost\x22]','#7B0000','move','splice','\x20at\x20','%,\x2050%)','values','code','lineTo','musicRainbow','restartButton','gravityDirection','1551403giPhgI','zoneSelect','map','evil','draw','testerMusicCheckbox','toFixed','#000','LEFT','gridColumn','width','clearRect','startHiScore','reverse','sound/NORMAL/rotate.wav','sqrt','getItem','stroke','strokeStyle','MTk3MjIwMDYyMDAwNjY2MTIz','ArrowLeft','KeyW','moveTo','touchmove','hsl(','tetrisCanvas','closeTesterMenu','true','from','Enter','none','startScreen','fill','sound/RAINBOW/powerup.wav','documentElement','30075914QRtdct','value','musicNormal','KeyD','tetrisMusicEnabled','remove','createRadialGradient','resize','#0074D9','innerHeight','tetris','passwordInput','colorIndex','querySelector','#FF4136','.sfx-slider-input','preventDefault','filter','zoneStartScore','min','musicNinja','NINJA','dataset','100%','-zone','parentElement','#A30000','rotate','play','isSafePeriodActive','scoreInput','#FFDC00','every','passwordPrompt','unshift','lineWidth','#8B0000','currentZone','floor','scrape','clientHeight','forEach','substring','addEventListener','change','RED','pause','fillStyle','classList','tetrisGridEnabled','score',',\x2010px)','collides','1992040mbFmzJ','#5A0000','has','startSafePeriodButton','push','DOWN','warn','forcedPieceState','style','shake','.btn','whiteBlockSpawnChance','testerMenu','176655gvgZdg','ArrowRight','clearBoardButton','slice','#D50000','rgba(255,\x20255,\x20255,\x20','1213795fpTxiI','#F012BE','completeZoneButton','.slider-item','KeyI','getElementById','textContent','.slider-fill','fillRect','add','3hbICoL','className','Could\x20not\x20play\x20sound:\x20','parse','powerup','touchstart','AUTO','screenX','.slider-thumb','abs','Escape','[data-option=\x22evil\x22]','clientWidth','paused','68RvhHZW','Could\x20not\x20play\x20music:\x20','innerWidth','grid','lock','10FhxEDa','NORMAL','#7FDBFF','appendChild','count','backgroundColor','toUpperCase','music','whisper2','sound/NORMAL/harddrop.wav','674914xOEbCS','addColorStop','left','9tNsfYU','querySelectorAll','block','volume','#aaaaaa','round','ALPHABET','reduce','length','transition','ceil','board','rgba(255,\x20255,\x20255,\x200)','currentTime','lit','soundtrack-credit','tetrisMusicVolume','target','Space','Enabled','KeyA','disabled','catch','tetrisEvilMode','screenY','display','time','click','sound/NORMAL/clear.wav','setScoreButton','trim','strokeRect','ArrowUp','removeItem','gridTemplateColumns','#FF851B','safePeriodStartTime','#C00000','gridRow','checked','keys','tetrisSfxVolume','rgba(255,255,255,0.2)','opacity','width\x200.2s\x20linear,\x20background-color\x200.5s\x20ease','setItem','gameOverScreen','sound/RED/whisper2.mp3','toLowerCase','harddrop','submitPasswordButton','#2ECC40','split','now','pieceIndex','max','logo-pixel','option','beginPath','type','sound/NINJA/lightning.wav','shape','charAt','finalScore'];_0x18be=function(){return _0x147bfa;};return _0x18be();}function requestGodMode(){const _0x57f22a=_0x12a679;if(isTesterMenuOpen){testerMenu['style'][_0x57f22a(0x16e)]=_0x57f22a(0x1df),isTesterMenuOpen=![];if(isGameStarted)pauseGame(![]);}else pauseGame(!![]),passwordPrompt['classList']['add'](_0x57f22a(0x195)),passwordInput[_0x57f22a(0x1ad)]();}function handlePasswordSubmit(){const _0x5b8716=_0x12a679;try{if(btoa(passwordInput[_0x5b8716(0x1e5)][_0x5b8716(0x173)]())===GOD_MODE_PASS_B64)passwordPrompt['classList'][_0x5b8716(0x1e9)]('modal-visible'),passwordInput[_0x5b8716(0x1e5)]='',isTesterMenuOpen=!![],updateTesterMenuState(),testerMenu[_0x5b8716(0x221)][_0x5b8716(0x16e)]=_0x5b8716(0x258);else throw new Error(_0x5b8716(0x1b0));}catch(_0x39f6d7){passwordInput[_0x5b8716(0x1e5)]='',passwordPrompt[_0x5b8716(0x214)][_0x5b8716(0x235)](_0x5b8716(0x222)),setTimeout(()=>passwordPrompt['classList'][_0x5b8716(0x1e9)](_0x5b8716(0x222)),-0x1e16*0x1+-0x189+0x2193);}}function cancelPasswordPrompt(){const _0x98c855=_0x12a679;passwordPrompt['classList'][_0x98c855(0x1e9)](_0x98c855(0x195)),passwordInput[_0x98c855(0x1e5)]='';if(isGameStarted)pauseGame(![]);}function updateTesterMenuState(){const _0x3e44df=_0x12a679;scoreInput[_0x3e44df(0x1e5)]=Math[_0x3e44df(0x20a)](score),testerGhostCheckbox[_0x3e44df(0x17c)]=isGhostEnabled,testerGridCheckbox[_0x3e44df(0x17c)]=isGridEnabled,testerMusicCheckbox[_0x3e44df(0x17c)]=isMusicEnabled,testerEvilCheckbox['checked']=isEvilMode;}setup();
</script>
</body>
</html>

