<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blockgame</title>


<!-- PRECONNECT HINT: Tells the browser to set up a connection to YouTube in the background for a faster click-through -->
<link rel="preconnect" href="https://www.youtube.com">

<style>
    body {
        background-color: #0d0d0d; color: #eee; font-family: 'Courier New', Courier, monospace;
        /* FLEXBOX CENTERING REMOVED - This is the key fix for mobile layout */
        min-height: 100vh; margin: 0; 
        padding: 2px;
        box-sizing: border-box; 
        overflow: hidden; 
        -webkit-tap-highlight-color: transparent;
    }
    canvas { 
        /* NEW ABSOLUTE CENTERING - This is the new, more robust method */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        
        background-color: #000; 
        border: none; 
        transition: background-color 0.5s ease; 
        max-width: 100%; 
        max-height: 100%; 
    }
    
    /* --- UI OVERLAY CONTAINER --- */
    #ui-overlay-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 5;
    }

    /* --- NEW PROGRESS BAR UI --- */
    #progress-bar-container {
        /* FIX 1: Changed position to 'fixed' to ensure visibility on all devices, especially mobile. */
        position: fixed; 
        top: 0;
        left: 0;
        width: 100%;
        height: 2px; /* A little thicker for visibility */
        background-color: #333;
        z-index: 8;
        display: none; /* Hidden by default */
    }
    #progress-bar {
        height: 100%;
        width: 100%;
        background-color: #2ECC40; /* Default green */
        transition: width 0.2s linear, background-color 0.5s ease;
    }
    /* Zone-specific colors */
    #progress-bar.red-zone { background-color: #FF4136; }
    #progress-bar.rainbow-zone { background-image: linear-gradient(to right, #FF4136, #FFDC00, #2ECC40, #7FDBFF, #F012BE); }
    #progress-bar.ninja-zone { background-color: #7FDBFF; }
    #progress-bar.alphabet-zone { background-color: #F012BE; }
    /* Warning state for "Zone Incoming" */
    #progress-bar.warning {
        animation: pulse-warning 1.5s infinite ease-in-out;
    }
    @keyframes pulse-warning {
        0% { background-color: #FF851B; }
        50% { background-color: #FF4136; }
        100% { background-color: #FF851B; }
    }


    /* --- Base Modal Styles --- */
    .modal-overlay {
        display: flex; flex-direction: column;
        position: absolute; top: 50%; left: 50%; 
        transform: translate(-50%, -150%);
        opacity: 0;
        visibility: hidden;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out, visibility 0s 0.3s;
        background-color: #1a1a1a;
        border: 3px solid #fff;
        box-shadow: 0 0 0 3px #000, 0 0 0 6px #fff, 6px 6px 0 6px rgba(0,0,0,0.5);
        text-align: center; z-index: 10;
        padding: 20px 30px;
        width: 90vw; 
        max-width: 450px; 
        max-height: 90vh; 
        overflow-y: auto;
        color: #fff;
        pointer-events: auto; /* Modals are clickable again */
    }
    .modal-overlay.modal-visible {
        transform: translate(-50%, -50%);
        opacity: 1;
        visibility: visible;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }
    .modal-overlay h1, .modal-overlay h2 {
        font-size: 2.5em;
        margin: 0 0 10px 0;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 3px 3px 0 #000;
    }
    #gameOverScreen h1 { color: #ff4136; }
    #passwordPrompt h2 { color: #0074d9; }
    .modal-overlay p { margin: 5px 0 15px 0; font-size: 1.2em; }
    #scoreDetails { font-size: 1em; color: #aaa; margin-top: -10px; }

    /* --- ENHANCED START MENU --- */
    #startScreen {
        position: relative; 
        background-image: 
            repeating-linear-gradient(#282828 0 1px, transparent 1px 100%),
            repeating-linear-gradient(90deg, #282828 0 1px, transparent 1px 100%);
        background-size: 20px 20px;
        overflow: hidden; /* Keep canvas contained */
    }
    #startScreen.modal-visible {
        transform: translate(-50%, -50%);
        transition: opacity 0.3s ease-out;
    }
    #startMenuCanvas {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: -1; /* Place it behind the content */
        opacity: 0.15; /* Make it a subtle background effect */
    }
    #logoTitle {
        display: grid;
        justify-content: center;
        gap: 4px;
        margin-bottom: 20px;
    }
    .logo-pixel {
        width: 10px;
        height: 10px;
        background-color: transparent;
    }
    .logo-pixel.lit {
        background-color: #FFDC00; /* Yellow title color */
        box-shadow: 0 0 8px #FFDC00;
    }
    
    /* --- SOUNDTRACK CREDIT --- */
    #soundtrack-credit {
        position: fixed; /* Pinned to the viewport */
        bottom: 15px;
        left: 15px;
        font-size: 0.9em;
        color: #fff;
        opacity: 0.6;
        text-shadow: 1px 1px 2px #000;
        z-index: 6; /* Above the canvas overlay, below modals */
        pointer-events: auto; /* Make the link clickable */
        transition: opacity 0.5s ease;
    }
    #soundtrack-credit a {
        color: #FFDC00;
        text-decoration: none;
        font-weight: bold;
    }
    #soundtrack-credit a:hover {
        text-decoration: underline;
    }


    /* --- TACTILE BUTTONS --- */
    .btn {
        --btn-bg: #555; --btn-highlight: #777; --btn-shadow: #333; --btn-hover-bg: #606060;
        background-color: var(--btn-bg); color: #fff; 
        font-family: 'Courier New', Courier, monospace; font-size: 1.2em;
        text-transform: uppercase; letter-spacing: 1px;
        text-shadow: 1px 1px 0px var(--btn-shadow);
        padding: 12px 24px; margin-top: 20px;
        cursor: pointer; position: relative;
        border: none;
        border-top: 3px solid var(--btn-highlight);
        border-left: 3px solid var(--btn-highlight);
        border-bottom: 3px solid var(--btn-shadow);
        border-right: 3px solid var(--btn-shadow);
        transition: transform 0.1s ease-out, background-color 0.1s ease-out;
    }
    .btn:hover { background-color: var(--btn-hover-bg); transform: translateY(-2px); }
    .btn:active {
        transform: translateY(1px);
        border-top: 3px solid var(--btn-shadow);
        border-left: 3px solid var(--btn-shadow);
        border-bottom: 3px solid var(--btn-highlight);
        border-right: 3px solid var(--btn-highlight);
        filter: brightness(0.95);
    }
    #restartButton, #startButton { --btn-bg: #2ECC40; --btn-highlight: #3bdd4b; --btn-shadow: #1e8729; --btn-hover-bg: #35d345; }
    #submitPasswordButton { --btn-bg: #0074d9; --btn-highlight: #0088ff; --btn-shadow: #005299; --btn-hover-bg: #0081f2; }
    
    /* --- Custom Checkboxes --- */
    .options-list { margin-top: 20px; display: flex; flex-direction: column; gap: 15px; }
    .checkbox-item {
        position: relative;
        padding-left: 35px;
        min-height: 24px;
        display: flex;
        align-items: center;
        text-align: left;
        font-size: 1em;
        color: #ccc;
    }
    .checkbox-item input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0; width: 0;
    }
    .checkbox-item label { cursor: pointer; }
    .checkbox-item .checkmark {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        height: 14px; width: 14px;
        background-color: #111;
        border: 3px solid #888;
        transition: border-color 0.2s;
    }
    .checkbox-item .checkmark::after {
        content: "";
        position: absolute;
        display: block;
        left: 3px; top: 3px;
        width: 8px; height: 8px;
        background: #FFDC00;
        transform: scale(0);
        transition: transform 0.1s ease-in-out;
    }
    .checkbox-item input:checked ~ .checkmark::after {
        transform: scale(1);
    }
    .checkbox-item input:focus ~ .checkmark {
        border-color: #fff;
    }

    /* --- Custom Volume Sliders --- */
    .slider-item {
        display: flex; align-items: center; gap: 15px;
        text-align: left;
    }
    .slider-item.disabled { opacity: 0.5; pointer-events: none; }
    .slider-item label {
        font-size: 1em; color: #ccc;
        min-width: 50px;
    }
    .slider-container {
        flex-grow: 1; position: relative;
        height: 24px; display: flex; align-items: center;
    }
    .slider-track {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        width: 100%;
        height: 10px;
        background-color: #111;
        border-top: 2px solid #333;
        border-left: 2px solid #333;
        border-bottom: 2px solid #777;
        border-right: 2px solid #777;
        box-sizing: border-box;
    }
    .slider-fill {
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        height: 10px;
        background-color: #FFDC00;
    }
    .slider-thumb {
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 16px; height: 24px;
        background-color: #555;
        border-top: 2px solid #777;
        border-left: 2px solid #777;
        border-bottom: 2px solid #333;
        border-right: 2px solid #333;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .slider-input {
        position: absolute;
        width: 100%; height: 100%;
        margin: 0;
        opacity: 0;
        cursor: pointer;
    }
    .slider-container:hover .slider-thumb { background-color: #666; }
    
    /* --- Custom Inputs --- */
    .input-styled {
        padding: 10px; font-size: 1.1em; background-color: #111; color: #eee;
        border: 3px solid #555; 
        width: 100%; box-sizing: border-box;
        margin: 15px 0; text-align: center;
        font-family: 'Courier New', Courier, monospace;
    }
    .input-styled:focus { outline: none; border-color: #FFDC00; }
    .shake { animation: shake 0.5s; border-color: #FF4136 !important; }
    @keyframes shake {
        10%, 90% { transform: translate(calc(-50% - 1px), -50%); } 
        20%, 80% { transform: translate(calc(-50% + 2px), -50%); }
        30%, 50%, 70% { transform: translate(calc(-50% - 4px), -50%); } 
        40%, 60% { transform: translate(calc(-50% + 4px), -50%); }
    }

    /* --- Tester Menu Styles --- */
    #testerMenu {
        display: none; position: absolute; top: 20px; left: 20px;
        background-color: #1a1a1a;
        border: 3px solid #0074d9;
        box-shadow: 4px 4px 0px #000;
        color: #eee;
        padding: 0;
        z-index: 20; font-size: 0.8em; max-width: 250px;
        pointer-events: auto; /* Tester menu is clickable */
    }
    .tester-header {
        background-color: #0074d9;
        color: #fff;
        padding: 5px 10px;
        position: relative;
    }
    #testerMenu h2 { margin: 0; font-size: 1.4em; text-shadow: 2px 2px 0 #000;}
    .tester-content { padding: 15px; }
    #testerMenu div { margin: 15px 0; }
    #testerMenu label, #testerMenu h3 { display: block; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; font-size: 0.9em;}
    #testerMenu input[type="number"], #testerMenu select, #testerMenu button {
        -webkit-appearance: none; appearance: none;
        width: 100%;
        background-color: #111; color: #eee;
        border: 2px solid #444; padding: 8px;
        font-family: 'Courier New', Courier, monospace; font-size: 1em;
        box-sizing: border-box;
    }
    #testerMenu select {
         background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ccc%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
         background-repeat: no-repeat; background-position: right 8px top 50%; background-size: .65em auto;
    }
    #testerMenu button { background-color: #333; cursor: pointer; margin-top: 5px; transition: background-color 0.2s; }
    #testerMenu button:hover { background-color: #555; }
    #closeTesterMenu {
        position: absolute; top: 0; right: 0;
        background: #FF4136; color: #fff;
        border: none; border-left: 3px solid #0074d9;
        font-size: 1.5em; line-height: 1; padding: 5px 8px;
        cursor: pointer; text-shadow: 2px 2px 0 #000;
    }
</style>

</head>
<body>
<canvas id="tetrisCanvas"></canvas>
<!-- Audio elements for dynamic music and sounds -->
<audio id="musicNormal" loop><source src="sound/music_normal.mp3" type="audio/mpeg"></audio>
<audio id="musicRed" loop><source src="sound/music_red.mp3" type="audio/mpeg"></audio>
<audio id="musicRainbow" loop><source src="sound/music_rainbow.mp3" type="audio/mpeg"></audio>
<audio id="musicNinja" loop><source src="sound/music_ninja.mp3" type="audio/mpeg"></audio>

<div id="ui-overlay-container">
    <div id="progress-bar-container">
        <div id="progress-bar"></div>
    </div>

    <div id="startScreen" class="modal-overlay">
        <canvas id="startMenuCanvas"></canvas>
        <div id="logoTitle"></div>
        <p>Hi-Score: <span id="startHiScore">0</span></p>
        <div class="options-list">
            <div class="checkbox-item">
                <input type="checkbox" id="startGhostCheckbox" data-option="ghost">
                <span class="checkmark"></span>
                <label for="startGhostCheckbox">Ghost Piece (halves score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="startGridCheckbox" data-option="grid">
                <span class="checkmark"></span>
                <label for="startGridCheckbox">Show Grid (-10% score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="startEvilCheckbox" data-option="evil">
                <span class="checkmark"></span>
                <label for="startEvilCheckbox">Evil Mode (no saves)</label>
            </div>
             <hr style="border-color: #444; width: 100%;">
            <div class="checkbox-item">
                <input type="checkbox" id="startMusicCheckbox" data-option="music">
                <span class="checkmark"></span>
                <label for="startMusicCheckbox">Enable Sound</label>
            </div>
            <div class="slider-item" data-option="music-slider">
                <label for="startMusicVolume">Music</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="startMusicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
            <div class="slider-item" data-option="sfx-slider">
                <label for="startSfxVolume">SFX</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="startSfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
        <button id="startButton" class="btn">Start Game</button>
    </div>

    <div id="gameOverScreen" class="modal-overlay">
        <h1>Game Over</h1>
        <p>Your Score: <span id="finalScore">0</span></p>
        <p>Hi-Score: <span id="hiScore">0</span></p>
        <p id="scoreDetails">Multiplier: <span id="scoreMultiplier">1.00x</span></p>
        <div id="options" class="options-list">
            <div class="checkbox-item">
                <input type="checkbox" id="ghostCheckbox" data-option="ghost">
                <span class="checkmark"></span>
                <label for="ghostCheckbox">Ghost Piece (halves score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="gridCheckbox" data-option="grid">
                <span class="checkmark"></span>
                <label for="gridCheckbox">Show Grid (-10% score)</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="evilCheckbox" data-option="evil">
                <span class="checkmark"></span>
                <label for="evilCheckbox">Evil Mode (no saves)</label>
            </div>
            <hr style="border-color: #444; width: 100%;">
             <div class="checkbox-item">
                <input type="checkbox" id="musicCheckbox" data-option="music">
                <span class="checkmark"></span>
                <label for="musicCheckbox">Enable Sound</label>
            </div>
            <div class="slider-item" data-option="music-slider">
                <label for="musicVolume">Music</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="musicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
            <div class="slider-item" data-option="sfx-slider">
                <label for="sfxVolume">SFX</label>
                <div class="slider-container">
                    <div class="slider-track"></div>
                    <div class="slider-fill"></div>
                    <div class="slider-thumb"></div>
                    <input type="range" id="sfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
        <button id="restartButton" class="btn">Restart</button>
    </div>

    <div id="passwordPrompt" class="modal-overlay">
        <h2>Access Test Menu</h2>
        <input type="password" id="passwordInput" class="input-styled" placeholder="Enter Password...">
        <div id="passwordButtons">
            <button id="submitPasswordButton" class="btn">Submit</button>
            <button id="cancelPasswordButton" class="btn">Cancel</button>
        </div>
    </div>

    <div id="testerMenu">
        <div class="tester-header">
            <button id="closeTesterMenu" title="Close Menu">Ã—</button>
            <h2>Tester Menu</h2>
        </div>
        <div class="tester-content">
            <div>
                <label for="scoreInput">Set Score:</label>
                <input type="number" id="scoreInput" min="0">
                <button id="setScoreButton">Set</button>
                <button id="levelUpButton" title="Adds 1000 to current score">+1000</button>
            </div>
             <div>
                <h3>Zone Controls</h3>
                <button id="endSafePeriodButton">End Safe Period</button>
                <button id="startSafePeriodButton">Start New Safe Period</button>
                <button id="completeZoneButton">Complete Zone</button>
            </div>
            <div>
                <label for="zoneSelect">Force Zone (Override):</label>
                <select id="zoneSelect">
                    <option value="AUTO">Auto (Time/Score)</option>
                    <option value="NORMAL">Normal</option>
                    <option value="RED">Red Zone</option>
                    <option value="RAINBOW">Rainbow Zone</option>
                    <option value="NINJA">Ninja Zone</option>
                    <option value="ALPHABET">Alphabet Zone</option>
                </select>
            </div>
            <div>
                <label for="pieceSelect">Force Next Piece:</label>
                <select id="pieceSelect">
                    <option value="0">Random</option>
                    <option value="7">I (Line)</option>
                    <option value="2">O (Square)</option>
                    <option value="1">T</option>
                    <option value="4">L</option>
                    <option value="3">J</option>
                    <option value="6">S</option>
                    <option value="5">Z</option>
                </select>
            </div>
             <div class="options-list">
                <h3>Toggles (Live)</h3>
                <div class="checkbox-item">
                    <input type="checkbox" id="testerGhostCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerGhostCheckbox">Ghost Piece</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="testerGridCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerGridCheckbox">Show Grid</label>
                </div>
                 <div class="checkbox-item">
                    <input type="checkbox" id="testerMusicCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerMusicCheckbox">Sound</label>
                </div>
                 <div class="slider-item" data-option="music-slider">
                    <label for="testerMusicVolume">Music</label>
                    <div class="slider-container">
                        <div class="slider-track"></div>
                        <div class="slider-fill"></div>
                        <div class="slider-thumb"></div>
                        <input type="range" id="testerMusicVolume" class="slider-input music-slider-input" min="0" max="1" step="0.01">
                    </div>
                </div>
                <div class="slider-item" data-option="sfx-slider">
                    <label for="testerSfxVolume">SFX</label>
                    <div class="slider-container">
                        <div class="slider-track"></div>
                        <div class="slider-fill"></div>
                        <div class="slider-thumb"></div>
                        <input type="range" id="testerSfxVolume" class="slider-input sfx-slider-input" min="0" max="1" step="0.01">
                    </div>
                </div>
                 <div class="checkbox-item">
                    <input type="checkbox" id="testerEvilCheckbox">
                    <span class="checkmark"></span>
                    <label for="testerEvilCheckbox">Evil Mode</label>
                </div>
            </div>
            <div>
                <h3>Actions</h3>
                <button id="clearBoardButton">Clear Board</button>
            </div>
        </div>
    </div>
    
    <div id="soundtrack-credit">
        soundtrack by <a href="https://www.youtube.com/@Staphlo4718" target="_blank" rel="noopener noreferrer">@Staphlo</a>
    </div>
</div>

<script>
    const _0x580615=_0xf6ee;(function(_0x33155c,_0x2fad0f){const _0xb3eeec=_0xf6ee,_0x550e47=_0x33155c();while(!![]){try{const _0x180351=parseInt(_0xb3eeec(0x18a))/(-0xcf4+-0x8cb*0x1+0x1d0*0xc)*(-parseInt(_0xb3eeec(0x1c7))/(-0x1*-0x118c+-0x1*-0xc8b+-0x1e15))+parseInt(_0xb3eeec(0x185))/(-0x5db+-0xbc7+0x11a5*0x1)*(parseInt(_0xb3eeec(0xe1))/(-0xb5*-0x11+-0x203b*-0x1+-0x2c3c))+-parseInt(_0xb3eeec(0x15c))/(0x4cd+-0x58+0x2*-0x238)+parseInt(_0xb3eeec(0xf7))/(0x1002+-0x19d0+0x9d4)*(-parseInt(_0xb3eeec(0x15e))/(0xc4*-0x5+0x3*-0x17f+0x858))+parseInt(_0xb3eeec(0x128))/(-0x2*0x1245+-0x1ac0*0x1+-0x2*-0x1fa9)+parseInt(_0xb3eeec(0xed))/(0x1f0b+-0x2*0x282+-0x19fe)+-parseInt(_0xb3eeec(0x121))/(-0x6e+-0x159e*-0x1+-0x1526);if(_0x180351===_0x2fad0f)break;else _0x550e47['push'](_0x550e47['shift']());}catch(_0x889108){_0x550e47['push'](_0x550e47['shift']());}}}(_0x4071,0x234bf+-0x5*-0x8563+-0x16806*-0x1));const canvas=document[_0x580615(0x179)](_0x580615(0x138)),ctx=canvas[_0x580615(0x1a8)]('2d'),startScreen=document['getElementById']('startScreen'),startButton=document['getElementById'](_0x580615(0x11b)),gameOverScreen=document[_0x580615(0x179)](_0x580615(0x1cf)),finalScoreEl=document['getElementById']('finalScore'),hiScoreEl=document['getElementById'](_0x580615(0xdd)),scoreMultiplierEl=document[_0x580615(0x179)]('scoreMultiplier'),startHiScoreEl=document['getElementById'](_0x580615(0xee)),restartButton=document[_0x580615(0x179)]('restartButton'),soundtrackCredit=document[_0x580615(0x179)]('soundtrack-credit'),progressBarContainer=document[_0x580615(0x179)](_0x580615(0x18c)),progressBar=document[_0x580615(0x179)](_0x580615(0x14e)),audioElements={'NORMAL':document[_0x580615(0x179)](_0x580615(0x149)),'RED':document[_0x580615(0x179)](_0x580615(0x139)),'RAINBOW':document['getElementById']('musicRainbow'),'NINJA':document[_0x580615(0x179)](_0x580615(0x111)),'ALPHABET':document[_0x580615(0x179)](_0x580615(0x149))};let currentMusic=null,musicVolume=parseFloat(localStorage['getItem']('tetrisMusicVolume'))||-0x1b3c+-0x1f23*0x1+0x3a5f+0.5,sfxVolume=parseFloat(localStorage[_0x580615(0x1ca)]('tetrisSfxVolume'))||-0xa57+-0xf0c+0x1963+0.7;const sfxChannels=[];let currentSfxChannel=0x1ed4*-0x1+-0x1c28+0x5*0xbcc;const NUM_SFX_CHANNELS=-0x26c9+0x1*-0x2581+0x1*0x4c52,startMenuCanvas=document[_0x580615(0x179)](_0x580615(0xe7)),startMenuCtx=startMenuCanvas[_0x580615(0x1a8)]('2d'),logoTitle=document[_0x580615(0x179)]('logoTitle');let bgAnimationInterval=null;const testerMenu=document[_0x580615(0x179)](_0x580615(0x167)),closeTesterMenu=document[_0x580615(0x179)](_0x580615(0x16b)),scoreInput=document[_0x580615(0x179)](_0x580615(0x119)),setScoreButton=document['getElementById'](_0x580615(0x1a2)),levelUpButton=document[_0x580615(0x179)](_0x580615(0x158)),zoneSelect=document[_0x580615(0x179)](_0x580615(0x15d)),pieceSelect=document[_0x580615(0x179)](_0x580615(0x178)),testerGhostCheckbox=document[_0x580615(0x179)](_0x580615(0x196)),testerGridCheckbox=document[_0x580615(0x179)](_0x580615(0x114)),testerMusicCheckbox=document['getElementById']('testerMusicCheckbox'),testerEvilCheckbox=document['getElementById'](_0x580615(0x11e)),clearBoardButton=document[_0x580615(0x179)](_0x580615(0x199)),passwordPrompt=document[_0x580615(0x179)](_0x580615(0x10b)),passwordInput=document[_0x580615(0x179)](_0x580615(0x1c8)),submitPasswordButton=document['getElementById'](_0x580615(0x19e)),cancelPasswordButton=document[_0x580615(0x179)](_0x580615(0xd8)),endSafePeriodButton=document[_0x580615(0x179)](_0x580615(0x15b)),startSafePeriodButton=document['getElementById'](_0x580615(0x13b)),completeZoneButton=document[_0x580615(0x179)]('completeZoneButton'),SOUNDS={'sfx':{'NORMAL':{'rotate':'sound/NORMAL/rotate.wav','lock':_0x580615(0x195),'harddrop':_0x580615(0x1a3),'clear':_0x580615(0xe6),'gameover':_0x580615(0x1d0),'click':_0x580615(0x109)},'RED':{'heartbeat':_0x580615(0x155),'scrape':_0x580615(0x1c5),'whisper1':_0x580615(0xfa),'whisper2':_0x580615(0xdc),'rotate':'sound/NORMAL/rotate.wav','harddrop':_0x580615(0x1a3),'clear':_0x580615(0xe6)},'RAINBOW':{'powerup':_0x580615(0xfc)},'NINJA':{'lightning':_0x580615(0x131)}}};let BLOCK_SIZE=-0x1231*-0x1+-0x160f+-0x1*-0x3df,isMobile=![],COLS,ROWS,board=[],score=0x4b*0x58+-0x2132+0x1a*0x49,hiScore=localStorage['getItem'](_0x580615(0x168))||-0x10b*-0x5+0x717+-0xc4e,currentPiece,gameLoopInterval,gameOverAnimationInterval,isGameOver=![],isGamePaused=![],isGameStarted=![],isGhostEnabled=![],isMusicEnabled=![],isEvilMode=![],isGridEnabled=![],currentZone=_0x580615(0x17a),gameSpeed=-0xe*-0x1bd+0x1312+-0x2974,iceSlipTimeout=null;const SAFE_PERIOD_DURATION=(0x3*-0x39f+-0x1*-0x3af+0x733)*(0x112d+-0x363+-0xd8e)*(-0x7f3+-0x14e9*0x1+0x1062*0x2),ZONE_PROGRESS_REQUIREMENT=-0x1f54+0x7*-0x451+0x14f*0x35,ZONE_ENTRY_CHANCE=0x6f6+0xd*0x2ef+-0x2d19+0.15;let isSafePeriodActive=!![],safePeriodStartTime=0x5*0x174+-0x333+0x3*-0x15b,zoneStartScore=0x21cb+-0x212e+-0x9d;const INITIAL_SPEED=0x1*-0x1e57+-0x1d*-0x15+-0x7*-0x446,RED_ZONE_SPEED=-0x2628+-0x76e*-0x1+0x1fb4,MIN_SPEED=-0xe*0x264+-0xf47+0x30f1,DESKTOP_COLS_DIVISOR=-0x1ddc+0x146+0x1cbe,DESKTOP_ROWS_DIVISOR=-0xd8c+-0x9b*0x2b+-0x1*-0x27c7,MOBILE_COLS_DIVISOR=-0xb89+-0x12e*0x1a+0x2a43,MOBILE_ROWS_DIVISOR=0x1c6e*0x1+0x59e+-0xa4*0x35;let whiteBlock={'x':null,'y':null},whiteBlockSpawnChance=0x2d8+-0x1ef+0xe9*-0x1+0.07,forcedPieceState={'type':null,'count':0x0},flashTimeout=null,flashAnimation=null;const GOD_MODE_PASS_B64=_0x580615(0x123);let isTesterMenuOpen=![],isZoneForced=![],forcedNextPieceIndex=0x2*0x96d+0x13a*-0x1b+0x722*0x2;const COLORS=[null,_0x580615(0x12b),_0x580615(0x191),'#0074D9',_0x580615(0x108),_0x580615(0x1a4),_0x580615(0xdf),_0x580615(0x145)],RED_COLORS=[null,'#5A0000',_0x580615(0x141),_0x580615(0x107),'#A30000',_0x580615(0x134),_0x580615(0x14f),'#E63946'],SHAPES=[[],[[-0xe50+0x8a6+-0x5ab*-0x1,-0xbc*-0x1c+0x1b7*0x16+-0x3a49*0x1,0x14bb+-0x3ad*0x1+0x3*-0x5af],[-0xe37+0x22d*-0x8+0x653*0x5,0x22eb+-0x17bd*-0x1+-0x5b*0xa5,-0x420+-0x1*0x137d+0x179d]],[[-0xb57+0x2*0x45a+-0x2a4*-0x1,-0xd0d+0xc6f*0x1+0x9f],[0x1913+0x1fdd+-0x113*0x35,0x3f8*0x2+0x24fc+-0x2ceb]],[[-0x26c4+0x872+0x1e52,-0x31*0x29+0x4*-0x36d+-0xac7*-0x2,0x17ba+-0x9b*0x2+0x2c*-0x83],[-0x65b*0x2+-0x2120+0x2dd6,-0x246d+-0x7*-0x37c+0xc0a*0x1,-0x678+0x49d+0x1db],[-0x1b1e+0x14f3+-0x5*-0x13c,0x10a8+0x7*0x4c1+-0x31ee,-0x2*0x11f5+-0x1fba+0x43a4]],[[-0x10*-0x199+0x19d8+-0x3368,-0x541*0x1+-0x1fb0*-0x1+-0x18e*0x11,0xd7*-0x2a+-0x269f+0x1*0x49e5],[0x25d8+-0x708+-0x1ed*0x10,-0x187*-0xd+0x1185+-0x427*0x9,-0x767*-0x3+-0x11a+-0x3*0x709],[-0x1e52*0x1+0x1*0x7ea+0x1668,0x1c99*0x1+-0x398*0x9+-0x5*-0xc0,-0x2*0xf8+0x143b*0x1+0x925*-0x2]],[[-0x20d1*0x1+0x16*0x50+-0x1*-0x19f1,-0xef4+-0x1*0x25e3+0x34d8,-0x2433+0x521+0x637*0x5],[-0x4c+-0x11*0xff+0x113c,-0xa*-0x1da+-0xe61+0x17*-0x2e,-0xd*-0x66+-0x12a3+0xd75]],[[-0x601+0x54a*0x7+-0x1f04,-0x1*0x1f01+-0x18db+-0x7*-0x7fb,-0x11*0x233+-0xa98+0x2ffb],[0x46a+0x351+0x1*-0x7bb,-0x689*-0x4+-0x14d7+0x1c4*-0x3,0x7*0x47+0x1a16+-0x1c06]],[[-0x1f6*0xd+-0x4*0x493+0x2bca,-0xa2a*-0x3+0xa2b+-0x28a9,-0x26f+0xcf9+0x2*-0x545,-0x169f+0x1c*-0x2b+-0x577*-0x5],[0x171f+-0x1ffd+0x8df,0x1*-0x23d4+0x1534*-0x1+0x3909,-0xf91*-0x2+0x1c8e+-0x3baf,0x1ce8+0x1*0x153b+-0x3222],[0x3*0x35f+0xa5b*0x1+-0x51e*0x4,0x247+0x5*-0xb3+0x1a*0xc,-0x22*0xea+-0x2c5*-0x1+0x1c4f,-0x653+-0x3*0x6e5+0x1b02*0x1],[0x48+0x343+-0x38b,-0x2648+0xbe*0x33+0x6e,-0x2035+-0xba2+0x2bd7,0x2*0x1358+0x131a*-0x2+0x7c*-0x1]]],LETTER_SHAPES={'A':[[0x5f3*0x6+0x2049+0x43fb*-0x1,0x67*-0x17+-0x1094+0xceb*0x2,-0x8e8*-0x2+0x36*0x55+-0x23be],[-0x4e1*0x3+0x16e5*-0x1+0x2589,-0x13de+0x7f6+0x1*0xbe9,-0x8d8+0x235*-0xb+-0x4*-0x848],[-0x1f80+0x15f5+0x98c*0x1,0x22b*0x5+0x116b+-0x1c42,-0x1*-0x8f5+0x1*-0x2126+0xa3*0x26],[0x1f*-0xf7+-0x1*-0x12ff+0xd7*0xd,0x2*-0x363+0x4*0x1a9+0x22,0x19fd*-0x1+-0xcaa*0x1+-0x4d5*-0x8]],'B':[[0x6*-0x393+-0x2269+-0x8f*-0x64,0xaf5+-0x882+-0x272,0x1b9e+-0x14fe+0x8*-0xd4],[0xc68+-0x2*0x1299+0xb*0x241,-0x749+-0x1812+0x1f5b*0x1,0x1162+0x7ca*0x2+-0x20f5*0x1],[0x1*-0x21f5+0x1d5a+0x49c,-0x3*0xd03+-0x1*-0x1912+0xc*0x12a,-0x169a+-0x58d*0x1+-0x1c27*-0x1],[0x1bed*-0x1+0x1461+-0x78d*-0x1,0x216b+0x4*-0x107+-0x1*0x1d4f,-0x1225+-0x65*0x56+0x3414],[0x3a9*-0x7+-0x17a+0xd8d*0x2,0x17*-0x157+-0x6f5+-0x1*-0x25c7,0x1b5e+-0x6*-0x1b1+-0x1*0x2584]],'C':[[-0x1*-0xa26+0x67*0x10+-0x1096,-0xaa*-0x14+-0x56*0x8+0xa97*-0x1,0x61e*-0x2+-0x17b4*0x1+0x23f1],[0x5*0x6c9+-0x1*-0x14ef+-0x36db,-0x2*0x16+-0x2236+-0x1*-0x2262,-0x2*0x63+-0x3*-0x439+-0x57*0x23],[0x859*0x1+0x2510+-0x1*0x2d68,-0x1942+0x247f+-0xb3d,-0x18f5+-0xd9c+-0x2691*-0x1],[-0x21b7+0x4*0x830+0xf7,-0x5*-0x1+-0x79f*-0x2+0x2a*-0x5d,-0x1463+0x507+0xf5d*0x1]],'E':[[-0x2240+0xf3*0x11+0x60a*0x3,-0x199*-0x16+-0x398*0x4+-0x14c5,0x65*-0x5c+-0x20c0*-0x1+0x9*0x65],[0x1*0x793+-0x832+0x5*0x20,0x355*0x6+0xbd7*0x2+-0x104*0x2b,-0x153*-0x2+0x1613+0x18b9*-0x1],[0x17+-0x2641+-0x262b*-0x1,0x2*-0xbb9+0x3ce+0x13a5,0x6a3+-0x1e55+0x17b2],[-0x1f84+0x217d+-0x1f8,0x5*0x320+0x1740+-0x26e0,0x1f*-0x61+0x2492+-0x18d3],[0x1965+-0x8*0x27f+-0x56c,0x564+-0x1e22+0x18bf,-0x5b7+-0xb8+0x1*0x670]],'F':[[0x18*-0xb8+0xe20+0x321,-0x1333+0x1481+-0x14d,0x918+0x1*0xdf4+0x170b*-0x1],[-0x21ef+0x1d39+0x4b7,0x47*0x5f+0x1*-0x1f1b+0x3*0x196,-0x6d*0x1d+0x5c6+0x693],[0x1162+0x1efc+-0x101f*0x3,0xaa8+0x1e8b+-0x2932*0x1,0x1246*0x2+0x8e5+-0x1*0x2d71],[-0xe1*-0xc+0xb4d+-0x15d8,-0x1fe8+0x1a8a+-0xe5*-0x6,-0x25f7+-0x1b0d+-0x2*-0x2082],[0x1*-0x139e+-0x438*-0x9+-0x1259,0x26a7+0x6df+-0x2d86*0x1,-0x1*0x49d+-0x2a8+0x745]],'H':[[-0x8f3+0x2110+0x607*-0x4,-0xe5*-0xb+-0xd*0x2dd+0x1b62,-0x20*0xd9+-0x15ba+0x30db],[0x3*-0x475+-0x2*-0x83c+-0x318,0x17e4+0x1*-0x5e2+-0x1202,-0x24*-0xb8+-0xbf*0x2f+0x1*0x932],[0x1b6*-0xb+0x1*0x259f+-0x4*0x4b3,-0x789+-0x1871+-0x1ffb*-0x1,0x1f0+-0xd*0xf5+-0x21a*-0x5],[0x253b+0x1*0x92d+0x2e67*-0x1,-0x75a*0x1+0x35a+-0x8*-0x80,0x22*-0x63+-0x1*-0x7ca+-0x1*-0x55d],[0x256+0x1f3d*0x1+-0x2192,-0x16*0x5+0x8*0x16+-0x42,-0x3*0x2d3+0xb30+-0x2b6]],'I':[[-0x1f0d+-0x1f60+0x3d*0x106,-0xd*0x287+0x245e+-0x382,0x90e*0x1+0x4*0x83d+-0x2a01],[0xa03+0x371*0x3+-0x1456,-0x49a+-0x2449*-0x1+-0x1fae,0x1*0x1fc+-0x22b5+0x20b9],[0xb3*0x1b+0x2*-0x11a5+0x1069,0xa7b*0x2+0x73*-0x39+0x4a6,-0x25*-0x102+0x209*-0xd+-0xad5],[-0x11b*-0x15+0x107+-0x183e,0x4*0x5cb+0x187+-0x18b2,-0x1e85+0x1*0x180f+0x676*0x1],[0x1f1*0x6+-0x1c27*0x1+0x1082,0x4*0x51a+0x6b7+-0x1b1e,0x23e+0xa2f+-0xc6c*0x1]],'J':[[0x8c2+0x1*0x61f+0xee1*-0x1,0x52*0x67+0x249c+-0x459a,0x34e*0xb+-0xd1*0x17+0x2*-0x8c9],[0x1951+0x695+0xff3*-0x2,0x245f*0x1+0x38d*-0xb+0x2b*0x10,-0x20e1+-0x1334+0x3416],[-0x30*0xbf+0x92e+0x1aa3,-0x21e6+-0x9ae+-0x1*-0x2b94,-0x1d5f+-0x2c*0x7d+-0x23*-0x174],[-0x3*0x28d+0xa16+0x26e*-0x1,-0x71*-0x15+-0xcfb+0x3b7,-0xc22+0xb*-0x1f9+0x21d6]],'L':[[-0x11cf+0x1*-0xe21+0x25*0xdd,0x2c5*-0x6+0x210c+0x2*-0x837,0x2251+-0x1513+-0xd3e],[-0x4f2+0x35*0x49+-0xa2a,-0x12f7+-0x4*-0x41+0x11f3,0x10d8+0x2287*0x1+0x1*-0x335f],[0x2a*0xa+-0x27e*-0x1+-0x97*0x7,-0x39b*0x6+-0x239a+0x393c,-0x266f+0x5*-0x3d+0x13d0*0x2],[0x2e4+0x1*-0x25bd+0x22da,-0x1*0x103d+-0x5ab+0x15e9,-0xa3*-0x4+0x7d8+-0xa63]],'O':[[0x61e+0x4a*-0x73+-0x3*-0x90b,-0x1d6e*0x1+-0x256a+-0x1*-0x42d9],[-0x1cce+0xeb1*-0x1+0x2b80,0x1633+-0xe*0x1af+0x160]],'P':[[0x22*0x53+0x233a*-0x1+0x1835,0x7d1+-0xb*-0x109+0x1*-0x1333,0x1f3e+0x12c9+0x151*-0x26],[0x7c7+-0x797+-0x2f,-0x1*-0x1bbb+0x1917+0x34d2*-0x1,-0x301*-0x1+0xd*0xfd+-0xfd9],[0x1a15+0x7ed+-0x2201,-0x1*-0x1a75+-0xfe1+-0xa93,-0x1*-0x2232+0xa9*0x3b+-0x4924],[0xeb0+-0x11f2+0x5*0xa7,-0x80a+-0x1297+-0x191*-0x11,0x11f5+0x2*-0x5b5+0x14f*-0x5],[0x230+-0x1ee5+0x1cb6,0x1149+-0x21d*-0xb+-0x2888,-0x22d1+0x39*-0x2f+0x2d48]],'S':[[-0x90d+-0x2*-0x23b+0x497,0x5c*-0x33+0x4*0x2bc+0x765,-0x8e4+0x46b+0x47a],[0x1bd0+0xb*0x2e1+-0x1dbd*0x2,-0x14f9+-0xf42+0x243b,0xd8*0xb+-0x1fd8+0x26*0x98],[0x173+-0x1777+0x4*0x581,-0x983+0xd46+-0x3c2,0x1985+0x2*0xa13+-0x2dab],[-0x1d*-0x147+0x1fa5+0x896*-0x8,-0x1*-0x7b5+0x829+0x3*-0x54a,-0xee7+0x9*0x75+-0x3*-0x399],[-0x1632+-0x1df2*-0x1+-0x7bf,-0x6f*-0x43+-0x1631+0xf*-0x75,-0xd9e+-0x1*-0x1d07+0x3*-0x523]],'T':[[-0x1ec6+0x13d9*-0x1+-0x6c*-0x78,0x341+-0x61*0x5a+-0x167*-0x16,0x6a3+-0xa*-0x89+-0xbfc],[0x5*-0x431+0x1dbf+-0x5*0x1c2,0x6b8+0xa38+-0x10ef,0x68f+0xb*-0x2+0x679*-0x1],[-0x1551+-0x33*0xad+0x37c8,-0x911+-0x97d+0x128f,-0x1f39+-0x937*0x2+0x31a7],[0x814+0x5*0x199+0x1c9*-0x9,0x6f*-0x18+-0x395+0x2*0x6ff,0xa*0xda+0x891+-0x1115]],'U':[[-0x57c*0x6+0x132+0x1fb7,-0x5e+0x1*0xc10+0xbb2*-0x1,-0x12a+0x37*-0xa4+0x2467],[0x1859+-0x101*-0x3+-0x1b5b,0x210a+-0xa*0x202+-0x6*0x229,0xe8b+0x2*-0x3f3+-0xaa*0xa],[-0x1d54*-0x1+-0x15*0xe9+-0xa36*0x1,-0x1ae+0x1bb5*-0x1+0x1d63,0x15a8+-0x263a+0x1*0x1093],[-0x17aa+0x1827+-0x7c,0x809+-0x1*-0x14d5+-0x335*0x9,0x22e1*-0x1+0x4af+-0x35b*-0x9]],'Y':[[0x697+0x1*-0x904+0x26e,0x17b2+0x18b9+-0x306b,0xca8+0x1*-0xd4f+-0x2a*-0x4],[-0x4c6+-0x7c6+0xc8d,-0x1de4+-0x7a4*0x4+0x3c74,-0xf*0x232+-0x11+-0x210*-0x10],[0x59f*-0x1+-0x82a+-0xdc9*-0x1,0xf*0x1ba+0x11f2+-0x2bd7,0x4*0xc+-0x2650+0x2620],[0x18d*0xb+-0x229a+0x9*0x1f3,0x46*0x2f+-0xe27*-0x2+0x7*-0x5e1,-0x1bb1+-0x567*0x7+0x4182]],'Z':[[-0x21f4+0x153*0xd+-0x10be*-0x1,-0x1*-0x15a9+-0x24d+-0x3df*0x5,-0x1372*0x2+-0x246*0x5+0x3242*0x1],[-0xbf1+-0x4*0x33f+0x18ed*0x1,0x18ac+-0x62a+0x3*-0x62b,-0x51c+0x12b*0x1+0x3f1],[-0x3*-0x71+0x3b4+-0x507,-0x1f60+0x758+0x1809,0x191d+-0x178a+-0x193],[-0x8f+0x2ce*-0x3+-0x1*-0x8f9,-0x409+0x13d6+-0x7e6*0x2,0x25a7+-0x8*-0x6d+-0x290e]]},LETTER_COLOR_INDEX=0x195f+0xa75+-0x6*0x5f8,LOGO_DATA={'B':[[0x1*-0x1da+-0x1f0f+-0x1*-0x20ea,-0xb*-0x25+-0x1763+0x15cd,0x149*0x19+-0x1*0x957+-0x2*0xb65],[-0x8bc+0x230+0x68d,-0x2*-0x94f+-0x1d70+0xad2,0x4d*0x1+-0x57b*0x1+0x52f],[0xe5*0x28+-0x19*-0xe3+0x39f2*-0x1,0x16*-0x1b7+0x2166+0x455,-0x1*0x2227+0x1607+0xc20],[0x185*-0x7+0x164*0x7+0xe8,0x117c+0xf0*0x25+0x3ba*-0xe,-0x10d9+0xe5*-0x1+0xb*0x19d],[0xf*0xc8+-0x1bab*-0x1+-0x2762,-0x172a+-0xefd*-0x1+0x82e,-0x535+-0xc3*-0x7+-0x1*0x20]],'L':[[-0x1478+0x1*0x555+0xe4*0x11,-0x222c+0x2c*0x62+0x1154*0x1,0x3d*0x33+0x9ee+-0x1*0x1615],[0x109*0x1+-0x22cb+0x43*0x81,0xd*0x17+0x1ab*0x1+-0x16*0x21,0xbee+0xdda*0x2+-0x27a2],[-0x19dd+-0x43*-0x30+0x1a*0x83,-0xeef*0x1+0x2*0xeb6+-0xe7d,-0x3d8+-0x5*-0x16d+0x349*-0x1],[-0x1*0x2285+-0x11b*0x13+0xb1b*0x5,-0x1f3e+0x15d+0x1de2,0x18a0+0x1d42+-0x35e1]],'O':[[0x47d*-0x6+0x3*0xc5f+0xb*-0xed,-0x119*-0x19+-0x24*-0x34+-0x22c0,0x17fe+0xadf+-0x22dd],[-0x1d83+-0x1e81*-0x1+0xb*-0x17,-0x7*0x1a6+0x59*-0x5+0xd47,0x1af3+-0x1c85+0x193],[-0x78*-0x34+-0x8be+-0xfa1,-0x976+-0x3cb*0x3+0x14d7,-0xffd+-0x1*0x157f+0x7*0x55b],[0xa*-0x261+-0x791*-0x2+0x115*0x8,0x2383+-0x1*-0xd63+-0x30e5,0x3a9*0x8+0x1db5+-0x1*0x3afd]],'C':[[0x45c+-0x1ca3+0x235*0xb,-0x1e4d+-0x131d+0x1079*0x3,0x1862+-0x1*-0x833+0x56e*-0x6],[-0x14b*0x2+-0xf04+-0x119b*-0x1,0x4d1+-0x3f6+-0xdb,0x1d*0xef+-0xc37*0x2+-0x2a5],[0xf85+0xa3*0x8+-0x149c,0x3*-0x697+0x1b69+-0xa3*0xc,-0x6*0x487+0x41*0x8b+-0x821*0x1],[-0x19f9*0x1+0x1fd*-0xa+0x2ddb,-0xa24+0x7ed+0x238,0x1*-0x6e1+-0x1*0x18d1+0x1fb3*0x1]],'K':[[0x105*0x10+-0x16cf+-0xd*-0x80,-0x12f*0x6+-0x1*0x3f2+0xb0c,0x6b9*0x5+-0x20b4+0x2*-0x74],[0x1c64+-0x3b*0x1f+-0x153e,0xbbc+0x1*-0x14+0x9d*-0x13,0x2330+0x24ab+-0x47db],[0xd3*-0x8+0x17f2+-0x1159,-0x629+0x1ca6+-0x167c,-0x1*-0x2006+0x35b*-0x6+-0xbe4],[0x11*0x239+0x9e7+0xfe5*-0x3,0xde1+0x1500+-0x22e1,0x1*-0x2667+-0x13d6+-0x3a3e*-0x1]],'G':[[-0x2b1+-0x15*-0x10f+-0x138a,-0x5d9*-0x3+-0x1*-0x2329+-0x34b3,-0x45*0x8f+-0x1577+0x3c03],[0x91f*-0x1+-0x18*0x5e+0x11f0,0x3*0x583+0xd*-0x1bb+-0x2*-0x2fb,0x6*0x1dc+-0x671*-0x2+-0x180a*0x1],[-0x183d+-0x21c7*0x1+0x3a05,0x9bf+-0x2299+-0x1*-0x18da,0x766*-0x5+-0x3b*0x11+0x28ea],[0x25f6*-0x1+-0x1339*-0x2+0x1*-0x7c,-0x3*-0x64d+-0x55a+-0xd8c,-0x258c+-0x162b+0x4e*0xc4]],'A':[[-0x1*0x7c9+-0x24dd+0x17d*0x1e,0x256a*-0x1+-0x10d0+-0x1*-0x363b,0x49a*-0x8+-0xf38+0x168*0x25],[0x13*0xd1+0xfd5+-0x1f57,0x2653+0x65*-0x39+-0x7eb*0x2,0x1cbd+-0x137*-0x1f+0x2e3*-0x17],[-0xd25+0xb53*0x1+0x1d3,-0x3c9*-0x7+0x3*0xba8+-0x3d76,-0x17aa+-0x232b+0x376*0x11],[0x2b*0x25+-0x7df+0x5*0x55,0x6d*0xc+0x1*-0x22f9+-0x8b*-0x37,-0x2405+0x1d94+-0x14a*-0x5]],'M':[[0x1766+0x1c1*-0x1+-0x15a4,0x943+-0x1b2c+0x11e9,0x66d+-0x1e33*-0x1+-0x249f],[0x3ce*0x1+0x1*0x19b1+-0x32*0x97,-0x21e9*0x1+-0x1*0x1085+0x326f,-0x7*-0x6d+0x6c1*0x1+-0x9bb],[0xe69+0xad3+-0x193b,-0x1903+-0x1*-0x1c81+-0x95*0x6,-0x1e01*-0x1+-0x222b+0x42b],[0x19f5+0x6d2+0x2*-0x1063,0x1*0xe33+-0x7f2+-0x641*0x1,0x3*0x74f+-0x935*-0x1+0x1*-0x1f21]],'E':[[0xefb*-0x2+0x1ea9+0x59*-0x2,0x19b5*0x1+-0x100+-0x18b4,-0x31*-0x35+-0x551*0x5+0x3d*0x45],[-0x2663+0x7*-0x517+0x4a05,-0x4*-0x778+-0xa69+-0x1377,-0x20f8*0x1+-0xb*0x197+0x3275],[-0xe*-0x275+0x1404+0x3669*-0x1,-0x7*0x30e+0x10d+0x1456,-0x1204+0x1f92+-0xa*0x15b],[-0x5f+-0xbb9*0x2+0x17d2,-0xa*0xb5+-0xadd+0x1*0x11ef,-0xceb+0x176d+0xa82*-0x1],[-0x1a63+0x2*-0x10af+0x3bc2*0x1,0x3*-0xcc9+0x1*0x697+0x1fc5,-0x2df+0xe82*0x1+0x5d1*-0x2]]},LOGO_TEXT=['B','L','O','C','K','G','A','M','E'];function generateLogoTitle(){const _0x222ef6=_0x580615;logoTitle[_0x222ef6(0x132)]='';let _0x52b7a5=0xdeb+0x1*-0x2371+0x2*0xac3;const _0xf347de=document[_0x222ef6(0x1ae)]();LOGO_TEXT[_0x222ef6(0x1ab)]((_0x113c59,_0x4c7028)=>{const _0x30dd68=_0x222ef6,_0x2ee2b3=LOGO_DATA[_0x113c59];if(!_0x2ee2b3)return;const _0x4be835=_0x2ee2b3[-0x16e6+0x270+0x1*0x1476]['length'];_0x52b7a5+=_0x4be835;for(let _0x49844b=-0x1*0xb2b+0x1*0xb11+-0x2*-0xd;_0x49844b<_0x2ee2b3[_0x30dd68(0x176)];_0x49844b++){for(let _0x6daeaa=-0x1dff+0xb03*0x2+-0xd*-0x9d;_0x6daeaa<_0x2ee2b3[_0x49844b]['length'];_0x6daeaa++){const _0x4176fa=document[_0x30dd68(0x1a1)](_0x30dd68(0x12e));_0x4176fa[_0x30dd68(0x1aa)]=_0x30dd68(0x1b3);if(_0x2ee2b3[_0x49844b][_0x6daeaa]===-0x1cff+0x6f*0x59+-0x997)_0x4176fa['classList']['add'](_0x30dd68(0xe4));_0x4176fa['style'][_0x30dd68(0x190)]=_0x49844b+(0x2670+-0xb5a+-0x1b15),_0x4176fa[_0x30dd68(0x1b6)][_0x30dd68(0x13f)]=_0x52b7a5-_0x4be835+_0x6daeaa+(-0x6e1*-0x1+0x1dc5*0x1+0xc37*-0x3),_0xf347de[_0x30dd68(0x118)](_0x4176fa);}}if(_0x4c7028<LOGO_TEXT[_0x30dd68(0x176)]-(-0x4*-0x92d+0x1ac8+0x3f7b*-0x1))_0x52b7a5+=-0x220f+-0x40+0x2250;}),logoTitle[_0x222ef6(0x1b6)]['gridTemplateColumns']='repeat('+_0x52b7a5+',\x2010px)',logoTitle[_0x222ef6(0x118)](_0xf347de);}function initStartMenuAnimation(){const _0x3ec7e2=_0x580615;if(bgAnimationInterval)clearInterval(bgAnimationInterval);let _0x22d632=[];const _0x3a840f=-0x2b*-0x41+0x5d0+-0x10a7;startMenuCanvas['width']=startMenuCanvas['clientWidth'],startMenuCanvas['height']=startMenuCanvas[_0x3ec7e2(0x17d)];const _0x1c7fe4=Math['ceil'](startMenuCanvas['width']/_0x3a840f),_0x2aa8e5=Math[_0x3ec7e2(0x12c)](startMenuCanvas[_0x3ec7e2(0x1c0)]/_0x3a840f),_0xa1e686=()=>{const _0xd0859a=_0x3ec7e2;if(_0x22d632[_0xd0859a(0x176)]>0x6c3*0x1+0x4b2+-0xb70)return;const _0x2ee091=Math[_0xd0859a(0x10c)](Math['random']()*(SHAPES[_0xd0859a(0x176)]-(-0x4d*0x10+0x3*0xa89+-0x1aca)))+(-0x47f*0x1+-0x4*-0x6d6+-0x16d8),_0xd4f564=Math['floor'](Math['random']()*(COLORS['length']-(-0x1f28+0x1a3*-0xc+0x32cd)))+(-0x183f*-0x1+-0x19*0x106+0x158);_0x22d632[_0xd0859a(0x137)]({'shape':SHAPES[_0x2ee091],'color':COLORS[_0xd4f564],'x':Math['floor'](Math[_0xd0859a(0x16f)]()*(_0x1c7fe4-(0x100e+-0x583+-0xa88))),'y':-(0x22af*-0x1+-0xbc*-0xd+0x1927),'speed':0x5*-0x9f+0x4f*0x55+-0x1720+0.02+Math['random']()*(0xeb3+0x371*-0x1+-0xb*0x106+0.05)});},_0x58e00f=()=>{const _0x450e50=_0x3ec7e2;startMenuCtx[_0x450e50(0x10e)](-0x18be+-0x1*-0x856+-0x1*-0x1068,0x16b8+0x17e1+0x1*-0x2e99,startMenuCanvas[_0x450e50(0x159)],startMenuCanvas['height']),_0x22d632[_0x450e50(0x1ab)]((_0x1e229b,_0x5ae03d)=>{const _0x133e63=_0x450e50;_0x1e229b['y']+=_0x1e229b['speed'],_0x1e229b[_0x133e63(0x1b7)]['forEach']((_0x483703,_0x497033)=>_0x483703[_0x133e63(0x1ab)]((_0x364fab,_0xdbe712)=>{const _0x2be271=_0x133e63;_0x364fab>-0x967*-0x3+-0x4c7+-0x176e&&(startMenuCtx[_0x2be271(0x112)]=_0x1e229b['color'],startMenuCtx[_0x2be271(0xef)]((_0x1e229b['x']+_0xdbe712)*_0x3a840f,(_0x1e229b['y']+_0x497033)*_0x3a840f,_0x3a840f,_0x3a840f));}));if(_0x1e229b['y']*_0x3a840f>startMenuCanvas[_0x133e63(0x1c0)])_0x22d632[_0x133e63(0x1c3)](_0x5ae03d,-0x1377+0x1*-0xac1+0x3*0xa13);});if(Math['random']()<0x1d27*0x1+0x61a+-0x13*0x1db+0.05)_0xa1e686();};_0xa1e686(),bgAnimationInterval=setInterval(_0x58e00f,0x17f*0x11+-0x1f58+0xb*0x8b);}function playSound(_0x7c26b8){const _0x47ace0=_0x580615;if(!isMusicEnabled||!isGameStarted)return;const _0x8223af=SOUNDS[_0x47ace0(0x1cd)][currentZone]&&SOUNDS[_0x47ace0(0x1cd)][currentZone][_0x7c26b8]||SOUNDS[_0x47ace0(0x1cd)][_0x47ace0(0x17a)][_0x7c26b8];if(_0x8223af){const _0x40ebef=sfxChannels[currentSfxChannel];_0x40ebef[_0x47ace0(0x15f)]=_0x8223af,_0x40ebef[_0x47ace0(0x142)]=sfxVolume,_0x40ebef[_0x47ace0(0xda)]()[_0x47ace0(0x194)](_0x3caab1=>console['warn'](_0x47ace0(0x17b)+_0x7c26b8+_0x47ace0(0xf6)+_0x8223af)),currentSfxChannel=(currentSfxChannel+(0x18f2+0xdb7*0x1+-0x26a8))%NUM_SFX_CHANNELS;}}function switchMusic(_0x418dab){const _0x3db319=_0x580615,_0x540628=_0x418dab||_0x3db319(0x17a),_0x3f70b8=audioElements[_0x540628];if(currentMusic===_0x3f70b8&&!_0x3f70b8[_0x3db319(0x14c)])return;Object[_0x3db319(0x174)](audioElements)[_0x3db319(0x1ab)](_0x3cfed1=>{_0x3cfed1!==_0x3f70b8&&(_0x3cfed1['pause'](),_0x3cfed1['currentTime']=-0xce4+0x4d9+-0x1d*-0x47);}),currentMusic=_0x3f70b8,currentMusic&&(currentMusic['volume']=musicVolume,currentMusic[_0x3db319(0x129)]=-0x1*-0x153d+0x491*-0x6+-0x629*-0x1,isMusicEnabled&&currentMusic[_0x3db319(0xda)]()[_0x3db319(0x194)](_0x396c09=>console[_0x3db319(0x1d1)](_0x3db319(0x127)+_0x540628)));}function shadeColor(_0x4cb004,_0x1247ef){const _0x2edba1=_0x580615;let _0x5eca4b=parseInt(_0x4cb004[_0x2edba1(0x19a)](0x2f*0x3d+0x3b*-0xc+-0x86e,0xc2*-0x7+-0x1c1*0x1+0x712),-0x1ff3+0x143*-0x10+0x775*0x7),_0x38d49f=parseInt(_0x4cb004[_0x2edba1(0x19a)](-0x1*-0x1f39+-0x1b5*-0x2+-0x22a0,-0x5*0x17+0x21fd+0x2185*-0x1),0x11b*-0x6+0x2307+-0x1c55),_0x18dd35=parseInt(_0x4cb004[_0x2edba1(0x19a)](-0x19d0+-0x6*-0x2b7+0x98b,-0x3*-0xb4c+0x200a+0x1*-0x41e7),-0x24f4+0x2331*-0x1+-0xe71*-0x5);_0x5eca4b=parseInt(_0x5eca4b*(-0x1be+0x1e85+-0x1c63+_0x1247ef)/(0x2*-0xb02+0xe63*-0x1+-0x24cb*-0x1)),_0x38d49f=parseInt(_0x38d49f*(0x1af0+-0x27*0x5b+-0xcaf+_0x1247ef)/(0x3ee*0x2+-0x307+-0x471)),_0x18dd35=parseInt(_0x18dd35*(-0x305*-0x4+-0x19b8+0xe08+_0x1247ef)/(-0x15ca+-0x3*0x3b3+0x2147)),_0x5eca4b=_0x5eca4b<-0x48*0x39+0x26f0+-0x1*0x15e9?_0x5eca4b:0x1145*-0x1+-0x6*-0x508+0x4*-0x2fb,_0x38d49f=_0x38d49f<0x1*0x222a+0x2600+-0x472b?_0x38d49f:-0x3*-0x79c+-0x1518+-0x3f*0x3,_0x18dd35=_0x18dd35<0x1*-0x1208+0x3*-0x538+0xd*0x2ab?_0x18dd35:0x1342+-0x132d*0x2+0x25*0x8b;const _0x1ba7f0=_0x5eca4b[_0x2edba1(0x177)](0x1*0x34c+0x7cd*-0x4+0x1bf8)['length']==-0x1*-0x13d4+-0x25e3+0x121*0x10?'0'+_0x5eca4b[_0x2edba1(0x177)](0x1816+0x12d*-0x12+-0x2dc):_0x5eca4b['toString'](0x1d8c+0x20da+-0x3e56),_0x5c2e9e=_0x38d49f[_0x2edba1(0x177)](-0x3f1*-0x1+0x2f9*-0x6+0x9*0x18d)['length']==-0x16e0+0xb38+-0xf*-0xc7?'0'+_0x38d49f[_0x2edba1(0x177)](0xdfb+-0x623+-0x7c8):_0x38d49f[_0x2edba1(0x177)](-0x218c+-0x5e2*0x4+0x35*0x114),_0x4b6b63=_0x18dd35[_0x2edba1(0x177)](0x240b*0x1+0x8*0x18e+0x1*-0x306b)[_0x2edba1(0x176)]==-0x1e0c+0x2ec+-0x5*-0x56d?'0'+_0x18dd35['toString'](-0x1ed0+0x1*0x26bc+-0x7dc):_0x18dd35[_0x2edba1(0x177)](0xd*-0x212+-0x23d3+0x3*0x14ef);return'#'+_0x1ba7f0+_0x5c2e9e+_0x4b6b63;}function drawBlock(_0x2c25e5,_0x4e7bec,_0x59e319){const _0x5b5034=_0x580615,_0x27b5d0=shadeColor(_0x59e319,-0x520*0x2+0x24ee+-0x50*0x55),_0x2a69ee=shadeColor(_0x59e319,-(-0x3*-0x6d1+0xa39+-0x1e84)),_0x94bc19=Math[_0x5b5034(0x161)](-0x3*0x436+0x515*-0x6+0x2b21,Math[_0x5b5034(0x10c)](BLOCK_SIZE/(-0x1eef+-0x1c61+-0x3b58*-0x1))),_0x1d8d2c=_0x2c25e5*BLOCK_SIZE,_0x26b518=_0x4e7bec*BLOCK_SIZE;ctx[_0x5b5034(0x112)]=_0x59e319,ctx[_0x5b5034(0xef)](_0x1d8d2c,_0x26b518,BLOCK_SIZE,BLOCK_SIZE),ctx['fillStyle']=_0x27b5d0,ctx[_0x5b5034(0xef)](_0x1d8d2c,_0x26b518,BLOCK_SIZE,_0x94bc19),ctx[_0x5b5034(0xef)](_0x1d8d2c,_0x26b518,_0x94bc19,BLOCK_SIZE),ctx[_0x5b5034(0x112)]=_0x2a69ee,ctx['fillRect'](_0x1d8d2c+_0x94bc19,_0x26b518+BLOCK_SIZE-_0x94bc19,BLOCK_SIZE-_0x94bc19,_0x94bc19),ctx[_0x5b5034(0xef)](_0x1d8d2c+BLOCK_SIZE-_0x94bc19,_0x26b518,_0x94bc19,BLOCK_SIZE-_0x94bc19);}class Piece{constructor(_0x5f4d9a,_0x526ac0){const _0x24e468=_0x580615;this[_0x24e468(0x1b7)]=_0x5f4d9a,this[_0x24e468(0x1ac)]=_0x526ac0,this['x']=-0x3*0x740+-0xbfe+0x21be,this['y']=0x248c+0x952+-0x72*0x67,this[_0x24e468(0x103)]='DOWN';}[_0x580615(0x104)](_0x4fa3a5=![]){const _0x245ce3=_0x580615;if(_0x4fa3a5){ctx['fillStyle']='rgba(255,255,255,0.2)',this[_0x245ce3(0x1b7)][_0x245ce3(0x1ab)]((_0x214f92,_0x1a25fe)=>_0x214f92['forEach']((_0x3804db,_0x2bcd9b)=>{const _0x1a839c=_0x245ce3;_0x3804db>-0xffe+0x1*0x2655+-0x1657&&ctx[_0x1a839c(0xef)]((this['x']+_0x2bcd9b)*BLOCK_SIZE,(this['y']+_0x1a25fe)*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);}));return;}this[_0x245ce3(0x1b7)][_0x245ce3(0x1ab)]((_0x570b6f,_0x5d300d)=>{const _0x5a9f3b=_0x245ce3;_0x570b6f[_0x5a9f3b(0x1ab)]((_0x98b156,_0x54f1b9)=>{const _0x20ec8e=_0x5a9f3b;if(_0x98b156>0x185f*-0x1+0xb24+0xd3b){let _0x45850b;switch(currentZone){case _0x20ec8e(0x1a7):ctx[_0x20ec8e(0x112)]=_0x20ec8e(0x125),ctx[_0x20ec8e(0xef)]((this['x']+_0x54f1b9)*BLOCK_SIZE,(this['y']+_0x5d300d)*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);return;case _0x20ec8e(0x1bf):_0x45850b=RED_COLORS[this[_0x20ec8e(0x1ac)]];break;case _0x20ec8e(0xff):_0x45850b=COLORS[Math[_0x20ec8e(0x10c)](Math[_0x20ec8e(0x16f)]()*(COLORS[_0x20ec8e(0x176)]-(-0xc04+0x1bba+0x1*-0xfb5)))+(-0x264e*0x1+-0x1987*-0x1+0xcc8)];break;default:_0x45850b=COLORS[this[_0x20ec8e(0x1ac)]];break;}drawBlock(this['x']+_0x54f1b9,this['y']+_0x5d300d,_0x45850b);}});});}[_0x580615(0x100)](_0x5b4f92,_0xab01cb){this['x']+=_0x5b4f92,this['y']+=_0xab01cb;}[_0x580615(0x197)](){const _0x5c3e2e=_0x580615,_0x1e5b05=this['shape'][-0x181b+0x20a*-0x4+0x2043][_0x5c3e2e(0x172)]((_0x1bde98,_0x240be7)=>this['shape'][_0x5c3e2e(0x172)](_0x379cf5=>_0x379cf5[_0x240be7]))['reverse'](),_0x3b93e0=this[_0x5c3e2e(0x1b7)],_0x33358c=this['x'],_0x12f667=this['y'];this[_0x5c3e2e(0x1b7)]=_0x1e5b05;let _0x5ce1f7=-0x82e+-0x1606+0x2bf*0xb;while(this[_0x5c3e2e(0xd6)]()){if(this['gravityDirection']===_0x5c3e2e(0x1bd)){this['x']+=_0x5ce1f7,_0x5ce1f7=-(_0x5ce1f7+(_0x5ce1f7>0x23*0xd+-0x3c9*0x7+-0x18b8*-0x1?0x96c+0x2488*-0x1+0x1*0x1b1d:-(0x3b5*-0xa+0x38b*-0x3+-0x2*-0x17da)));if(Math['abs'](_0x5ce1f7)>this[_0x5c3e2e(0x1b7)][-0x1c97+-0x625*-0x2+0x104d][_0x5c3e2e(0x176)]+(-0xb98+-0x1191+-0x1d2a*-0x1)){this[_0x5c3e2e(0x1b7)]=_0x3b93e0,this['x']=_0x33358c,this['y']=_0x12f667;return;}}else{this['y']+=_0x5ce1f7,_0x5ce1f7=-(_0x5ce1f7+(_0x5ce1f7>-0x7e0+0x490+0x1a8*0x2?-0x1f*-0x6b+0x2dc*-0xd+0x1838:-(0x1*-0x55d+-0x1*0xf5+0x653)));if(Math[_0x5c3e2e(0x1b0)](_0x5ce1f7)>this[_0x5c3e2e(0x1b7)][_0x5c3e2e(0x176)]+(0x3d9*0x1+0xc1+0x1*-0x499)){this[_0x5c3e2e(0x1b7)]=_0x3b93e0,this['x']=_0x33358c,this['y']=_0x12f667;return;}}}playSound(_0x5c3e2e(0x197)),checkWhiteBlockCollision();}[_0x580615(0xd6)](){const _0x44c2c0=_0x580615;for(let _0x4e1b23=-0xcd*0x2a+-0x58*-0x2+0x1079*0x2;_0x4e1b23<this[_0x44c2c0(0x1b7)][_0x44c2c0(0x176)];_0x4e1b23++){for(let _0x3f3766=-0xc1*-0x2+-0x484+0x302;_0x3f3766<this[_0x44c2c0(0x1b7)][_0x4e1b23]['length'];_0x3f3766++){if(this[_0x44c2c0(0x1b7)][_0x4e1b23][_0x3f3766]>-0x1b37*-0x1+-0x166*0x1+-0x19d1){let _0x3a3476=this['x']+_0x3f3766,_0x4b8e9e=this['y']+_0x4e1b23;if(_0x3a3476<0x12*-0x15b+-0x151b+0x2d81||_0x3a3476>=COLS||_0x4b8e9e>=ROWS||board[_0x4b8e9e]&&board[_0x4b8e9e][_0x3a3476]>-0x5*0x146+0x65d*0x1+0x1*0x1)return!![];}}}return![];}}function saveState(){const _0x51f220=_0x580615;if(isGameOver||!currentPiece||isEvilMode)return;const _0x1fa265={'board':board,'currentPiece':{'shape':currentPiece[_0x51f220(0x1b7)],'colorIndex':currentPiece[_0x51f220(0x1ac)],'x':currentPiece['x'],'y':currentPiece['y'],'gravityDirection':currentPiece[_0x51f220(0x103)]},'score':score,'currentZone':currentZone,'COLS':COLS,'ROWS':ROWS,'whiteBlockSpawnChance':whiteBlockSpawnChance,'forcedPieceState':forcedPieceState,'isSafePeriodActive':isSafePeriodActive,'safePeriodStartTime':safePeriodStartTime,'zoneStartScore':zoneStartScore};localStorage['setItem'](_0x51f220(0x182),JSON['stringify'](_0x1fa265));}function loadState(){const _0x2353fe=_0x580615;if(isEvilMode)return![];const _0x5bbfca=localStorage[_0x2353fe(0x1ca)](_0x2353fe(0x182));if(!_0x5bbfca)return![];const _0x53d956=JSON[_0x2353fe(0xfd)](_0x5bbfca);if(_0x53d956[_0x2353fe(0x1bc)]===undefined)return![];const _0x3e412d=Math[_0x2353fe(0x10c)]((document[_0x2353fe(0x12d)][_0x2353fe(0x181)]-(-0x726+0xe6b*-0x2+-0x600*-0x6))/BLOCK_SIZE),_0x16a69a=Math[_0x2353fe(0x10c)]((document[_0x2353fe(0x12d)]['clientHeight']-(0xa6*-0x2+0xda*0x1+0x3b*0x2))/BLOCK_SIZE),_0x477e39=_0x53d956[_0x2353fe(0xf3)],_0x46ad44=_0x53d956[_0x2353fe(0x1c6)],_0x17e14f=Array[_0x2353fe(0xdb)]({'length':_0x16a69a},()=>Array(_0x3e412d)[_0x2353fe(0x198)](-0x1d4+0x5c5*-0x6+0x2472));for(let _0x1e87cc=-0x18ce+-0x2704+0x3fd2;_0x1e87cc<Math[_0x2353fe(0x19b)](_0x16a69a,_0x46ad44);_0x1e87cc++){for(let _0x2169a8=0x37*0xad+-0x1424+-0x1107;_0x2169a8<Math[_0x2353fe(0x19b)](_0x3e412d,_0x477e39);_0x2169a8++){const _0x504e51=_0x1e87cc+(_0x46ad44-_0x16a69a>0xf47*0x1+-0x19a6+0xa5f?_0x46ad44-_0x16a69a:0x766*-0x5+-0xc13+0x3111);_0x53d956[_0x2353fe(0x136)][_0x504e51]&&(_0x17e14f[_0x1e87cc][_0x2169a8]=_0x53d956[_0x2353fe(0x136)][_0x504e51][_0x2169a8]||-0x243d+-0x1*0x44a+0x2887);}}board=_0x17e14f,COLS=_0x3e412d,ROWS=_0x16a69a,score=_0x53d956[_0x2353fe(0x115)],currentZone=_0x53d956[_0x2353fe(0x133)],whiteBlockSpawnChance=_0x53d956[_0x2353fe(0x117)]||0xf7f*0x1+-0x1*-0x1be9+-0x4*0xada+0.07,forcedPieceState=_0x53d956[_0x2353fe(0x1cb)]||{'type':null,'count':0x0},isSafePeriodActive=_0x53d956['isSafePeriodActive'],safePeriodStartTime=_0x53d956[_0x2353fe(0x1bc)],zoneStartScore=_0x53d956[_0x2353fe(0x146)];const _0x31ba69=_0x53d956[_0x2353fe(0xe0)];currentPiece=new Piece(_0x31ba69['shape'],_0x31ba69[_0x2353fe(0x1ac)]),currentPiece['y']=_0x31ba69['y']-(_0x46ad44>_0x16a69a?_0x46ad44-_0x16a69a:0x2581*-0x1+-0x126c+0x37ed),currentPiece['x']=_0x31ba69['x'],currentPiece[_0x2353fe(0x103)]=_0x53d956[_0x2353fe(0xe0)][_0x2353fe(0x103)]||'DOWN';currentPiece['x']+currentPiece[_0x2353fe(0x1b7)][0x134e*-0x1+-0x1*-0x53+-0x71*-0x2b]['length']>_0x3e412d&&(currentPiece['x']=_0x3e412d-currentPiece[_0x2353fe(0x1b7)][0x1*-0x2601+0xf97+0x166a][_0x2353fe(0x176)]);currentPiece['x']=Math[_0x2353fe(0x161)](-0x1220+-0x1*-0xd9f+0x481,currentPiece['x']);while(currentPiece[_0x2353fe(0xd6)]()){currentPiece['y']--;if(currentPiece['y']<-(0x19a*0xd+-0x9*0xcb+-0xdaa)){currentPiece=null;break;}}if(!currentPiece)spawnNewPiece();return!![];}function clearSaveState(){const _0x3006f6=_0x580615;localStorage[_0x3006f6(0x1a5)](_0x3006f6(0x182));}function startGame(){const _0x2a83bd=_0x580615;bgAnimationInterval&&(clearInterval(bgAnimationInterval),bgAnimationInterval=null);isGameStarted=!![],startScreen[_0x2a83bd(0x169)][_0x2a83bd(0x1a9)]('modal-visible'),soundtrackCredit[_0x2a83bd(0x1b6)][_0x2a83bd(0xe2)]='0',soundtrackCredit['style'][_0x2a83bd(0x143)]='none',pauseGame(![]),clearInterval(gameOverAnimationInterval),clearTimeout(iceSlipTimeout),stopFlashTimer(),isZoneForced=![],forcedNextPieceIndex=0x2193+0x79*0x35+0x7*-0x860,zoneSelect['value']=_0x2a83bd(0x1b8),pieceSelect[_0x2a83bd(0x1af)]=0x529*-0x1+0xb34+-0x60b,whiteBlock={'x':null,'y':null},forcedPieceState={'type':null,'count':0x0},whiteBlockSpawnChance=-0x31*0x3f+0xa42+0x1cd+0.07,isMobile=window[_0x2a83bd(0x180)]<0x2*-0x361+0x17e+-0x5c*-0x17;const _0x4eb192=isMobile?MOBILE_COLS_DIVISOR:DESKTOP_COLS_DIVISOR,_0x1fec5f=isMobile?MOBILE_ROWS_DIVISOR:DESKTOP_ROWS_DIVISOR;BLOCK_SIZE=Math[_0x2a83bd(0x161)](-0xb4d*-0x2+0x356+-0x19ef,Math[_0x2a83bd(0x19b)](Math[_0x2a83bd(0x10c)](window[_0x2a83bd(0x180)]/_0x4eb192),Math['floor'](window[_0x2a83bd(0xe8)]/_0x1fec5f)));if(!isEvilMode&&loadState()){}else{if(isEvilMode)clearSaveState();COLS=Math[_0x2a83bd(0x10c)]((document[_0x2a83bd(0x12d)][_0x2a83bd(0x181)]-(0x49d*0x5+-0x9c7+0x2*-0x6a3))/BLOCK_SIZE),ROWS=Math[_0x2a83bd(0x10c)]((document[_0x2a83bd(0x12d)]['clientHeight']-(-0x1d*-0x1a+-0x242c+0x213e))/BLOCK_SIZE),board=Array[_0x2a83bd(0xdb)]({'length':ROWS},()=>Array(COLS)[_0x2a83bd(0x198)](0x89*-0x2f+0x1*-0x1d53+0x367a)),score=0x1072+-0x4*0x887+0x11aa,currentZone=_0x2a83bd(0x17a),isSafePeriodActive=!![],safePeriodStartTime=Date[_0x2a83bd(0x124)](),zoneStartScore=0x1231*-0x2+-0x1d7a+-0x20ee*-0x2,spawnNewPiece();}isGameOver=![],gameOverScreen[_0x2a83bd(0x169)][_0x2a83bd(0x1a9)](_0x2a83bd(0x17c));let _0x1ea334;switch(currentZone){case _0x2a83bd(0x1bf):_0x1ea334=RED_ZONE_SPEED;break;default:_0x1ea334=INITIAL_SPEED;break;}setGameSpeed(_0x1ea334),switchMusic(currentZone),canvas['width']=COLS*BLOCK_SIZE,canvas['height']=ROWS*BLOCK_SIZE,pauseGame(![]),updateProgressBarUI(),draw();}function setup(){const _0x2f1d09=_0x580615;generateLogoTitle();for(let _0x31edc9=-0x1912+0x7b2+0x1160;_0x31edc9<NUM_SFX_CHANNELS;_0x31edc9++){sfxChannels[_0x2f1d09(0x137)](new Audio());}setupOptionCheckboxes(),setupVolumeSliders(),document[_0x2f1d09(0x166)](_0x2f1d09(0x162))[_0x2f1d09(0x1ab)](_0x11645a=>{const _0x22e970=_0x2f1d09;_0x11645a[_0x22e970(0x10d)](_0x22e970(0x192),()=>{const _0x450a73=_0x22e970;if(isMusicEnabled){const _0x489e1a=new Audio(SOUNDS[_0x450a73(0x1cd)][_0x450a73(0x17a)][_0x450a73(0x192)]);_0x489e1a['volume']=sfxVolume,_0x489e1a[_0x450a73(0xda)]()[_0x450a73(0x194)](_0x36dc52=>{});}});}),startButton[_0x2f1d09(0x10d)](_0x2f1d09(0x192),startGame),restartButton[_0x2f1d09(0x10d)](_0x2f1d09(0x192),()=>{clearSaveState(),startGame();});let _0x3f1617;window[_0x2f1d09(0x10d)](_0x2f1d09(0x165),()=>{clearTimeout(_0x3f1617),_0x3f1617=setTimeout(()=>{if(isGameStarted&&!isGameOver)saveState(),startGame();else!isGameStarted&&initStartMenuAnimation();},0x1*0xe36+-0x7f8+0x4*-0x151);}),window[_0x2f1d09(0x10d)](_0x2f1d09(0x106),saveState),document[_0x2f1d09(0x10d)]('keydown',_0x4417ab=>{const _0x564a02=_0x2f1d09;if(_0x4417ab[_0x564a02(0x171)]===_0x564a02(0xfb)){_0x4417ab[_0x564a02(0x1ce)](),requestGodMode();return;}if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x4417ab['preventDefault']();switch(_0x4417ab[_0x564a02(0x171)]){case'ArrowLeft':case _0x564a02(0xd7):handlePlayerMove(-(0x13ad*0x1+-0x129a+-0x112));break;case'ArrowRight':case _0x564a02(0xf0):handlePlayerMove(-0x1*-0x11d1+-0x3*0x194+-0xd14);break;case _0x564a02(0x1c2):case _0x564a02(0x16c):softDrop();break;case _0x564a02(0x1c1):case _0x564a02(0x19f):currentPiece['rotate'](),draw();break;case _0x564a02(0xf2):isGhostEnabled?softDrop():hardDrop();break;}});let _0x5ce5a4=0x1e7f+0x1576+0x2f*-0x11b,_0x16a05f=0x7fe+0x1c6c+-0x246a,_0x509ee6=0x125e+0xb5*-0xb+-0xa97,_0x267955=0x2*-0x3ff+-0x1*-0x5fb+0x203;canvas[_0x2f1d09(0x10d)]('touchstart',_0x521136=>{const _0x2acb08=_0x2f1d09;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x521136[_0x2acb08(0x1ce)](),_0x5ce5a4=_0x521136[_0x2acb08(0x120)][-0x739+0x1cfc+-0x15c3][_0x2acb08(0xe9)],_0x16a05f=_0x521136['changedTouches'][-0x91a+-0xe41+0x175b]['screenY'],_0x509ee6=currentPiece['x'],_0x267955=currentPiece['y'],clearTimeout(iceSlipTimeout);},{'passive':![]}),canvas['addEventListener'](_0x2f1d09(0x157),_0x3e0611=>{const _0x50bfdb=_0x2f1d09;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x3e0611[_0x50bfdb(0x1ce)]();let _0x60cce4=_0x3e0611[_0x50bfdb(0x120)][-0x201f+0xfb3*0x1+-0x4*-0x41b][_0x50bfdb(0xe9)]-_0x5ce5a4,_0x36b4ed=_0x3e0611[_0x50bfdb(0x120)][0x595*0x5+-0x149b+0xaa*-0xb][_0x50bfdb(0x122)]-_0x16a05f;const _0x1b62bb=currentPiece['x'],_0x222d6b=currentPiece['y'];currentPiece[_0x50bfdb(0x103)]===_0x50bfdb(0x1bd)?currentPiece['x']=_0x509ee6+Math[_0x50bfdb(0x193)](_0x60cce4/BLOCK_SIZE):currentPiece['y']=_0x267955+Math[_0x50bfdb(0x193)](_0x36b4ed/BLOCK_SIZE),currentPiece[_0x50bfdb(0xd6)]()&&(currentPiece['x']=_0x1b62bb,currentPiece['y']=_0x222d6b),checkWhiteBlockCollision(),draw();},{'passive':![]}),canvas[_0x2f1d09(0x10d)]('touchend',_0x5ba9be=>{const _0x7e2198=_0x2f1d09;if(isGameOver||!currentPiece||isGamePaused||!isGameStarted)return;_0x5ba9be[_0x7e2198(0x1ce)]();let _0x813da2=_0x5ba9be[_0x7e2198(0x120)][0x2*0x3d8+0x11d+-0x8cd][_0x7e2198(0xe9)]-_0x5ce5a4,_0x379a65=_0x5ba9be['changedTouches'][0xa98+-0x115a+0x6c2][_0x7e2198(0x122)]-_0x16a05f;const _0x5d5a3a=-0xc88+0x270c+-0x1a6b,_0x206b92=-0x608+-0x607*0x3+-0x13*-0x147,_0x35c2b2=0x1d*0xea+-0x3e*-0x7+-0x2c6*0xa;if(Math[_0x7e2198(0x1b0)](_0x813da2)<_0x5d5a3a&&Math[_0x7e2198(0x1b0)](_0x379a65)<_0x5d5a3a){currentPiece[_0x7e2198(0x197)](),draw();return;}let _0x3593e5=![],_0x52c515=0x1ced*-0x1+-0x3*0x99a+0x39bb;switch(currentPiece[_0x7e2198(0x103)]){case _0x7e2198(0x1bd):_0x379a65>Math[_0x7e2198(0x1b0)](_0x813da2)&&_0x379a65>_0x206b92&&(_0x3593e5=!![],_0x52c515=_0x379a65);break;case _0x7e2198(0x1ad):-_0x813da2>Math[_0x7e2198(0x1b0)](_0x379a65)&&-_0x813da2>_0x206b92&&(_0x3593e5=!![],_0x52c515=-_0x813da2);break;case _0x7e2198(0x144):_0x813da2>Math[_0x7e2198(0x1b0)](_0x379a65)&&_0x813da2>_0x206b92&&(_0x3593e5=!![],_0x52c515=_0x813da2);break;}if(_0x3593e5){if(!isGhostEnabled&&_0x52c515>_0x35c2b2)hardDrop();else softDrop();}}),submitPasswordButton['addEventListener'](_0x2f1d09(0x192),handlePasswordSubmit),passwordInput[_0x2f1d09(0x10d)](_0x2f1d09(0x13a),_0x26f894=>{const _0x2cc889=_0x2f1d09;_0x26f894[_0x2cc889(0x164)]==='Enter'&&(_0x26f894[_0x2cc889(0x1ce)](),handlePasswordSubmit());if(_0x26f894[_0x2cc889(0x164)]==='Escape')cancelPasswordPrompt();}),cancelPasswordButton[_0x2f1d09(0x10d)](_0x2f1d09(0x192),cancelPasswordPrompt),closeTesterMenu[_0x2f1d09(0x10d)]('click',requestGodMode),setScoreButton[_0x2f1d09(0x10d)](_0x2f1d09(0x192),()=>{const _0x1dfefd=_0x2f1d09;score=parseInt(scoreInput[_0x1dfefd(0x1af)])||0x17b9+-0xd*0x223+0x15a*0x3,updateProgressBarUI(),draw();}),levelUpButton[_0x2f1d09(0x10d)](_0x2f1d09(0x192),()=>{const _0x24e3e4=_0x2f1d09;score+=0x53d+0xb5*0x2b+0xc*-0x2a5,scoreInput[_0x24e3e4(0x1af)]=Math[_0x24e3e4(0x10c)](score),updateProgressBarUI(),draw();}),endSafePeriodButton[_0x2f1d09(0x10d)](_0x2f1d09(0x192),()=>{if(!isGameStarted)return;isSafePeriodActive=![],safePeriodStartTime=Date['now']()-SAFE_PERIOD_DURATION,updateProgressBarUI();}),startSafePeriodButton[_0x2f1d09(0x10d)](_0x2f1d09(0x192),()=>{const _0x26d1d6=_0x2f1d09;if(!isGameStarted)return;isSafePeriodActive=!![],safePeriodStartTime=Date['now'](),currentZone=_0x26d1d6(0x17a),switchMusic('NORMAL'),updateProgressBarUI();}),completeZoneButton[_0x2f1d09(0x10d)]('click',()=>{const _0x5c3149=_0x2f1d09;if(!isGameStarted||currentZone===_0x5c3149(0x17a))return;score=zoneStartScore+ZONE_PROGRESS_REQUIREMENT,updateProgressBarUI();}),zoneSelect[_0x2f1d09(0x10d)](_0x2f1d09(0x188),()=>{const _0x21840c=_0x2f1d09,_0x1641c5=zoneSelect[_0x21840c(0x1af)];stopFlashTimer();if(_0x1641c5===_0x21840c(0x1b8))isZoneForced=![],isSafePeriodActive=!![],safePeriodStartTime=Date['now'](),currentZone='NORMAL',switchMusic('NORMAL');else{isZoneForced=!![],currentZone=_0x1641c5;if(currentZone===_0x21840c(0x1a7))startFlashTimer();switchMusic(currentZone);}updateProgressBarUI(),draw();}),pieceSelect[_0x2f1d09(0x10d)](_0x2f1d09(0x188),()=>{const _0x48ba51=_0x2f1d09;forcedNextPieceIndex=parseInt(pieceSelect[_0x48ba51(0x1af)]);}),clearBoardButton['addEventListener'](_0x2f1d09(0x192),()=>{const _0x425db5=_0x2f1d09;board=Array[_0x425db5(0xdb)]({'length':ROWS},()=>Array(COLS)[_0x425db5(0x198)](-0x18ed+0xd6*0x1+0x1817)),draw();}),testerGhostCheckbox[_0x2f1d09(0x10d)](_0x2f1d09(0x188),()=>{const _0x4d5712=_0x2f1d09;isGhostEnabled=testerGhostCheckbox['checked'],document[_0x4d5712(0x166)]('[data-option=\x22ghost\x22]')[_0x4d5712(0x1ab)](_0x4c73f1=>_0x4c73f1['checked']=isGhostEnabled),localStorage['setItem'](_0x4d5712(0x1c9),isGhostEnabled),draw();}),testerGridCheckbox[_0x2f1d09(0x10d)](_0x2f1d09(0x188),()=>{const _0x47f47b=_0x2f1d09;isGridEnabled=testerGridCheckbox[_0x47f47b(0x154)],document[_0x47f47b(0x166)](_0x47f47b(0x102))[_0x47f47b(0x1ab)](_0xd9099d=>_0xd9099d[_0x47f47b(0x154)]=isGridEnabled),localStorage[_0x47f47b(0x19d)]('tetrisGridEnabled',isGridEnabled),draw();}),testerMusicCheckbox[_0x2f1d09(0x10d)]('change',()=>{const _0x978807=_0x2f1d09;isMusicEnabled=testerMusicCheckbox['checked'],document['querySelectorAll'](_0x978807(0x1b4))[_0x978807(0x1ab)](_0x210c30=>_0x210c30[_0x978807(0x154)]=isMusicEnabled),localStorage[_0x978807(0x19d)](_0x978807(0x18f),isMusicEnabled),toggleMusic();}),testerEvilCheckbox[_0x2f1d09(0x10d)](_0x2f1d09(0x188),()=>{const _0x701f53=_0x2f1d09;isEvilMode=testerEvilCheckbox[_0x701f53(0x154)],document[_0x701f53(0x166)](_0x701f53(0x175))[_0x701f53(0x1ab)](_0x3c2c17=>_0x3c2c17['checked']=isEvilMode),localStorage[_0x701f53(0x19d)](_0x701f53(0xf9),isEvilMode);}),startHiScoreEl['textContent']=Math['floor'](hiScore),startScreen[_0x2f1d09(0x169)][_0x2f1d09(0x12f)](_0x2f1d09(0x17c)),setTimeout(initStartMenuAnimation,0xdbc+-0x8b5*0x3+0x1*0xc95);}function pauseGame(_0x5cda84){if(isGamePaused===_0x5cda84)return;isGamePaused=_0x5cda84,clearInterval(gameLoopInterval),gameLoopInterval=null,!isGamePaused&&!isGameOver&&(gameLoopInterval=setInterval(update,gameSpeed));}function setGameSpeed(_0xe954c7){if(!_0xe954c7||_0xe954c7<=-0x1ce3+0xa47*-0x1+0x272a)return;gameSpeed!==_0xe954c7&&(gameSpeed=_0xe954c7,!isGamePaused&&!isGameOver&&(clearInterval(gameLoopInterval),gameLoopInterval=setInterval(update,gameSpeed)));}function toggleMusic(){const _0x4335ae=_0x580615,_0x1a52c8=document['querySelectorAll'](_0x4335ae(0x186));if(isMusicEnabled){if(currentMusic)currentMusic['play']()[_0x4335ae(0x194)](_0x11c4dd=>{});_0x1a52c8['forEach'](_0x14a639=>_0x14a639[_0x4335ae(0x169)][_0x4335ae(0x1a9)](_0x4335ae(0x153)));}else Object[_0x4335ae(0x174)](audioElements)[_0x4335ae(0x1ab)](_0x350751=>_0x350751['pause']()),_0x1a52c8[_0x4335ae(0x1ab)](_0x1f3acf=>_0x1f3acf[_0x4335ae(0x169)][_0x4335ae(0x12f)](_0x4335ae(0x153)));}function setupOptionCheckboxes(){const _0x404575=_0x580615,_0x382b59=document[_0x404575(0x166)](_0x404575(0xf1));_0x382b59[_0x404575(0x1ab)](_0x111806=>{const _0x333c53=_0x404575,_0x1b86ca=_0x111806[_0x333c53(0xd9)]['option'],_0x3bc9c7='tetris'+(_0x1b86ca[_0x333c53(0xe5)](-0x42d*-0x7+0x73a+-0x99*0x3d)[_0x333c53(0xea)]()+_0x1b86ca[_0x333c53(0x18b)](-0x20a1+0xc2a+-0x418*-0x5))+_0x333c53(0x130),_0x233695=localStorage['getItem'](_0x3bc9c7)===_0x333c53(0x13d);_0x111806[_0x333c53(0x154)]=_0x233695;switch(_0x1b86ca){case _0x333c53(0x11d):isGhostEnabled=_0x233695;break;case _0x333c53(0x11f):isGridEnabled=_0x233695;break;case _0x333c53(0x1a6):isMusicEnabled=_0x233695;break;case _0x333c53(0x151):isEvilMode=_0x233695;break;}}),_0x382b59['forEach'](_0x14f39f=>{const _0xb222b0=_0x404575;_0x14f39f[_0xb222b0(0x10d)](_0xb222b0(0x188),_0x449381=>{const _0x15b20c=_0xb222b0,_0x2391c5=_0x449381[_0x15b20c(0x184)][_0x15b20c(0xd9)]['option'],_0x571541=_0x449381[_0x15b20c(0x184)][_0x15b20c(0x154)],_0x274f0e=_0x15b20c(0x189)+(_0x2391c5[_0x15b20c(0xe5)](0x5e3*-0x3+-0x814*0x2+-0x21d1*-0x1)[_0x15b20c(0xea)]()+_0x2391c5[_0x15b20c(0x18b)](-0x2*0x1eb+0x7c*0x2+0x2df))+_0x15b20c(0x130);switch(_0x2391c5){case _0x15b20c(0x11d):isGhostEnabled=_0x571541;break;case _0x15b20c(0x11f):isGridEnabled=_0x571541;break;case _0x15b20c(0x1a6):isMusicEnabled=_0x571541,toggleMusic();break;case _0x15b20c(0x151):isEvilMode=_0x571541;break;}localStorage['setItem'](_0x274f0e,_0x571541),document[_0x15b20c(0x166)](_0x15b20c(0x140)+_0x2391c5+'\x22]')['forEach'](_0x1d45d9=>{const _0x23d98f=_0x15b20c;_0x1d45d9[_0x23d98f(0x154)]=_0x571541;});if(isGameStarted&&!isGameOver)draw();});}),toggleMusic();}function setupVolumeSliders(){const _0x38c1d2=_0x580615,_0x100faf=document[_0x38c1d2(0x166)](_0x38c1d2(0x14a)),_0x28d919=document[_0x38c1d2(0x166)](_0x38c1d2(0x170)),_0x4e5456=(_0x230401,_0x40d561)=>{const _0x1b7bf2=_0x38c1d2;document[_0x1b7bf2(0x166)](_0x230401)['forEach'](_0x3f6568=>{const _0x56018d=_0x1b7bf2,_0x31b782=_0x3f6568[_0x56018d(0x17e)];_0x31b782[_0x56018d(0x14b)](_0x56018d(0x147))['style'][_0x56018d(0x159)]=_0x40d561*(-0x6c3+-0x1cb0+0x23d7)+'%',_0x31b782['querySelector'](_0x56018d(0xf4))[_0x56018d(0x1b6)]['left']=_0x40d561*(-0x25fb+-0x1601+0x2*0x1e30)+'%',_0x3f6568['value']=_0x40d561;});};_0x4e5456('.music-slider-input',musicVolume),_0x4e5456('.sfx-slider-input',sfxVolume),_0x100faf[_0x38c1d2(0x1ab)](_0xd1174a=>{const _0x26f219=_0x38c1d2;_0xd1174a[_0x26f219(0x10d)](_0x26f219(0x16e),_0x378fad=>{const _0x29358b=_0x26f219;musicVolume=parseFloat(_0x378fad[_0x29358b(0x184)][_0x29358b(0x1af)]);if(currentMusic)currentMusic[_0x29358b(0x142)]=musicVolume;localStorage[_0x29358b(0x19d)](_0x29358b(0x113),musicVolume),_0x4e5456(_0x29358b(0x14a),musicVolume);});}),_0x28d919['forEach'](_0x9a7635=>{const _0x2fe155=_0x38c1d2;_0x9a7635[_0x2fe155(0x10d)]('input',_0x553a57=>{const _0x4d0c79=_0x2fe155;sfxVolume=parseFloat(_0x553a57['target'][_0x4d0c79(0x1af)]),localStorage[_0x4d0c79(0x19d)](_0x4d0c79(0xfe),sfxVolume),_0x4e5456(_0x4d0c79(0x170),sfxVolume);});});}function addScore(_0x224266){const _0x283e8f=_0x580615,_0x49a8c8=COLS*ROWS;if(_0x49a8c8===-0x2*0xcdf+-0x18e6+0x7*0x73c)return;const _0x31a872=isMobile?MOBILE_COLS_DIVISOR*MOBILE_ROWS_DIVISOR:DESKTOP_COLS_DIVISOR*DESKTOP_ROWS_DIVISOR,_0x3a8de9=_0x31a872/_0x49a8c8,_0x3417f7=isGhostEnabled?0xb*0x2c+0x26b+-0x44f+0.5:-0x14d5+-0x1d60+0x3236,_0x93b0eb=isGridEnabled?-0xbf0*-0x1+0x4cb*0x4+-0x1f1c+0.9:0x5b7+0x266*0x8+0xc73*-0x2;score+=Math[_0x283e8f(0x12c)](_0x224266*_0x3a8de9*_0x3417f7*_0x93b0eb);}function getWorstPiece(_0x4ad900){const _0x2bf81a=_0x580615;let _0x5833fe=[];for(let _0x4e852=-0x24a5+-0xb65+0x300b;_0x4e852<SHAPES[_0x2bf81a(0x176)];_0x4e852++){let _0xff79f4=Infinity;const _0x5baa9f=SHAPES[_0x4e852];for(let _0x528a8b=0xbb8+-0xe*0x268+0xafc*0x2;_0x528a8b<0xdd7+0xb9d*-0x1+0x11b*-0x2;_0x528a8b++){let _0x22dc5f=new Piece(_0x5baa9f,_0x4e852);for(let _0x222030=0x1cb4+0xd14+-0x29c8;_0x222030<_0x528a8b;_0x222030++)_0x22dc5f[_0x2bf81a(0x197)]();for(let _0x47ae2f=-(-0x20c9+0x2438+0x1*-0x36d);_0x47ae2f<COLS;_0x47ae2f++){let _0x7a2216=new Piece(_0x22dc5f[_0x2bf81a(0x1b7)],_0x4e852);_0x7a2216['x']=_0x47ae2f;while(!_0x7a2216[_0x2bf81a(0xd6)]())_0x7a2216['move'](-0x2bf+-0x2*0xb2e+0x191b,0x1213+0xadf+-0x1f*0xef);_0x7a2216[_0x2bf81a(0x100)](0x1674+0x24*-0x1c+-0x1284,-(0x12ad+0x3fe+-0x16aa));if(_0x7a2216['y']<-0x3*0x30d+-0x141c+0x1d43)continue;let _0x5685b5=![];for(let _0x5eba3f=-0x1d*0x94+-0x1eb*0x2+0x149a;_0x5eba3f<_0x7a2216[_0x2bf81a(0x1b7)][_0x2bf81a(0x176)];_0x5eba3f++){for(let _0x2200e4=-0x23ee+0xfaf*0x1+0x143f;_0x2200e4<_0x7a2216[_0x2bf81a(0x1b7)][_0x5eba3f][_0x2bf81a(0x176)];_0x2200e4++){if(_0x7a2216[_0x2bf81a(0x1b7)][_0x5eba3f][_0x2200e4]>-0x1b0d*-0x1+0x6a2+-0x21af*0x1&&(_0x7a2216['x']+_0x2200e4<0xef*0x2+0x21*-0x6f+0xc71||_0x7a2216['x']+_0x2200e4>=COLS)){_0x5685b5=!![];break;}}if(_0x5685b5)break;}if(_0x5685b5)continue;const _0x298bc1=board[_0x2bf81a(0x172)](_0x19f9ed=>[..._0x19f9ed]);_0x7a2216[_0x2bf81a(0x1b7)][_0x2bf81a(0x1ab)]((_0x2aa001,_0x2ee973)=>_0x2aa001[_0x2bf81a(0x1ab)]((_0x3fc2c4,_0xc575c5)=>{_0x3fc2c4>0x20*-0xc1+0x11fe+0x13a*0x5&&(_0x298bc1[_0x7a2216['y']+_0x2ee973]&&(_0x298bc1[_0x7a2216['y']+_0x2ee973][_0x7a2216['x']+_0xc575c5]=_0x3fc2c4));}));let _0x4d1f55=-0x2b*-0x1d+0x1a42+0x1f21*-0x1,_0x2a310f=_0x298bc1[_0x2bf81a(0x116)](_0x27ff33=>{const _0x426ac5=_0x2bf81a;if(_0x27ff33[_0x426ac5(0x1b9)](_0x16beb5=>_0x16beb5>-0xa3*0x1+-0xa*-0x265+-0x174f))return _0x4d1f55++,![];return!![];});while(_0x2a310f[_0x2bf81a(0x176)]<ROWS){_0x2a310f[_0x2bf81a(0x152)](Array(COLS)[_0x2bf81a(0x198)](0xba4+-0x236f*-0x1+0x2f13*-0x1));}const _0x5e595f=evaluateBoard(_0x2a310f,_0x4d1f55);_0x5e595f<_0xff79f4&&(_0xff79f4=_0x5e595f);}}_0x5833fe[_0x2bf81a(0x137)]({'pieceIndex':_0x4e852,'score':_0xff79f4});}_0x5833fe['sort']((_0x4c73f2,_0x1a6a96)=>_0x1a6a96[_0x2bf81a(0x115)]-_0x4c73f2['score']);const _0x91da58=Math['random']();let _0x34d3ea;if(_0x91da58<0x2691+-0x1*-0x24bf+-0x4b50+0.65)_0x34d3ea=_0x5833fe[0x653+-0x9f3+-0x20*-0x1d][_0x2bf81a(0xe3)];else{if(_0x91da58<-0x1e2d+-0xa79+0x28a6+0.9)_0x34d3ea=_0x5833fe[0x5eb*0x1+0x1*-0x1292+0xca8]['pieceIndex'];else _0x34d3ea=_0x5833fe[-0x1fe5*0x1+0x16*-0x5+-0x1*-0x2055]['pieceIndex'];}_0x4ad900(_0x34d3ea);}function evaluateBoard(_0x211368,_0xf91519=0x19a*-0x8+-0x151a+-0xb4e*-0x3){const _0x4698a0=_0x580615;let _0x63cec0=0x1*-0x1015+0x1bd*-0x10+0x2be5,_0x9de7f=-0x3da*-0x1+0xc4a+-0x1024,_0x29a264=-0x1f51+-0x1*-0x3d+0xa5c*0x3,_0x41168c=-0x2685+0x2544+0x141;const _0x5b2e60=new Array(COLS)['fill'](-0x1028+-0x1ae3+0x3*0xe59);for(let _0x517960=-0x2075+0x899+0xbee*0x2;_0x517960<COLS;_0x517960++){for(let _0xcf7a1d=-0x39c+-0x1a73+0x1e0f;_0xcf7a1d<ROWS;_0xcf7a1d++){if(_0x211368[_0xcf7a1d][_0x517960]>0xda2+0x1f*-0xb+-0xc4d){_0x5b2e60[_0x517960]=ROWS-_0xcf7a1d;break;}}}_0x63cec0=_0x5b2e60[_0x4698a0(0x187)]((_0x2241c2,_0x3124e7)=>_0x2241c2+_0x3124e7,-0x1*-0x219d+0x1*-0x213f+0x1*-0x5e);const _0x46f1d9=Math[_0x4698a0(0x161)](-0x15f+-0xc2*0x1d+0x1759,..._0x5b2e60);for(let _0x4618a3=0x11d1+0x2042+-0x3213;_0x4618a3<COLS;_0x4618a3++){for(let _0x1b38d3=ROWS-_0x5b2e60[_0x4618a3]+(-0x89b*0x2+0x2677+-0x1540);_0x1b38d3<ROWS;_0x1b38d3++){if(_0x211368[_0x1b38d3][_0x4618a3]===-0x5e*0x49+-0x19d0+-0x349e*-0x1)_0x9de7f++;}}for(let _0x5c0417=-0x736*0x4+-0x6e0+-0x3*-0xbe8;_0x5c0417<COLS-(0x2111+0x1*0x405+0x35f*-0xb);_0x5c0417++){_0x29a264+=Math[_0x4698a0(0x1b0)](_0x5b2e60[_0x5c0417]-_0x5b2e60[_0x5c0417+(-0xdb5+-0x11*-0x86+0x4d0)]);}for(let _0x3cb8dd=-0x11a+0x30f+-0x1f5;_0x3cb8dd<COLS;_0x3cb8dd++){const _0x3fef6c=_0x3cb8dd>0x2642+-0xb6a+0x1*-0x1ad8?_0x5b2e60[_0x3cb8dd-(0x7*-0xad+0x1*-0x16a9+0x1*0x1b65)]:_0x46f1d9,_0x6f3ade=_0x3cb8dd<COLS-(0x210e+0x2106+0x4213*-0x1)?_0x5b2e60[_0x3cb8dd+(0x19eb+-0x2f1*0xd+0xc53)]:_0x46f1d9,_0x3d46be=Math[_0x4698a0(0x19b)](_0x3fef6c,_0x6f3ade)-_0x5b2e60[_0x3cb8dd];if(_0x3d46be>0x1647*0x1+-0x1fd0+0x98a)_0x41168c+=_0x3d46be*_0x3d46be;}const _0x362bc8=0x1ade+0x1*0x1091+-0x2b6f+0.6,_0x3458d4=-0x34*-0xa9+-0x1143+-0x5b0*0x3+0.19999999999999996,_0x4bbf5e=-0x1a20+-0x1a5b+0xa7f*0x5+0.25,_0x5f48b9=0xb3*0x2a+0x3*0x5cc+0x2ec1*-0x1,_0x5c75be=0x7*-0x2ab+0xb9a+-0x4*-0x1c6,_0x52bb90=_0x63cec0*_0x362bc8+_0x9de7f*_0x3458d4+_0x29a264*_0x4bbf5e+_0x41168c*_0x5f48b9-_0xf91519*_0xf91519*_0x5c75be;return _0x52bb90;}function spawnNewPiece(){const _0x17129c=_0x580615;whiteBlock={'x':null,'y':null};currentZone==='RAINBOW'&&(Math['random']()<whiteBlockSpawnChance?(spawnWhiteBlock(),whiteBlockSpawnChance*=0x475*-0x3+0x8e3+0x47c+0.8):whiteBlockSpawnChance*=0x25d3+-0x4*0x1cd+-0x1e9e+0.020000000000000018);const _0x499492=_0xb00d8=>{const _0x5a8bd6=_0xf6ee;if(currentZone==='RAINBOW'){const _0x32fde7=[_0x5a8bd6(0x1bd)],_0x21e338=new Piece(_0xb00d8[_0x5a8bd6(0x1b7)],_0xb00d8['colorIndex']);_0x21e338['x']=COLS-_0x21e338[_0x5a8bd6(0x1b7)][-0x1de*0x14+0x17ad+0xdab][_0x5a8bd6(0x176)],_0x21e338['y']=Math[_0x5a8bd6(0x10c)](ROWS/(-0x9f7+-0x1ff6+0x29ef))-Math[_0x5a8bd6(0x10c)](_0x21e338[_0x5a8bd6(0x1b7)][_0x5a8bd6(0x176)]/(-0x11a*-0xf+0xd3*-0x2+-0x2*0x76f));!_0x21e338[_0x5a8bd6(0xd6)]()&&_0x32fde7['push']('LEFT');_0x21e338['x']=0x12c1*0x1+0x1*0x102b+0x1bf*-0x14,_0x21e338['y']=Math['floor'](ROWS/(0x1*0x1593+0x50c*0x7+-0x38e5))-Math[_0x5a8bd6(0x10c)](_0x21e338[_0x5a8bd6(0x1b7)][_0x5a8bd6(0x176)]/(-0x1*-0x1eec+0x9f8+0x28e2*-0x1));!_0x21e338['collides']()&&_0x32fde7[_0x5a8bd6(0x137)]('RIGHT');_0xb00d8[_0x5a8bd6(0x103)]=_0x32fde7[Math[_0x5a8bd6(0x10c)](Math[_0x5a8bd6(0x16f)]()*_0x32fde7[_0x5a8bd6(0x176)])];const _0xd2fd6b=-0x260e+0x95b*0x1+-0xa7*-0x2c-(-0x19cf+-0x249+0x1c18+0.3+Math[_0x5a8bd6(0x16f)]()*(-0x20c5+-0x11*-0x1b7+0x39e+0.2));setGameSpeed(INITIAL_SPEED*_0xd2fd6b);}switch(_0xb00d8[_0x5a8bd6(0x103)]){case _0x5a8bd6(0x1ad):_0xb00d8['x']=COLS-_0xb00d8[_0x5a8bd6(0x1b7)][-0x1*0x25ff+-0xe26+0x3425*0x1][_0x5a8bd6(0x176)],_0xb00d8['y']=Math['floor'](ROWS/(0x19d7+-0x352*0x4+-0xc8d))-Math[_0x5a8bd6(0x10c)](_0xb00d8['shape'][_0x5a8bd6(0x176)]/(0x1*-0xac7+-0x1*-0x4d5+-0x1fc*-0x3));break;case _0x5a8bd6(0x144):_0xb00d8['x']=-0x1b58+0x1185+0x9d3,_0xb00d8['y']=Math[_0x5a8bd6(0x10c)](ROWS/(-0x1*-0xdd4+-0x2*-0x12fd+-0x33cc))-Math['floor'](_0xb00d8['shape'][_0x5a8bd6(0x176)]/(0x137*-0x1+0x16b*-0x1+0x2a4*0x1));break;case _0x5a8bd6(0x1bd):default:_0xb00d8['x']=Math[_0x5a8bd6(0x10c)](COLS/(-0x1a05+-0x221e+0x1*0x3c25))-Math[_0x5a8bd6(0x10c)](_0xb00d8['shape'][-0x1ba4+-0x1509+-0x11*-0x2dd]['length']/(0x3*0x89b+0x1906*-0x1+-0x43*0x3)),_0xb00d8['y']=0x100*-0x4+-0x1*-0x32b+0xd5;break;}currentPiece=_0xb00d8;if(currentPiece['collides']())gameOver();};let _0x12c7f4,_0x80c1b9,_0xb7b3ab;if(isEvilMode){currentPiece=null,draw(),setTimeout(()=>{getWorstPiece(_0x2e327e=>{const _0x3f7e98=_0xf6ee;_0xb7b3ab=Math[_0x3f7e98(0x10c)](Math[_0x3f7e98(0x16f)]()*(COLORS[_0x3f7e98(0x176)]-(-0xb3*0x5+-0x29*0xe5+0x282d)))+(-0x1d2+0x1c4f+-0x1a7c),_0x80c1b9=SHAPES[_0x2e327e][_0x3f7e98(0x172)](_0x1a906a=>_0x1a906a['map'](_0x467caf=>_0x467caf>0x15fc+0x6fc+-0x1cf8?_0xb7b3ab:-0x3*-0xb7a+-0x2175*0x1+0x53*-0x3)),_0x499492(new Piece(_0x80c1b9,_0xb7b3ab)),draw();});},-0x1d35+0x2535+0x4*-0x200);return;}else{if(forcedPieceState[_0x17129c(0x13c)]>-0x1356+0x5*0x339+0x339)_0x12c7f4=forcedPieceState['type'],forcedPieceState[_0x17129c(0x13c)]--,_0x80c1b9=SHAPES[_0x12c7f4],_0xb7b3ab=_0x12c7f4;else{if(forcedNextPieceIndex>-0x75*0x40+0x1f86+-0x246)_0x12c7f4=forcedNextPieceIndex,forcedNextPieceIndex=0x39c+0x1c6c+0x2008*-0x1,pieceSelect[_0x17129c(0x1af)]=0x2067+-0x1e05+-0x262,_0x80c1b9=SHAPES[_0x12c7f4],_0xb7b3ab=_0x12c7f4;else{if(currentZone===_0x17129c(0x156)){const _0x144bb1=Object[_0x17129c(0x163)](LETTER_SHAPES),_0x2a10c2=_0x144bb1[Math[_0x17129c(0x10c)](Math[_0x17129c(0x16f)]()*_0x144bb1['length'])];_0x80c1b9=LETTER_SHAPES[_0x2a10c2],_0xb7b3ab=LETTER_COLOR_INDEX;}else _0x12c7f4=Math[_0x17129c(0x10c)](Math[_0x17129c(0x16f)]()*(SHAPES[_0x17129c(0x176)]-(-0xd03*-0x1+-0x1e63+0x1161*0x1)))+(0x2095+0x14f9+-0x358d),_0x80c1b9=SHAPES[_0x12c7f4],_0xb7b3ab=_0x12c7f4;}}}const _0x37d2a3=_0x80c1b9['map'](_0x19cf1c=>_0x19cf1c['map'](_0x492cc5=>_0x492cc5>-0x1e13+-0x16cf+0x34e2?_0xb7b3ab:-0x137d*0x1+-0xdc5+-0x306*-0xb));_0x499492(new Piece(_0x37d2a3,_0xb7b3ab));}function solidifyPiece(){const _0x4aea21=_0x580615;if(currentZone===_0x4aea21(0x1bf)){const _0x4f483e=[_0x4aea21(0x16a),'whisper1','whisper2','scrape'];playSound(_0x4f483e[Math['floor'](Math[_0x4aea21(0x16f)]()*_0x4f483e[_0x4aea21(0x176)])]);}else playSound('lock');currentPiece['shape'][_0x4aea21(0x1ab)]((_0xe300f7,_0x1f804b)=>_0xe300f7[_0x4aea21(0x1ab)]((_0x6c9f86,_0xb33237)=>{if(_0x6c9f86>-0x4*-0x46d+-0xcd*-0x2+0x9a7*-0x2&&board[currentPiece['y']+_0x1f804b])board[currentPiece['y']+_0x1f804b][currentPiece['x']+_0xb33237]=_0x6c9f86;})),clearLines();if(!isZoneForced){if(isSafePeriodActive){}else{if(currentZone!=='NORMAL'){if(score-zoneStartScore>=ZONE_PROGRESS_REQUIREMENT){currentZone=_0x4aea21(0x17a);if(flashAnimation)stopFlashTimer();switchMusic(_0x4aea21(0x17a)),setGameSpeed(INITIAL_SPEED),isSafePeriodActive=!![],safePeriodStartTime=Date[_0x4aea21(0x124)]();}}else{if(Math['random']()<ZONE_ENTRY_CHANCE){const _0x545aad=[_0x4aea21(0x1bf),_0x4aea21(0xff),_0x4aea21(0x1a7),'ALPHABET'];currentZone=_0x545aad[Math[_0x4aea21(0x10c)](Math[_0x4aea21(0x16f)]()*_0x545aad['length'])],zoneStartScore=score;if(currentZone===_0x4aea21(0x1a7))startFlashTimer();if(currentZone===_0x4aea21(0x1bf))setGameSpeed(RED_ZONE_SPEED);switchMusic(currentZone);}}}}spawnNewPiece();if(!isEvilMode)saveState();updateProgressBarUI();}function clearLines(){const _0x1c3a01=_0x580615;let _0x5d6703=0x2*0x37+0xe9a+0x1e1*-0x8;for(let _0x39c123=ROWS-(0x27*0xe2+0x9e+-0x230b*0x1);_0x39c123>=0x196b+-0x241f+0x14*0x89;_0x39c123--){board[_0x39c123][_0x1c3a01(0x1b9)](_0x46b155=>_0x46b155>0x230a+0x2405+-0x470f)&&(_0x5d6703++,board[_0x1c3a01(0x1c3)](_0x39c123,0x1*0x525+0x21e+-0x2*0x3a1),board[_0x1c3a01(0x152)](Array(COLS)[_0x1c3a01(0x198)](0x595*-0x1+0x3*-0xacb+0x25f6)),_0x39c123++);}_0x5d6703>-0x230*-0xe+-0x5*-0x691+-0x3f75&&(playSound(_0x1c3a01(0x14d)),addScore(_0x5d6703*(0x1*-0x1821+-0x11*0x22d+0x3d82)*_0x5d6703));}function drawGrid(){const _0x28227c=_0x580615;ctx[_0x28227c(0x1b5)]=_0x28227c(0x105),ctx[_0x28227c(0x126)]=0x9a3+0x1d*-0x17+-0x707*0x1;for(let _0x371edd=0xf25+-0x1bd*-0x7+0x17*-0x130;_0x371edd<=COLS;_0x371edd++){ctx[_0x28227c(0x148)](),ctx['moveTo'](_0x371edd*BLOCK_SIZE,-0x1*0xceb+-0x24e7+-0x38f*-0xe),ctx['lineTo'](_0x371edd*BLOCK_SIZE,canvas[_0x28227c(0x1c0)]),ctx[_0x28227c(0x150)]();}for(let _0x402f6e=0x981+-0x49e+-0x3*0x1a1;_0x402f6e<=ROWS;_0x402f6e++){ctx[_0x28227c(0x148)](),ctx[_0x28227c(0x1b2)](-0x1612+0x35*-0xd+0x1*0x18c3,_0x402f6e*BLOCK_SIZE),ctx['lineTo'](canvas[_0x28227c(0x159)],_0x402f6e*BLOCK_SIZE),ctx['stroke']();}}function drawPieceShadow(){const _0x7b1cee=_0x580615;if(!flashAnimation||!currentPiece)return;const {x:_0x49edf6,y:_0x38ea8d,opacity:_0x46f9b5}=flashAnimation;if(_0x46f9b5<=-0xd4*-0x5+0x1f71+-0x2395)return;const _0x3e3b53=new Set(),_0x244bd2=0x1*0xffd+-0xbbe+0x97*-0x7;ctx[_0x7b1cee(0x112)]='rgba(0,\x200,\x200,\x20'+_0x46f9b5*(0x4d2*0x4+-0x1a32+-0x76*-0xf+0.4)+')',currentPiece[_0x7b1cee(0x1b7)][_0x7b1cee(0x1ab)]((_0x6ba699,_0x24e25f)=>{_0x6ba699['forEach']((_0x4e07ca,_0x544dbd)=>{const _0x291fc9=_0xf6ee;if(_0x4e07ca===0x158f*0x1+-0x8*0x2b3+0x9)return;const _0x120f4b=(currentPiece['x']+_0x544dbd+(0x3*-0x6cd+0x17e8+-0x381+0.5))*BLOCK_SIZE,_0x330a2b=(currentPiece['y']+_0x24e25f+(0x1c*0xe+0x2e+-0x1b6+0.5))*BLOCK_SIZE,_0x54b2f5=_0x120f4b-_0x49edf6,_0x5c6d1c=_0x330a2b-_0x38ea8d,_0xb12290=Math['sqrt'](_0x54b2f5*_0x54b2f5+_0x5c6d1c*_0x5c6d1c);if(_0xb12290===-0xe3a+-0x158d+0x23c7)return;const _0x43a38f=_0x54b2f5/_0xb12290,_0x29c47a=_0x5c6d1c/_0xb12290;for(let _0x402bf6=0xc9a+-0xcbe+-0x1*-0x25;_0x402bf6<_0x244bd2;_0x402bf6++){const _0x29cf90=Math[_0x291fc9(0x10c)]((_0x120f4b+_0x43a38f*_0x402bf6*BLOCK_SIZE)/BLOCK_SIZE),_0x1c616f=Math[_0x291fc9(0x10c)]((_0x330a2b+_0x29c47a*_0x402bf6*BLOCK_SIZE)/BLOCK_SIZE),_0x315c45=_0x29cf90+','+_0x1c616f;if(_0x29cf90<0x871+-0x15e*-0x1b+-0x2d5b*0x1||_0x29cf90>=COLS||_0x1c616f<-0x142b*0x1+0x8*0x331+-0x1*0x55d||_0x1c616f>=ROWS||board[_0x1c616f]&&board[_0x1c616f][_0x29cf90]>0x297+0x251*0x7+-0x12ce*0x1)break;!_0x3e3b53[_0x291fc9(0x135)](_0x315c45)&&_0x3e3b53[_0x291fc9(0x12f)](_0x315c45);}});}),_0x3e3b53[_0x7b1cee(0x1ab)](_0x5e3bcb=>{const _0x429ecf=_0x7b1cee,[_0x49512c,_0x408aa0]=_0x5e3bcb[_0x429ecf(0x110)](',')[_0x429ecf(0x172)](Number);ctx[_0x429ecf(0xef)](_0x49512c*BLOCK_SIZE,_0x408aa0*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);});}function drawGhostPiece(){const _0x34c919=_0x580615;if(!currentPiece)return;const _0x34d87a=new Piece(currentPiece[_0x34c919(0x1b7)],currentPiece['colorIndex']);_0x34d87a['x']=currentPiece['x'],_0x34d87a['y']=currentPiece['y'],_0x34d87a[_0x34c919(0x103)]=currentPiece[_0x34c919(0x103)];let _0xf2839a=-0x2228+0xbcc+0x36*0x6a,_0x2ebd5e=-0x662+0x37c*0x4+-0x78e;switch(_0x34d87a[_0x34c919(0x103)]){case _0x34c919(0x1ad):_0xf2839a=-(-0x15*0xb5+0x215b*0x1+-0x1281);break;case _0x34c919(0x144):_0xf2839a=-0x12*0x84+-0xef*0x29+0x2f90;break;case _0x34c919(0x1bd):default:_0x2ebd5e=-0x546+0xcef+0x28*-0x31;break;}while(!_0x34d87a[_0x34c919(0xd6)]()){_0x34d87a['move'](_0xf2839a,_0x2ebd5e);}_0x34d87a[_0x34c919(0x100)](-_0xf2839a,-_0x2ebd5e),_0x34d87a[_0x34c919(0x104)](!![]);}function draw(){const _0x19d6d6=_0x580615;if(!ctx)return;ctx['clearRect'](-0x17bd*-0x1+0x157c+-0x2d39,-0x1d94+0x208a+-0x17b*0x2,canvas[_0x19d6d6(0x159)],canvas[_0x19d6d6(0x1c0)]);if(isGridEnabled)drawGrid();if(flashAnimation){const {x:_0x4ed135,y:_0x6c7e7a,radius:_0x5f41dc,opacity:_0x1d2fef}=flashAnimation,_0x37d125=ctx[_0x19d6d6(0x18e)](_0x4ed135,_0x6c7e7a,-0x9*-0x101+0x2*-0xc87+0x1005,_0x4ed135,_0x6c7e7a,_0x5f41dc);_0x37d125[_0x19d6d6(0x11c)](0x9ee+-0x2*0x523+-0x8*-0xb,_0x19d6d6(0xf5)+_0x1d2fef*(-0x136f+-0x3ed*0x3+0x1f36+0.7)+')'),_0x37d125[_0x19d6d6(0x11c)](0x243b+-0x4a*-0x5b+-0x3e89*0x1+0.2,'rgba(255,\x20255,\x20255,\x20'+_0x1d2fef*(-0x11*0x5+-0x953+-0x19c*-0x6+0.4)+')'),_0x37d125[_0x19d6d6(0x11c)](-0x101*-0x1f+0x205c*-0x1+0x13e,_0x19d6d6(0x10a)),ctx['fillStyle']=_0x37d125,ctx[_0x19d6d6(0xef)](0xb3b*0x1+-0x1d8*0x14+-0x1f9*-0xd,0x3b*0x46+-0x1*-0x249d+-0x34bf,canvas[_0x19d6d6(0x159)],canvas['height']);}board['forEach']((_0x8a70dc,_0x452b9d)=>{const _0x3c32ce=_0x19d6d6;_0x8a70dc[_0x3c32ce(0x1ab)]((_0x2c0755,_0x20db41)=>{const _0x2db04f=_0x3c32ce;if(_0x2c0755>-0x1304*0x1+-0x155*-0x5+0xc5b){let _0x407968;switch(currentZone){case _0x2db04f(0x1a7):_0x407968='#FFFFFF';break;case _0x2db04f(0x1bf):_0x407968=RED_COLORS[_0x2c0755];break;case _0x2db04f(0xff):_0x407968=COLORS[Math[_0x2db04f(0x10c)](Math[_0x2db04f(0x16f)]()*(COLORS[_0x2db04f(0x176)]-(-0x16*-0x13+0x9c3*0x2+-0x43b*0x5)))+(-0x5b*0x9+-0x1a*-0x15b+-0x557*0x6)];break;default:_0x407968=COLORS[_0x2c0755];break;}drawBlock(_0x20db41,_0x452b9d,_0x407968);}});}),drawPieceShadow();whiteBlock['x']!==null&&currentZone===_0x19d6d6(0xff)&&(ctx['fillStyle']=_0x19d6d6(0xde),ctx[_0x19d6d6(0xef)](whiteBlock['x']*BLOCK_SIZE,whiteBlock['y']*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE),ctx['strokeStyle']=_0x19d6d6(0x13e),ctx[_0x19d6d6(0x19c)](whiteBlock['x']*BLOCK_SIZE,whiteBlock['y']*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE));if(!isGameOver&&isGhostEnabled&&currentPiece)drawGhostPiece();if(!isGameOver&&currentPiece)currentPiece[_0x19d6d6(0x104)]();}function update(){const _0x34c6dc=_0x580615;if(isGameOver||isGamePaused||!currentPiece)return;if(!isZoneForced&&isSafePeriodActive){const _0x493ab5=Date[_0x34c6dc(0x124)]()-safePeriodStartTime;_0x493ab5>=SAFE_PERIOD_DURATION&&(isSafePeriodActive=![]),updateProgressBarUI();}let _0x32b4b6=-0x23a3*0x1+-0x237b+-0x1*-0x471e,_0x8a5046=0x1ed2+-0x27e+0x4*-0x715;switch(currentPiece['gravityDirection']){case _0x34c6dc(0x1ad):_0x32b4b6=-(-0x193f+-0x1358+0x1*0x2c98);break;case'RIGHT':_0x32b4b6=-0x130c+0x2207+0x36*-0x47;break;case _0x34c6dc(0x1bd):default:_0x8a5046=-0x3*0xb3b+0x1*-0x103f+0x31f1;break;}currentPiece[_0x34c6dc(0x100)](_0x32b4b6,_0x8a5046),checkWhiteBlockCollision(),currentPiece[_0x34c6dc(0xd6)]()&&(currentPiece[_0x34c6dc(0x100)](-_0x32b4b6,-_0x8a5046),solidifyPiece()),draw();}function softDrop(){const _0x5c339f=_0x580615;if(isGameOver||!currentPiece)return;let _0x51f166=0x2*0x951+0x1bbf*-0x1+0x91d,_0x40de21=0xa7e+0x1abf+-0x253d;switch(currentPiece[_0x5c339f(0x103)]){case'LEFT':_0x51f166=-(-0x2679*-0x1+0x130*0x11+-0x3aa8);break;case _0x5c339f(0x144):_0x51f166=0x1e44+-0x6*-0x24b+-0x2c05*0x1;break;case'DOWN':default:_0x40de21=0x9*0x34c+-0x20a0+0x2f5;break;}currentPiece[_0x5c339f(0x100)](_0x51f166,_0x40de21),checkWhiteBlockCollision(),currentPiece['collides']()?(currentPiece['move'](-_0x51f166,-_0x40de21),solidifyPiece()):(addScore(0x1bdf*0x1+-0x249b+0x1*0x8bd),updateProgressBarUI()),draw();}function hardDrop(){const _0x4b44c2=_0x580615;if(isGameOver||isGhostEnabled||!currentPiece)return;playSound(_0x4b44c2(0x1b1));let _0x28b8c7=0x1914+-0x36b*-0xb+-0x3ead*0x1,_0x510739=0x1153+-0x237+-0xf1c,_0x533d86=-0x977*0x1+-0x1be3+0x255a*0x1;switch(currentPiece[_0x4b44c2(0x103)]){case _0x4b44c2(0x1ad):_0x510739=-(0x1*-0x1407+0xc*0x27b+-0x9bc);break;case _0x4b44c2(0x144):_0x510739=0x69a+-0xb1d*0x3+0x1abe;break;case _0x4b44c2(0x1bd):default:_0x533d86=0x63a+-0x593+-0x1*0xa6;break;}while(!currentPiece[_0x4b44c2(0xd6)]()){currentPiece['move'](_0x510739,_0x533d86),checkWhiteBlockCollision(),_0x28b8c7++;}currentPiece['move'](-_0x510739,-_0x533d86),addScore(_0x28b8c7*(-0x1163+-0x222f+0x3394)),solidifyPiece(),draw();}function gameOver(){const _0x56c2eb=_0x580615;if(isMusicEnabled){const _0x2a22c0=new Audio(SOUNDS['sfx'][_0x56c2eb(0x17a)]['gameover']);_0x2a22c0[_0x56c2eb(0x142)]=sfxVolume,_0x2a22c0[_0x56c2eb(0xda)]()['catch'](_0x1da8d8=>{});}isGameOver=!![],isGameStarted=![],progressBarContainer[_0x56c2eb(0x1b6)][_0x56c2eb(0x1cc)]=_0x56c2eb(0x15a),pauseGame(!![]),currentPiece=null,clearSaveState(),stopFlashTimer();if(currentMusic)currentMusic[_0x56c2eb(0x10f)]();currentMusic=null,startGameOverAnimation();}function dropAnimationPiece(){const _0x15f498=_0x580615,_0x2d52ef=Math['floor'](Math[_0x15f498(0x16f)]()*(SHAPES[_0x15f498(0x176)]-(0x7*-0x4a9+0x2f9+-0x1*-0x1da7)))+(-0x1*0x1579+0x1b41*-0x1+0x9bf*0x5),_0x37a17c=Math[_0x15f498(0x10c)](Math[_0x15f498(0x16f)]()*(COLORS[_0x15f498(0x176)]-(-0x20c*0x13+0x2276+0x1*0x46f)))+(0x2681+0x20a9+0x1*-0x4729),_0x4daf98=SHAPES[_0x2d52ef][_0x15f498(0x172)](_0xd7e8a3=>_0xd7e8a3[_0x15f498(0x172)](_0x1b13f7=>_0x1b13f7>-0x1df2*-0x1+0x2267+-0x3c9*0x11?_0x37a17c:0x1cb5+0x77b+-0x2430)),_0x452e7c=new Piece(_0x4daf98,_0x37a17c),_0x378720=Math[_0x15f498(0x10c)](Math[_0x15f498(0x16f)]()*(0x1691+0xf31+-0x25be));for(let _0x553577=0x1*-0x2372+0x22af+0xc3;_0x553577<_0x378720;_0x553577++)_0x452e7c[_0x15f498(0x197)]();_0x452e7c['x']=Math[_0x15f498(0x10c)](Math[_0x15f498(0x16f)]()*(COLS-_0x452e7c[_0x15f498(0x1b7)][0x1eb6+0x6*0x10+0xad*-0x2e]['length']+(-0x173*-0x1+-0x1297+0x1125))),_0x452e7c['y']=0x1ac5+-0x1*0x864+-0x1261;while(!_0x452e7c['collides']())_0x452e7c['move'](-0x2*-0xc2e+-0x1*0x22d5+0xa79,0x2*-0x977+-0x1424+0x7*0x595);_0x452e7c[_0x15f498(0x100)](0x136b+-0x5*-0x71+-0x15a0,-(0x29*0xa+0x11*0x17b+0x23b*-0xc)),_0x452e7c['shape'][_0x15f498(0x1ab)]((_0x13cae9,_0x47b716)=>_0x13cae9[_0x15f498(0x1ab)]((_0x4bea18,_0xdd58a8)=>{let _0x48f2f6=_0x452e7c['y']+_0x47b716,_0x24c0f5=_0x452e7c['x']+_0xdd58a8;if(_0x4bea18>-0x23a2+0x7*-0x485+-0x4345*-0x1&&_0x48f2f6>=-0x17ec+-0x21bf+0x7*0x83d&&_0x48f2f6<ROWS&&_0x24c0f5>=-0x2102+-0x23f6+0x44f8&&_0x24c0f5<COLS)board[_0x48f2f6][_0x24c0f5]=_0x4bea18;}));}function startGameOverAnimation(){gameOverAnimationInterval=setInterval(()=>{for(let _0x4560ae=0x1000+-0x79b+-0x865;_0x4560ae<-0xbe5*-0x3+-0x5b1+-0x6c*0x47;_0x4560ae++)dropAnimationPiece();draw();},0x2*-0x1343+0x65b*-0x4+0x1*0x4002),setTimeout(endGameOverAnimation,0x61*-0x4b+0x6e4+0x1b63);}function endGameOverAnimation(){clearInterval(gameOverAnimationInterval),showGameOverMenu();}function _0x4071(){const _0x2cb707=['moveTo','logo-pixel','[data-option=\x22music\x22]','strokeStyle','style','shape','AUTO','every','100%','width\x201s\x20linear,\x20background-color\x201s\x20linear','safePeriodStartTime','DOWN','trim','RED','height','ArrowUp','ArrowDown','splice','focus','sound/RED/scrape.mp3','ROWS','1516qgMsdd','passwordInput','tetrisGhostEnabled','getItem','forcedPieceState','display','sfx','preventDefault','gameOverScreen','sound/NORMAL/gameover.wav','warn','collides','KeyA','cancelPasswordButton','dataset','play','from','sound/RED/whisper2.mp3','hiScore','#ffffff','#FF851B','currentPiece','12sEmRuf','opacity','pieceIndex','lit','charAt','sound/NORMAL/clear.wav','startMenuCanvas','innerHeight','screenX','toUpperCase','shake','textContent','6312141lvCrDY','startHiScore','fillRect','KeyD','input[type=\x22checkbox\x22][data-option]','Space','COLS','.slider-thumb','rgba(255,\x20255,\x20255,\x20','\x20at\x20','24JpIEAB','transition','tetrisEvilMode','sound/RED/whisper1.mp3','KeyI','sound/RAINBOW/powerup.wav','parse','tetrisSfxVolume','RAINBOW','move','toFixed','[data-option=\x22grid\x22]','gravityDirection','draw','rgba(255,\x20255,\x20255,\x200.15)','beforeunload','#8B0000','#F012BE','sound/NORMAL/click.wav','rgba(255,\x20255,\x20255,\x200)','passwordPrompt','floor','addEventListener','clearRect','pause','split','musicNinja','fillStyle','tetrisMusicVolume','testerGridCheckbox','score','filter','whiteBlockSpawnChance','appendChild','scoreInput','block','startButton','addColorStop','ghost','testerEvilCheckbox','grid','changedTouches','8880030FGgTRS','screenY','MTk3MjIwMDYyMDAwNjY2MTIz','now','#000','lineWidth','Could\x20not\x20play\x20music:\x20','6188768IEbIeP','currentTime','time','#FF4136','ceil','documentElement','div','add','Enabled','sound/NINJA/lightning.wav','innerHTML','currentZone','#C00000','has','board','push','tetrisCanvas','musicRed','keydown','startSafePeriodButton','count','true','#aaaaaa','gridColumn','input[type=\x22checkbox\x22][data-option=\x22','#7B0000','volume','pointerEvents','RIGHT','#7FDBFF','zoneStartScore','.slider-fill','beginPath','musicNormal','.music-slider-input','querySelector','paused','clear','progress-bar','#D50000','stroke','evil','unshift','disabled','checked','sound/RED/heartbeat.mp3','ALPHABET','touchmove','levelUpButton','width','none','endSafePeriodButton','365095xKZdQh','zoneSelect','1047403bHjKyE','src','toLowerCase','max','.btn','keys','key','resize','querySelectorAll','testerMenu','tetrisHiScore','classList','heartbeat','closeTesterMenu','KeyS','lightning','input','random','.sfx-slider-input','code','map','width\x200.2s\x20linear,\x20background-color\x200.5s\x20ease','values','[data-option=\x22evil\x22]','length','toString','pieceSelect','getElementById','NORMAL','Could\x20not\x20play\x20sound:\x20','modal-visible','clientHeight','parentElement','Incorrect\x20password','innerWidth','clientWidth','tetrisGameState','%,\x2050%)','target','610317fxziVJ','.slider-item','reduce','change','tetris','156WlTFcR','slice','progress-bar-container','backgroundImage','createRadialGradient','tetrisMusicEnabled','gridRow','#FFDC00','click','round','catch','sound/NORMAL/lock.wav','testerGhostCheckbox','rotate','fill','clearBoardButton','substring','min','strokeRect','setItem','submitPasswordButton','KeyW','powerup','createElement','setScoreButton','sound/NORMAL/harddrop.wav','#2ECC40','removeItem','music','NINJA','getContext','remove','className','forEach','colorIndex','LEFT','createDocumentFragment','value','abs','harddrop'];_0x4071=function(){return _0x2cb707;};return _0x4071();}function showGameOverMenu(){const _0x5570fa=_0x580615;score>hiScore&&(hiScore=score,localStorage[_0x5570fa(0x19d)](_0x5570fa(0x168),hiScore));finalScoreEl[_0x5570fa(0xec)]=Math[_0x5570fa(0x10c)](score),hiScoreEl[_0x5570fa(0xec)]=Math[_0x5570fa(0x10c)](hiScore),startHiScoreEl[_0x5570fa(0xec)]=Math[_0x5570fa(0x10c)](hiScore);const _0x3881c8=isMobile?MOBILE_COLS_DIVISOR*MOBILE_ROWS_DIVISOR:DESKTOP_COLS_DIVISOR*DESKTOP_ROWS_DIVISOR,_0x393a50=COLS>-0x1786+-0x329*-0x8+-0x96*0x3&&ROWS>0xa3e+-0x6*-0x287+-0x1968?_0x3881c8/(COLS*ROWS):0x4be*-0x2+0x42b*-0x9+0x2f00,_0x12a4fd=isGhostEnabled?-0x9e0+0x77f+-0x261*-0x1+0.5:0x988+-0x146e+0xae7,_0x393c6f=isGridEnabled?0xf*0x79+0x30f+-0x362*0x3+0.9:-0x2399+0x61*-0x7+0x2641;scoreMultiplierEl['textContent']=(_0x393a50*_0x12a4fd*_0x393c6f)[_0x5570fa(0x101)](-0x113b+-0x1ca2+0x2ddf)+'x',gameOverScreen[_0x5570fa(0x169)][_0x5570fa(0x12f)](_0x5570fa(0x17c));}function _0xf6ee(_0x21770b,_0x10a25a){const _0x1d4711=_0x4071();return _0xf6ee=function(_0xe72922,_0x9afca3){_0xe72922=_0xe72922-(-0xb7*0xe+-0x19ff*0x1+0x24d7);let _0x44f688=_0x1d4711[_0xe72922];return _0x44f688;},_0xf6ee(_0x21770b,_0x10a25a);}function handlePlayerMove(_0x30ed7a){const _0x4ccea6=_0x580615;if(isGameOver||!currentPiece)return;let _0x2595a6=-0x4c*0x3d+-0x79a+0x19b6,_0x1861d2=0x1*0x103f+-0x2*-0x1da+0x13f3*-0x1;switch(currentPiece[_0x4ccea6(0x103)]){case _0x4ccea6(0x1bd):_0x2595a6=_0x30ed7a;break;case _0x4ccea6(0x1ad):case'RIGHT':_0x1861d2=_0x30ed7a;break;}const _0x58a18a=()=>{const _0x3f6001=_0x4ccea6;currentPiece[_0x3f6001(0x100)](_0x2595a6,_0x1861d2),checkWhiteBlockCollision(),currentPiece['collides']()&&currentPiece[_0x3f6001(0x100)](-_0x2595a6,-_0x1861d2),draw();};if(currentZone===_0x4ccea6(0x1bf)){clearTimeout(iceSlipTimeout),_0x58a18a();const _0x3ccb6c=0x10f*-0x5+-0xb*0x2cb+0x247c;iceSlipTimeout=setTimeout(()=>{const _0x100cf0=_0x4ccea6;if(isGameOver||!currentPiece)return;currentPiece[_0x100cf0(0x100)](_0x2595a6,_0x1861d2),checkWhiteBlockCollision();if(currentPiece[_0x100cf0(0xd6)]()){currentPiece[_0x100cf0(0x100)](-_0x2595a6,-_0x1861d2),draw();return;}draw(),Math[_0x100cf0(0x16f)]()<-0x1*0x1997+-0x14fa+0x1*0x2e91+0.3&&setTimeout(()=>{const _0x267a93=_0x100cf0;if(isGameOver||!currentPiece)return;currentPiece[_0x267a93(0x100)](_0x2595a6,_0x1861d2),checkWhiteBlockCollision(),currentPiece[_0x267a93(0xd6)]()&&currentPiece[_0x267a93(0x100)](-_0x2595a6,-_0x1861d2),draw();},-0x268b+-0xbbb+0xf*0x360);},_0x3ccb6c);}else _0x58a18a();}function spawnWhiteBlock(){const _0x3e83f1=_0x580615,_0x1b9275=[];for(let _0x3fca69=0x3*-0xcb9+0x11f2+0x1439;_0x3fca69<ROWS;_0x3fca69++){for(let _0x5231be=-0x33*-0x35+-0x1b6b*-0x1+-0x25fa;_0x5231be<COLS;_0x5231be++){if(board[_0x3fca69][_0x5231be]===0x1*0x4a3+-0x775+0x1*0x2d2)_0x1b9275[_0x3e83f1(0x137)]({'x':_0x5231be,'y':_0x3fca69});}}if(_0x1b9275[_0x3e83f1(0x176)]>-0xb11+-0x5*-0x149+0x3*0x18c){const _0x19f34d=_0x1b9275[Math[_0x3e83f1(0x10c)](Math[_0x3e83f1(0x16f)]()*_0x1b9275[_0x3e83f1(0x176)])];whiteBlock={'x':_0x19f34d['x'],'y':_0x19f34d['y']};}}function checkWhiteBlockCollision(){const _0x276711=_0x580615;if(isGameOver||!currentPiece||whiteBlock['x']===null)return;for(let _0x48c453=-0x4fd*0x5+-0x1bfd+-0x34ee*-0x1;_0x48c453<currentPiece['shape'][_0x276711(0x176)];_0x48c453++){for(let _0x55f4a4=-0x394*-0x4+0x706*0x5+-0x316e;_0x55f4a4<currentPiece[_0x276711(0x1b7)][_0x48c453][_0x276711(0x176)];_0x55f4a4++){if(currentPiece[_0x276711(0x1b7)][_0x48c453][_0x55f4a4]>0x348+-0x208e+0x9c2*0x3){const _0x5d7c7b=currentPiece['x']+_0x55f4a4,_0xa7aedc=currentPiece['y']+_0x48c453;if(_0x5d7c7b===whiteBlock['x']&&_0xa7aedc===whiteBlock['y']){playSound(_0x276711(0x1a0)),triggerRandomActionBlock(),whiteBlock={'x':null,'y':null};return;}}}}}function triggerRandomActionBlock(){const _0x5a87ee=_0x580615,_0x48a4d7=Math['random']();if(_0x48a4d7<0x75b+0xf9a*0x2+0x1*-0x268f+0.005)board=Array[_0x5a87ee(0xdb)]({'length':ROWS},()=>Array(COLS)['fill'](-0x19*-0x11b+0x1bc1+-0x14*0x2c5));else{if(_0x48a4d7<0x21fb*0x1+0xb*0x287+-0x3dc8+0.01)score+=-0x267e+-0x6d9*-0x2+0x29c*0xb;else{if(_0x48a4d7<0x53c+-0x7f6+0x2ba+0.11)fillBoardWithHoles(0x10b7*-0x1+-0x1336+0x2401);else{if(_0x48a4d7<-0x1dd0+-0x3*-0xb65+-0x3*0x175+0.31)fillBoardWithHoles(-0xb55*-0x3+0x2f6+0xd*-0x2d7);else{const _0x5de2d3=SHAPES['length']-(0x1d58+0x1*0x3ab+-0x82*0x41),_0x10064b=Math[_0x5a87ee(0x10c)](Math['random']()*_0x5de2d3)+(0x131f*-0x2+0x49*-0x13+0x2baa);forcedPieceState={'type':_0x10064b,'count':0x14};}}}}draw();}function fillBoardWithHoles(_0x4aab8b){const _0x363b14=_0x580615,_0x20a027=Math[_0x363b14(0x19b)](_0x4aab8b,ROWS);for(let _0x40c3c1=ROWS-(0x4*-0xd7+-0x2517+0x2874);_0x40c3c1>=ROWS-_0x20a027;_0x40c3c1--){const _0x499761=Math['floor'](Math[_0x363b14(0x16f)]()*COLS);for(let _0x3e0c9f=-0x6a6+-0x933+-0xfd9*-0x1;_0x3e0c9f<COLS;_0x3e0c9f++){_0x3e0c9f!==_0x499761&&(board[_0x40c3c1][_0x3e0c9f]=Math[_0x363b14(0x10c)](Math['random']()*(COLORS[_0x363b14(0x176)]-(0x20ab+-0x9*0x301+-0x5a1*0x1)))+(-0x13a3+0x1*0x215d+-0xdb9));}}}function startFlashTimer(){stopFlashTimer(),scheduleNextLightning();}function scheduleNextLightning(){clearTimeout(flashTimeout);const _0x1865b4=0x153d*0x1+-0x12*0x29+-0xc7f+Math['random']()*(0xe*-0x244+-0x347*0x7+0x406d);flashTimeout=setTimeout(()=>{const _0x12f2c9=_0xf6ee;if(isGameOver||currentZone!==_0x12f2c9(0x1a7)||flashAnimation)return;triggerLightningPulse();},_0x1865b4);}function triggerLightningPulse(){const _0xe94b0e=_0x580615;if(flashAnimation)return;playSound(_0xe94b0e(0x16d));const _0x4a9d67=Math[_0xe94b0e(0x16f)]()*canvas[_0xe94b0e(0x159)],_0x2b1c0c=-0x7bd+-0x2243+-0x20*-0x150,_0x331674=canvas[_0xe94b0e(0x159)]*(-0x2092+0x5*0x44b+0xb1b+0.8+Math[_0xe94b0e(0x16f)]()*(-0x22b3+0x1e8+0x68f*0x5+0.4)),_0x37e500=[{'time':0x0,'opacity':0x0},{'time':0x3c,'opacity':0x223b+-0x1*0x1f49+0x1d*-0x1a+0.6+Math[_0xe94b0e(0x16f)]()*(0x14a8+-0x232c+-0x1*-0xe84+0.2)},{'time':0x64,'opacity':-0xac9+0x1aad+-0x9*0x1c4+0.3+Math['random']()*(-0x202b+-0x1ecc+-0x9*-0x6ff+0.2)},{'time':0x96,'opacity':-0x23e6+0x11ad+0x613*0x3+0.5+Math[_0xe94b0e(0x16f)]()*(-0x10c0+0x67*-0x5c+0x1*0x35c4+0.2)},{'time':0x118,'opacity':0x104c+-0x17e2+0x796+0.1+Math[_0xe94b0e(0x16f)]()*(0x1296+0x1a2e+-0x2cc4+0.1)},{'time':0x1c2,'opacity':0x0}],_0x13efc1=_0x37e500[_0x37e500[_0xe94b0e(0x176)]-(0x61*0x67+-0x583+-0x2183)]['time'],_0x59fefd=performance[_0xe94b0e(0x124)]();function _0xe99bda(_0x2468df,_0x520183,_0x47a4f7){return _0x2468df*(-0x181d+-0xf2b*0x1+-0x71*-0x59-_0x47a4f7)+_0x520183*_0x47a4f7;}function _0x41601e(_0x1f01fd){const _0x436598=_0xe94b0e,_0x4cd280=_0x1f01fd-_0x59fefd;if(_0x4cd280>=_0x13efc1){flashAnimation=null,draw(),scheduleNextLightning();return;}let _0x260c9b=0x65*0x1c+-0x1a19+0xf0d;while(_0x260c9b<_0x37e500[_0x436598(0x176)]-(0x2*0x12d2+0x2075+-0x4617)&&_0x4cd280>=_0x37e500[_0x260c9b+(-0xbee+-0xa71+0x1*0x1660)][_0x436598(0x12a)]){_0x260c9b++;}const _0x5af545=_0x37e500[_0x260c9b],_0x5d2b09=_0x37e500[_0x260c9b+(0x23*0x76+-0x22e7+0x12c6)],_0x199516=_0x5d2b09[_0x436598(0x12a)]-_0x5af545[_0x436598(0x12a)],_0x5b9573=_0x4cd280-_0x5af545[_0x436598(0x12a)],_0x4353da=_0x199516>0x1*-0x2399+-0x1a04+0x1*0x3d9d?_0x5b9573/_0x199516:-0x93*0x11+0x2417*-0x1+0x2ddb,_0x2027da=_0xe99bda(_0x5af545[_0x436598(0xe2)],_0x5d2b09[_0x436598(0xe2)],_0x4353da);flashAnimation={'id':requestAnimationFrame(_0x41601e),'x':_0x4a9d67,'y':_0x2b1c0c,'radius':_0x331674,'opacity':_0x2027da},draw();}flashAnimation={'id':requestAnimationFrame(_0x41601e)};}function stopFlashTimer(){flashAnimation&&flashAnimation['id']&&cancelAnimationFrame(flashAnimation['id']),clearTimeout(flashTimeout),flashTimeout=null,flashAnimation=null;}function updateProgressBarUI(){const _0x5f59fa=_0x580615;if(!isGameStarted||isGameOver){progressBarContainer[_0x5f59fa(0x1b6)][_0x5f59fa(0x1cc)]='none';return;}progressBarContainer[_0x5f59fa(0x1b6)][_0x5f59fa(0x1cc)]=_0x5f59fa(0x11a),progressBar[_0x5f59fa(0x1aa)]='',progressBar[_0x5f59fa(0x1b6)][_0x5f59fa(0x18d)]=_0x5f59fa(0x15a),progressBar[_0x5f59fa(0x1b6)][_0x5f59fa(0xf8)]=_0x5f59fa(0x173);if(isZoneForced)progressBar[_0x5f59fa(0x169)][_0x5f59fa(0x12f)](currentZone[_0x5f59fa(0x160)]()+'-zone'),progressBar[_0x5f59fa(0x1b6)]['width']=_0x5f59fa(0x1ba);else{if(isSafePeriodActive){const _0x36017e=Math[_0x5f59fa(0x161)](0x1fdd+0x222c+-0x1603*0x3,SAFE_PERIOD_DURATION-(Date[_0x5f59fa(0x124)]()-safePeriodStartTime)),_0x1c8d3b=_0x36017e/SAFE_PERIOD_DURATION;progressBar[_0x5f59fa(0x1b6)][_0x5f59fa(0x159)]=_0x1c8d3b*(0x18*-0x21+0x4*0x559+0x23d*-0x8)+'%';const _0x18905f=(-0xd5*-0x5+-0x7*-0x67+-0x2*0x341)*_0x1c8d3b,_0x1efb69=(-0x1ca2+0x2391+0x68b*-0x1)*_0x1c8d3b;progressBar[_0x5f59fa(0x1b6)]['backgroundColor']='hsl('+_0x18905f+',\x20'+_0x1efb69+_0x5f59fa(0x183),progressBar['style']['transition']=_0x5f59fa(0x1bb);}else{if(currentZone!==_0x5f59fa(0x17a)){const _0x10d18b=Math['min'](0x9*-0x20a+-0x88*0x1a+0x393*0x9,(score-zoneStartScore)/ZONE_PROGRESS_REQUIREMENT);progressBar['classList'][_0x5f59fa(0x12f)](currentZone['toLowerCase']()+'-zone'),progressBar[_0x5f59fa(0x1b6)][_0x5f59fa(0x159)]=_0x10d18b*(-0x503*0x2+-0x847+-0x91*-0x21)+'%';}else progressBar['classList']['add']('warning'),progressBar[_0x5f59fa(0x1b6)][_0x5f59fa(0x159)]='100%';}}}function requestGodMode(){const _0x4d8460=_0x580615;if(isTesterMenuOpen){testerMenu[_0x4d8460(0x1b6)][_0x4d8460(0x1cc)]=_0x4d8460(0x15a),isTesterMenuOpen=![];if(isGameStarted)pauseGame(![]);}else pauseGame(!![]),passwordPrompt['classList'][_0x4d8460(0x12f)]('modal-visible'),passwordInput[_0x4d8460(0x1c4)]();}function handlePasswordSubmit(){const _0x1b1e8d=_0x580615;try{if(btoa(passwordInput[_0x1b1e8d(0x1af)][_0x1b1e8d(0x1be)]())===GOD_MODE_PASS_B64)passwordPrompt[_0x1b1e8d(0x169)][_0x1b1e8d(0x1a9)]('modal-visible'),passwordInput[_0x1b1e8d(0x1af)]='',isTesterMenuOpen=!![],updateTesterMenuState(),testerMenu[_0x1b1e8d(0x1b6)][_0x1b1e8d(0x1cc)]=_0x1b1e8d(0x11a);else throw new Error(_0x1b1e8d(0x17f));}catch(_0xd7e0a1){passwordInput[_0x1b1e8d(0x1af)]='',passwordPrompt[_0x1b1e8d(0x169)]['add'](_0x1b1e8d(0xeb)),setTimeout(()=>passwordPrompt['classList'][_0x1b1e8d(0x1a9)](_0x1b1e8d(0xeb)),-0x1b8d+-0x4*0x471+-0x1*-0x2f45);}}function cancelPasswordPrompt(){const _0x132e6b=_0x580615;passwordPrompt[_0x132e6b(0x169)][_0x132e6b(0x1a9)](_0x132e6b(0x17c)),passwordInput[_0x132e6b(0x1af)]='';if(isGameStarted)pauseGame(![]);}function updateTesterMenuState(){const _0x5ac1fc=_0x580615;scoreInput['value']=Math[_0x5ac1fc(0x10c)](score),testerGhostCheckbox[_0x5ac1fc(0x154)]=isGhostEnabled,testerGridCheckbox[_0x5ac1fc(0x154)]=isGridEnabled,testerMusicCheckbox['checked']=isMusicEnabled,testerEvilCheckbox['checked']=isEvilMode;}setup();
</script>
</body>
</html>