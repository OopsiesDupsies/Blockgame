<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Pixel Tetris (Protected)</title>
    <style>
        body {
            background-color: #0d0d0d; color: #eee; font-family: 'Courier New', Courier, monospace;
            display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        canvas { background-color: #000; border: 1px solid #222; transition: background-color 0.5s ease; }
        
        /* --- Overlays --- */
        .modal-overlay {
            display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.9); border: 2px solid #fff; padding: 20px 40px; text-align: center; z-index: 10;
        }
        
        #gameOverScreen h1 { color: #ff4136; margin-top: 0; }
        #scoreDetails { font-size: 0.9em; color: #aaa; margin: -10px 0 10px 0; }
        #options { margin-top: 20px; text-align: left; font-size: 0.9em; color: #ccc; }
        #options label { display: block; margin-bottom: 5px; cursor: pointer; }
        #restartButton {
            background-color: #0074d9; color: #fff; border: none; padding: 15px 30px; font-size: 1.2em;
            cursor: pointer; margin-top: 20px; border-radius: 5px;
        }
        #restartButton:hover { background-color: #0088ff; }
        
        /* --- Tester Menu Styles --- */
        #testerMenu {
            display: none; position: absolute; top: 20px; left: 20px;
            background-color: rgba(20, 20, 30, 0.95); border: 1px solid #0074d9; color: #eee;
            padding: 15px; z-index: 20; font-size: 0.8em; max-width: 250px; border-radius: 5px;
        }
        #testerMenu h2 { margin-top: 0; color: #0074d9; }
        #testerMenu div { margin: 10px 0; }
        #testerMenu label { display: block; margin-bottom: 5px; }
        #testerMenu input[type="number"], #testerMenu select {
            width: 90%; background-color: #111; color: #eee; border: 1px solid #444; padding: 5px;
        }
        #testerMenu button {
            background-color: #333; color: #eee; border: 1px solid #555; padding: 5px 10px; cursor: pointer; margin-top: 5px;
        }
        #testerMenu button:hover { background-color: #555; }
        #closeTesterMenu {
            position: absolute; top: 10px; right: 10px; background: none; border: none; color: #aaa; font-size: 1.2em; cursor: pointer;
        }

        /* --- Password Prompt Styles --- */
        #passwordPrompt { border-color: #0074d9; }
        #passwordPrompt h2 { color: #0074d9; margin-top: 0; }
        #passwordInput {
            padding: 10px; font-size: 1.1em; background-color: #111; color: #eee;
            border: 1px solid #555; width: 250px; margin: 15px 0; text-align: center;
        }
        #passwordButtons button {
            padding: 10px 20px; font-size: 1em; cursor: pointer; border: none; margin: 0 5px;
        }
        #submitPasswordButton { background-color: #0074d9; color: white; }
        #cancelPasswordButton { background-color: #555; color: #ccc; }
        .shake { animation: shake 0.5s; border-color: #FF4136 !important; }
        @keyframes shake {
            10%, 90% { transform: translate(-1px, -50%); } 20%, 80% { transform: translate(2px, -50%); }
            30%, 50%, 70% { transform: translate(-4px, -50%); } 40%, 60% { transform: translate(4px, -50%); }
        }
    </style>
</head>
<body>
    <canvas id="tetrisCanvas"></canvas>
    <audio id="bgMusic" loop><source src="sound/soundtrack.mp3" type="audio/mpeg"></audio>

    <div id="gameOverScreen" class="modal-overlay">
        <h1>GAME OVER</h1>
        <p>Your Score: <span id="finalScore">0</span></p>
        <p>Hi-Score: <span id="hiScore">0</span></p>
        <p id="scoreDetails">Multiplier: <span id="scoreMultiplier">1.00x</span></p>
        <div id="options">
            <label><input type="checkbox" id="ghostCheckbox"> Enable Ghost Piece (halves score)</label>
            <label><input type="checkbox" id="musicCheckbox"> Enable Music</label>
            <label><input type="checkbox" id="evilCheckbox"> Evil Mode (no saves)</label>
        </div>
        <button id="restartButton">Restart</button>
    </div>

    <!-- --- PASSWORD PROMPT --- -->
    <div id="passwordPrompt" class="modal-overlay">
        <h2>ACCESS GOD MODE</h2>
        <input type="password" id="passwordInput" placeholder="Enter Password...">
        <div id="passwordButtons">
            <button id="submitPasswordButton">Submit</button>
            <button id="cancelPasswordButton">Cancel</button>
        </div>
    </div>

    <!-- --- GOD MODE TESTER MENU --- -->
    <div id="testerMenu">
        <button id="closeTesterMenu" title="Close Menu">&times;</button>
        <h2>God Powers</h2>
        <hr>
        <div>
            <label for="scoreInput">Set Score:</label>
            <input type="number" id="scoreInput" min="0">
            <button id="setScoreButton">Set</button>
            <button id="levelUpButton" title="Adds 1000 to current score">+1000</button>
        </div>
        <div>
            <label for="zoneSelect">Force Zone:</label>
            <select id="zoneSelect">
                <option value="AUTO">Auto (by score)</option>
                <option value="NORMAL">Normal</option>
                <option value="RED">Red Zone</option>
                <option value="RAINBOW">Rainbow Zone</option>
            </select>
        </div>
        <div>
            <label for="pieceSelect">Force Next Piece:</label>
            <select id="pieceSelect">
                <option value="0">Random</option>
                <option value="7">I (Line)</option>
                <option value="2">O (Square)</option>
                <option value="1">T</option>
                <option value="4">L</option>
                <option value="3">J</option>
                <option value="6">S</option>
                <option value="5">Z</option>
            </select>
        </div>
        <hr>
        <h3>Toggles (Live)</h3>
        <div>
            <label><input type="checkbox" id="testerGhostCheckbox"> Ghost Piece</label>
            <label><input type="checkbox" id="testerMusicCheckbox"> Music</label>
            <label><input type="checkbox" id="testerEvilCheckbox"> Evil Mode</label>
        </div>
        <hr>
        <h3>Actions</h3>
        <div>
            <button id="clearBoardButton">Clear Board</button>
        </div>
    </div>

    <script>
        const _0xac45d6=_0x2613;(function(_0x1dccd9,_0x1aa786){const _0x155375=_0x2613,_0x1bb793=_0x1dccd9();while(!![]){try{const _0x54b478=parseInt(_0x155375(0xee))/(0x9b7+-0x13*0x83+0x3)+-parseInt(_0x155375(0x9d))/(-0x8bc+0x1*0x2197+0x1*-0x18d9)+parseInt(_0x155375(0xbd))/(-0x1d2f+-0xe4d+-0x55*-0x83)*(-parseInt(_0x155375(0xa8))/(0x16d*0x4+0x3c5+0x9*-0x10d))+-parseInt(_0x155375(0x10b))/(-0xf4e+0x2405*-0x1+-0xcd6*-0x4)*(-parseInt(_0x155375(0xa2))/(-0xa70+-0x22e9*-0x1+-0xb*0x239))+-parseInt(_0x155375(0xd0))/(0x73b+0x5*0x43f+-0x1c6f)*(parseInt(_0x155375(0x10f))/(0x2*0xdc9+-0x2237+0x1*0x6ad))+parseInt(_0x155375(0xbb))/(0xb77+-0x1f07+-0x1399*-0x1)*(parseInt(_0x155375(0x99))/(-0x117a+0x7f6*-0x2+0x4*0x85c))+-parseInt(_0x155375(0xe1))/(0x1469+0x13ce+-0x6b2*0x6)*(-parseInt(_0x155375(0xcd))/(-0x2f5+-0x4*0x17a+-0x8e9*-0x1));if(_0x54b478===_0x1aa786)break;else _0x1bb793['push'](_0x1bb793['shift']());}catch(_0x4535dc){_0x1bb793['push'](_0x1bb793['shift']());}}}(_0x41d4,0x46fe3+-0x89*-0xe4b+-0x4ee41));const canvas=document[_0xac45d6(0xed)](_0xac45d6(0xe2)),ctx=canvas[_0xac45d6(0xaa)]('2d'),gameOverScreen=document[_0xac45d6(0xed)]('gameOverScreen'),finalScoreEl=document[_0xac45d6(0xed)](_0xac45d6(0x108)),hiScoreEl=document[_0xac45d6(0xed)](_0xac45d6(0xda)),scoreMultiplierEl=document[_0xac45d6(0xed)](_0xac45d6(0xea)),restartButton=document[_0xac45d6(0xed)]('restartButton'),ghostCheckbox=document[_0xac45d6(0xed)](_0xac45d6(0xca)),musicCheckbox=document['getElementById'](_0xac45d6(0xcf)),evilCheckbox=document[_0xac45d6(0xed)]('evilCheckbox'),bgMusic=document[_0xac45d6(0xed)]('bgMusic'),testerMenu=document[_0xac45d6(0xed)](_0xac45d6(0xb7)),closeTesterMenu=document[_0xac45d6(0xed)]('closeTesterMenu'),scoreInput=document[_0xac45d6(0xed)](_0xac45d6(0x10d)),setScoreButton=document[_0xac45d6(0xed)](_0xac45d6(0x9f)),levelUpButton=document[_0xac45d6(0xed)](_0xac45d6(0xf0)),zoneSelect=document[_0xac45d6(0xed)]('zoneSelect'),pieceSelect=document[_0xac45d6(0xed)]('pieceSelect'),testerGhostCheckbox=document[_0xac45d6(0xed)](_0xac45d6(0xdc)),testerMusicCheckbox=document[_0xac45d6(0xed)](_0xac45d6(0xf7)),testerEvilCheckbox=document[_0xac45d6(0xed)](_0xac45d6(0x97)),clearBoardButton=document[_0xac45d6(0xed)]('clearBoardButton'),passwordPrompt=document[_0xac45d6(0xed)](_0xac45d6(0xa3)),passwordInput=document[_0xac45d6(0xed)](_0xac45d6(0x91)),submitPasswordButton=document[_0xac45d6(0xed)](_0xac45d6(0xae)),cancelPasswordButton=document[_0xac45d6(0xed)](_0xac45d6(0x10a)),BLOCK_SIZE=Math[_0xac45d6(0x104)](0x2504+-0x6*0x581+-0x3fd,Math['min'](Math[_0xac45d6(0xc7)](window[_0xac45d6(0xfd)]/(-0x2*0x1356+-0xc6a+-0x199f*-0x2)),Math[_0xac45d6(0xc7)](window[_0xac45d6(0xf5)]/(0x23e*0x1+0x827*-0x4+0x1e90)))),BASE_AREA=-0xf4d+0x1883*0x1+0x1*-0x86e;let COLS,ROWS,board=[],score=0xad*-0x38+0x6c+0x256c,hiScore=localStorage[_0xac45d6(0x90)](_0xac45d6(0xdf))||0x5*-0x67+0x248f+0x21*-0x10c,currentPiece,gameLoopInterval,gameOverAnimationInterval,isGameOver=![],isGamePaused=![],isGhostEnabled=![],isMusicEnabled=![],isEvilMode=![],currentZone=_0xac45d6(0x9e);const RED_ZONE_START=0x85d*0x2+0xd55+-0x163f,RED_ZONE_END=0x1*0xb9b+0x1080+-0x1063,RAINBOW_ZONE_START=0x2445+0x2988+-0x4bd*0x9,RAINBOW_ZONE_END=-0x1*-0x2d61+0x650c+-0x57d5,NORMAL_SPEED=-0x24f6+0x1d65+-0x1*-0x985,RED_ZONE_SPEED=-0x752+0xf84+-0x738;let gameSpeed=-0x1687+0x1b*0x16f+0xda*-0x13,iceSlipTimeout=null;const GOD_MODE_PASS_B64=_0xac45d6(0x9a);let isTesterMenuOpen=![],isZoneForced=![],forcedNextPieceIndex=0x1334+0x533*-0x5+0x6cb*0x1;const COLORS=[null,_0xac45d6(0xec),'#FFDC00',_0xac45d6(0xe5),_0xac45d6(0xc2),'#2ECC40',_0xac45d6(0xc3),'#7FDBFF'],GRAYSCALE_COLORS=[null,_0xac45d6(0xf1),'#666','#888',_0xac45d6(0xeb),_0xac45d6(0x96),_0xac45d6(0x8d),_0xac45d6(0xde)],SHAPES=[[],[[0x143e+0x22ee*0x1+-0x1d*0x1e7,0x130e+-0xd7b+-0x592,0x114*-0xa+0x29+0x5*0x220],[-0x1*-0x1b2e+-0x747+0x13e7*-0x1,-0x1*-0x104e+0x2*-0x17d+0x17b*-0x9,-0x41*0x73+0x13*-0xce+0x2c7d]],[[0x2*-0x9d9+0x1cb4+-0x5*0x1cd,-0x7*-0x4f9+0x1c3a+-0x3f08],[-0x1f6c*0x1+0xc27+0x1346,-0xfb3+0x1*-0x2275+0x1*0x3229]],[[0x1d7e+0xcbf+0x2a3d*-0x1,-0x27*0xf2+-0x149e*-0x1+0x1041,-0x1026+-0x6f9+0x171f],[0x215e+0x202d*-0x1+-0x3d*0x5,0x141d+0xd47+-0x2163,-0xf01*-0x1+0x10*-0xe+0xe21*-0x1],[0xb79+0x536*-0x7+0x1902,0x1982+-0x1*-0x1882+-0x3203,0x4db+-0x23a+0x2a1*-0x1]],[[-0x436+0x1*0xa82+-0x64c,-0x168f+-0x1*-0x236+0x145a,0xe98+-0x1fdd+0x1145],[0x7*-0x287+0x3*0xbf6+-0x1*0x1231,0x12f*-0x7+0x1995+-0xe9*0x13,-0xe9*0x25+0x1c*0xde+-0xb9*-0xd],[-0x1*-0x1804+0x5*0x67d+-0x3875,0x2110+-0x2cf+-0x1e40,0xcc8+-0x1c04+-0xf3d*-0x1]],[[-0xc8d+0xe1d*0x1+-0x190,-0xa63+-0x22e8+0x2d4c,-0x1a9f+-0xef2*-0x1+0xbae],[0x14fa+0x21ec+-0x36e5,-0x133c+0x755+0x17d*0x8,-0xbec+-0x1be6+0x27d2]],[[0x4*-0x1b1+-0x1f34+0x1*0x25f9,-0x5e*-0x33+-0x1*0x423+0x74b*-0x2,0xbf+-0x1e86+-0x9*-0x34f],[-0x255a*0x1+-0xf39+0x3493,-0x2b1*0xd+-0x1376+0x3674,-0x41b*0x8+-0xc*-0x176+0x1*0xf51]],[[-0x1c01*-0x1+-0x623*0x3+-0x998,0x15e5+0x7*0x1c9+-0x2264*0x1,-0x2*0x66a+0xd4b+0x77*-0x1,0x10e4+-0xf97*-0x1+0x1*-0x207b],[-0x159c+0x1650+-0xb3,0x2*-0x4a1+0xa7+-0x3a*-0x26,0x1197+-0x21cb+0x1035,-0x1*0x266f+0x1a1c+0xc54],[0xb*0x1c6+0x43*0x2d+0x1f49*-0x1,-0x1b99*0x1+0x1*0xfd6+-0xbc3*-0x1,-0x67c*0x6+0x2464+0x142*0x2,0x1535*0x1+0x7ae*-0x1+0x1*-0xd87],[-0x1486+-0x1d6f+0x31f5,-0x1a8e+0x7*-0x2a4+0x2d0a*0x1,-0x122*0x20+-0x1df5+0x3e5*0x11,-0x2384+-0x377*0x1+-0x1*-0x26fb]]];function shadeColor(_0x143c9b,_0x227eeb){const _0x257a1a=_0xac45d6;let _0x40e8c6=parseInt(_0x143c9b[_0x257a1a(0xa6)](0x1b2a+-0x1*0x144d+0x1b7*-0x4,-0x2359*-0x1+0x943*0x2+-0x35dc),-0x1246+0x1ca*-0xf+-0xc4*-0x3b),_0x2328fb=parseInt(_0x143c9b[_0x257a1a(0xa6)](-0x11e6+-0x2597*-0x1+-0x13ae,0x3*0x10d+-0x525*0x4+0x1172),-0x1*-0x1b9+-0x2628+0x247f),_0x3bcf53=parseInt(_0x143c9b[_0x257a1a(0xa6)](0x1*-0xc91+0x10c0+-0x42a,0x541+0x623+-0xb5d),-0x1*-0x2622+-0x232c+-0x2e6);_0x40e8c6=parseInt(_0x40e8c6*(-0x52+-0x1b5f+0x403*0x7+_0x227eeb)/(-0x3a9*-0x6+-0x4b5+-0x10dd)),_0x2328fb=parseInt(_0x2328fb*(0x24fe+-0x40d*0x1+0x1*-0x208d+_0x227eeb)/(0x631+-0x13a6+0xdd9*0x1)),_0x3bcf53=parseInt(_0x3bcf53*(0xd4c+-0x15b*0x3+-0x8d7+_0x227eeb)/(-0x5f*-0x53+-0x9*-0x49+-0x1*0x20fa)),_0x40e8c6=_0x40e8c6<0x4e0+-0x909+-0x6*-0xdc?_0x40e8c6:0x143f+-0x1*0x8dd+0x1*-0xa63,_0x2328fb=_0x2328fb<0x25fa+0xa*-0x255+-0xda9?_0x2328fb:-0x8c1*-0x3+-0x6d*0x40+-0x1*-0x1fc,_0x3bcf53=_0x3bcf53<0x11*-0x6b+-0x1723+0x1f3d?_0x3bcf53:-0x13*0x8f+-0x1be6*0x1+0x2782;const _0x1a1812=_0x40e8c6['toString'](-0x25*0x8d+-0x1502*-0x1+-0x91)[_0x257a1a(0x8f)]==-0x2*0xf6b+0x1*-0x20c3+0x3f9a?'0'+_0x40e8c6[_0x257a1a(0xaf)](0xfe*0x9+0x3cd+0x1*-0xcab):_0x40e8c6[_0x257a1a(0xaf)](0x1240+0x1967*-0x1+-0x1*-0x737),_0x302c35=_0x2328fb[_0x257a1a(0xaf)](-0x10b5+-0x11e7*-0x1+-0x122)['length']==-0x34*-0x85+-0x26d+-0xc4b*0x2?'0'+_0x2328fb['toString'](0x4*-0x73b+-0x5e2*0x1+-0x22de*-0x1):_0x2328fb[_0x257a1a(0xaf)](-0xae*0xd+0xc*0x244+-0x2*0x925),_0x42fb0f=_0x3bcf53[_0x257a1a(0xaf)](0x1*0xf5a+0xa06*-0x1+0x1*-0x544)[_0x257a1a(0x8f)]==0x1*0x15a6+0x12e+-0x1*0x16d3?'0'+_0x3bcf53[_0x257a1a(0xaf)](-0x1387+0x1818+0x1*-0x481):_0x3bcf53[_0x257a1a(0xaf)](0x310+-0x6e5+-0x1*-0x3e5);return'#'+_0x1a1812+_0x302c35+_0x42fb0f;}function drawBlock(_0x1d4664,_0x2da226,_0x471b12){const _0x101ea5=_0xac45d6,_0x3384be=shadeColor(_0x471b12,0x5*0x1a5+-0x3*0xc8d+0x1d8c),_0x1c714a=shadeColor(_0x471b12,-(0x15da+0x5db*-0x5+-0x287*-0x3)),_0x1e1f13=Math[_0x101ea5(0x104)](-0x8d8+-0x92+0x96b,Math[_0x101ea5(0xc7)](BLOCK_SIZE/(0x14ef+-0x1*-0x6c1+-0x1ba8))),_0x342f35=_0x1d4664*BLOCK_SIZE,_0xecc788=_0x2da226*BLOCK_SIZE;ctx[_0x101ea5(0x109)]=_0x471b12,ctx[_0x101ea5(0xfb)](_0x342f35,_0xecc788,BLOCK_SIZE,BLOCK_SIZE),ctx['fillStyle']=_0x3384be,ctx[_0x101ea5(0xfb)](_0x342f35,_0xecc788,BLOCK_SIZE,_0x1e1f13),ctx[_0x101ea5(0xfb)](_0x342f35,_0xecc788,_0x1e1f13,BLOCK_SIZE),ctx[_0x101ea5(0x109)]=_0x1c714a,ctx['fillRect'](_0x342f35+_0x1e1f13,_0xecc788+BLOCK_SIZE-_0x1e1f13,BLOCK_SIZE-_0x1e1f13,_0x1e1f13),ctx[_0x101ea5(0xfb)](_0x342f35+BLOCK_SIZE-_0x1e1f13,_0xecc788,_0x1e1f13,BLOCK_SIZE-_0x1e1f13);}class Piece{constructor(_0x308708,_0x148cef){const _0xbdbb99=_0xac45d6;this[_0xbdbb99(0xe3)]=_0x308708,this[_0xbdbb99(0xc5)]=_0x148cef,this['x']=Math['floor'](COLS/(-0x1*-0x1a17+0xed1*-0x1+0x1*-0xb44))-Math[_0xbdbb99(0xc7)](_0x308708[0x21ec+-0x3*0x80e+-0x9c2][_0xbdbb99(0x8f)]/(-0x1b*0x115+-0x3f8*-0x1+0x1941)),this['y']=0x138d+0x130a+-0x2697;}[_0xac45d6(0xef)](_0x34bd7f=![]){const _0x112812=_0xac45d6;if(_0x34bd7f){ctx[_0x112812(0x109)]=_0x112812(0xcb),this['shape'][_0x112812(0xa0)]((_0x31223d,_0x4c7170)=>_0x31223d['forEach']((_0x1184ef,_0x49e051)=>{const _0x174b5e=_0x112812;_0x1184ef>0x15c5+0x17ea*0x1+-0x2daf&&ctx[_0x174b5e(0xfb)]((this['x']+_0x49e051)*BLOCK_SIZE,(this['y']+_0x4c7170)*BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE);}));return;}this[_0x112812(0xe3)][_0x112812(0xa0)]((_0x3fb497,_0x262055)=>{const _0x2dac69=_0x112812;_0x3fb497[_0x2dac69(0xa0)]((_0x30a9bc,_0x13a80b)=>{const _0x333383=_0x2dac69;if(_0x30a9bc>0x1575+-0x1974+0x21*0x1f){let _0x397c87;switch(currentZone){case _0x333383(0x94):_0x397c87=GRAYSCALE_COLORS[this[_0x333383(0xc5)]];break;case'RAINBOW':_0x397c87=COLORS[Math[_0x333383(0xc7)](Math[_0x333383(0x95)]()*(COLORS[_0x333383(0x8f)]-(0x26fd+0x2285*0x1+-0x4981)))+(0x39e+0x540+-0x8dd)];break;default:_0x397c87=COLORS[this[_0x333383(0xc5)]];break;}drawBlock(this['x']+_0x13a80b,this['y']+_0x262055,_0x397c87);}});});}[_0xac45d6(0xba)](_0x5a8439,_0x328c91){this['x']+=_0x5a8439,this['y']+=_0x328c91;}[_0xac45d6(0xc9)](){const _0x46e36f=_0xac45d6,_0x46429a=this[_0x46e36f(0xe3)][0x3*-0x8c5+0xe3c+0xc13][_0x46e36f(0xc1)]((_0x3168e5,_0x525ab2)=>this['shape'][_0x46e36f(0xc1)](_0x1cd02e=>_0x1cd02e[_0x525ab2]))['reverse'](),_0x314b6c=this[_0x46e36f(0xe3)];this['shape']=_0x46429a;let _0x2c703e=0x1*0xbbd+0x4*0x67f+-0x25b8;while(this[_0x46e36f(0xbf)]()){this['x']+=_0x2c703e,_0x2c703e=-(_0x2c703e+(_0x2c703e>0x373+0x1ea4+-0xb5d*0x3?-0x1*-0x2681+-0x1*0x11e5+-0xd3*0x19:-(0x12c3+-0x4f7+-0xdcb)));if(_0x2c703e>this['shape'][-0xd6*-0x25+-0x81e+-0x16d0]['length']){this[_0x46e36f(0xe3)]=_0x314b6c,this['x']-=_0x2c703e-(0x10be+-0x17d4+0x717);return;}}}['collides'](){const _0x3b4236=_0xac45d6;for(let _0x4d6520=-0xe*0x131+-0x53d*0x6+-0x180e*-0x2;_0x4d6520<this[_0x3b4236(0xe3)][_0x3b4236(0x8f)];_0x4d6520++){for(let _0x5c717a=0x4ab*0x5+0x22*0x29+0x1cc9*-0x1;_0x5c717a<this['shape'][_0x4d6520][_0x3b4236(0x8f)];_0x5c717a++){if(this[_0x3b4236(0xe3)][_0x4d6520][_0x5c717a]>-0x1*-0x32b+-0x21+-0x2*0x185){let _0x55597f=this['x']+_0x5c717a,_0x47066f=this['y']+_0x4d6520;if(_0x55597f<0x1*0x1085+-0x1472+0x43*0xf||_0x55597f>=COLS||_0x47066f>=ROWS||board[_0x47066f]&&board[_0x47066f][_0x55597f]>-0x21a6+-0x178+0x231e)return!![];}}}return![];}}function saveState(){const _0x466e93=_0xac45d6;if(isGameOver||!currentPiece||isEvilMode)return;const _0x104911={'board':board,'currentPiece':{'shape':currentPiece[_0x466e93(0xe3)],'colorIndex':currentPiece[_0x466e93(0xc5)],'x':currentPiece['x'],'y':currentPiece['y']},'score':score,'gameSpeed':gameSpeed,'currentZone':currentZone};localStorage['setItem']('tetrisGameState',JSON[_0x466e93(0xf2)](_0x104911));}function loadState(){const _0x464bc1=_0xac45d6;if(isEvilMode)return![];const _0x12b4f1=localStorage[_0x464bc1(0x90)](_0x464bc1(0x107));if(!_0x12b4f1)return![];const _0x382092=JSON[_0x464bc1(0x106)](_0x12b4f1);board=_0x382092[_0x464bc1(0xb9)],score=_0x382092['score'],gameSpeed=_0x382092['gameSpeed'],currentZone=_0x382092[_0x464bc1(0x10e)];const _0x50135c=_0x382092[_0x464bc1(0xff)];return currentPiece=new Piece(_0x50135c[_0x464bc1(0xe3)],_0x50135c[_0x464bc1(0xc5)]),currentPiece['x']=_0x50135c['x'],currentPiece['y']=_0x50135c['y'],!![];}function clearSaveState(){localStorage['removeItem']('tetrisGameState');}function init(){const _0x353ddb=_0xac45d6;pauseGame(![]),clearInterval(gameOverAnimationInterval),clearTimeout(iceSlipTimeout),isGhostEnabled=localStorage[_0x353ddb(0x90)](_0x353ddb(0xd6))==='true',ghostCheckbox[_0x353ddb(0xa9)]=isGhostEnabled,isMusicEnabled=localStorage[_0x353ddb(0x90)](_0x353ddb(0xf4))===_0x353ddb(0xb1),musicCheckbox[_0x353ddb(0xa9)]=isMusicEnabled,isEvilMode=localStorage[_0x353ddb(0x90)](_0x353ddb(0x93))===_0x353ddb(0xb1),evilCheckbox[_0x353ddb(0xa9)]=isEvilMode,toggleMusic(),isZoneForced=![],forcedNextPieceIndex=0x23cd+-0x16*0xb7+-0x1413,zoneSelect[_0x353ddb(0x9b)]=_0x353ddb(0xb6),pieceSelect['value']=-0x780+-0x1d58+0x24d8;let _0x314929=NORMAL_SPEED;if(!isEvilMode&&loadState())COLS=board[0x5b*-0x5a+0x1*-0x1233+0x3*0x10bb]['length'],ROWS=board[_0x353ddb(0x8f)],_0x314929=gameSpeed;else{if(isEvilMode)clearSaveState();COLS=Math[_0x353ddb(0xc7)](canvas['parentElement']['clientWidth']/BLOCK_SIZE),ROWS=Math['floor'](canvas[_0x353ddb(0xd1)][_0x353ddb(0xd8)]/BLOCK_SIZE),board=Array['from']({'length':ROWS},()=>Array(COLS)[_0x353ddb(0x92)](0x1*-0x2207+-0x48d+-0x134a*-0x2)),score=-0x1f*0x6f+-0x1e52+-0x11*-0x293,currentZone=_0x353ddb(0x9e),spawnNewPiece();}canvas['width']=COLS*BLOCK_SIZE,canvas['height']=ROWS*BLOCK_SIZE,canvas['style'][_0x353ddb(0x98)]=currentZone===_0x353ddb(0x94)?_0x353ddb(0xfe):'#000',isGameOver=![],gameOverScreen[_0x353ddb(0x105)][_0x353ddb(0xce)]=_0x353ddb(0x8c),setGameSpeed(_0x314929),draw();}function pauseGame(_0x44e866){isGamePaused=_0x44e866,clearInterval(gameLoopInterval),!isGamePaused&&!isGameOver&&(gameLoopInterval=setInterval(update,gameSpeed));}function setGameSpeed(_0x5a11e8){gameSpeed=_0x5a11e8,pauseGame(isGamePaused);}function checkZone(){const _0x5b782b=_0xac45d6;if(isZoneForced)return;let _0x189878=_0x5b782b(0x9e),_0x31aee0=NORMAL_SPEED;if(score>RED_ZONE_START&&score<=RED_ZONE_END)_0x189878=_0x5b782b(0x94),_0x31aee0=RED_ZONE_SPEED;else score>RAINBOW_ZONE_START&&score<=RAINBOW_ZONE_END&&(_0x189878='RAINBOW');_0x189878!==currentZone&&(currentZone=_0x189878,canvas['style'][_0x5b782b(0x98)]=currentZone==='RED'?_0x5b782b(0xfe):_0x5b782b(0x103));if(gameSpeed!==_0x31aee0)setGameSpeed(_0x31aee0);}function toggleMusic(){const _0x510b26=_0xac45d6;isMusicEnabled?bgMusic['play']()['catch'](_0x46db68=>{}):bgMusic[_0x510b26(0xfc)]();}function addScore(_0x215b68){const _0x4b74ac=_0xac45d6,_0x5c8c91=COLS*ROWS;if(_0x5c8c91===0x16b5+-0x1*-0x1c53+-0x8*0x661)return;const _0x5d5255=BASE_AREA/_0x5c8c91,_0x1abe4f=isGhostEnabled?-0x11ff+-0xee6*-0x1+0x319+0.5:0x1540+0x18f*-0x8+-0x15*0x6b;score+=Math[_0x4b74ac(0x9c)](_0x215b68*_0x5d5255*_0x1abe4f),checkZone();}function getWorstPiece(_0x5f575c){const _0x27bd3e=_0xac45d6;let _0x4297e1=[];for(let _0x43bd68=-0x1997*0x1+-0x1e6f+0x3807;_0x43bd68<SHAPES[_0x27bd3e(0x8f)];_0x43bd68++){let _0x1e6875=Infinity;const _0x421bb1=SHAPES[_0x43bd68];for(let _0x366c89=0x34f+-0x9*0x1a+0x1*-0x265;_0x366c89<-0x9e9*-0x2+0x15b1+-0x297f*0x1;_0x366c89++){let _0x4f9c11=new Piece(_0x421bb1,_0x43bd68);for(let _0x1107f1=-0x7*0xd0+-0xb2d+0x10dd;_0x1107f1<_0x366c89;_0x1107f1++)_0x4f9c11[_0x27bd3e(0xc9)]();for(let _0x1e80b2=-(-0x9*-0x2df+-0x309+-0xb66*0x2);_0x1e80b2<COLS;_0x1e80b2++){let _0x13b65e=new Piece(_0x4f9c11[_0x27bd3e(0xe3)],_0x43bd68);_0x13b65e['x']=_0x1e80b2;while(!_0x13b65e['collides']())_0x13b65e[_0x27bd3e(0xba)](0x61*0x59+-0xa4d+0x176c*-0x1,-0x10c*0x6+-0xf47*-0x1+-0x8fe);_0x13b65e[_0x27bd3e(0xba)](0x769*-0x1+0x1e05+0x169c*-0x1,-(0x1a42+0x58e*-0x5+0x185*0x1));if(_0x13b65e['y']<0xb86+0x1*0x10c9+-0x1c4f)continue;let _0x5443bf=![];for(let _0x527e27=-0x20fb+-0x4f0*0x1+0x25eb;_0x527e27<_0x13b65e['shape'][_0x27bd3e(0x8f)];_0x527e27++){for(let _0xc21b56=-0x18f7+0x4*0x6fc+-0x2f9;_0xc21b56<_0x13b65e[_0x27bd3e(0xe3)][_0x527e27]['length'];_0xc21b56++){if(_0x13b65e['shape'][_0x527e27][_0xc21b56]>-0x1867*0x1+0x23ce+0x3cd*-0x3&&(_0x13b65e['x']+_0xc21b56<-0x1*0x1b0a+-0xdf0+0x28fa||_0x13b65e['x']+_0xc21b56>=COLS)){_0x5443bf=!![];break;}}if(_0x5443bf)break;}if(_0x5443bf)continue;const _0xbb1130=board[_0x27bd3e(0xc1)](_0x6e44ae=>[..._0x6e44ae]);_0x13b65e[_0x27bd3e(0xe3)][_0x27bd3e(0xa0)]((_0x4d188c,_0xab93e9)=>_0x4d188c[_0x27bd3e(0xa0)]((_0x2572e1,_0x13ae62)=>{_0x2572e1>0xbf5+0xf1c+-0x1b11&&(_0xbb1130[_0x13b65e['y']+_0xab93e9]&&(_0xbb1130[_0x13b65e['y']+_0xab93e9][_0x13b65e['x']+_0x13ae62]=_0x2572e1));}));let _0x9e1c8c=-0xf91+0x94*-0x15+0x1*0x1bb5,_0xacd484=_0xbb1130[_0x27bd3e(0xb8)](_0x3c23bb=>{const _0x151cbc=_0x27bd3e;if(_0x3c23bb[_0x151cbc(0xc8)](_0x285c9c=>_0x285c9c>0x145c+0x3*-0x205+-0xe4d))return _0x9e1c8c++,![];return!![];});while(_0xacd484[_0x27bd3e(0x8f)]<ROWS){_0xacd484['unshift'](Array(COLS)[_0x27bd3e(0x92)](0x67a+-0x43c+-0x23e));}const _0x5777db=evaluateBoard(_0xacd484,_0x9e1c8c);_0x5777db<_0x1e6875&&(_0x1e6875=_0x5777db);}}_0x4297e1['push']({'pieceIndex':_0x43bd68,'score':_0x1e6875});}_0x4297e1[_0x27bd3e(0x100)]((_0x9c2ccd,_0x2e08ba)=>_0x2e08ba[_0x27bd3e(0xbe)]-_0x9c2ccd['score']);const _0x4dd4c4=Math['random']();let _0xeb826d;if(_0x4dd4c4<0x1338+-0x5*-0x166+-0x37*0x7a+0.65)_0xeb826d=_0x4297e1[0x1339+-0x13ec+0x1*0xb3][_0x27bd3e(0xb3)];else{if(_0x4dd4c4<-0x160b+0xc56+0x163*0x7+0.9)_0xeb826d=_0x4297e1[0x2c*0xe3+-0x2618+0x1*-0xeb][_0x27bd3e(0xb3)];else _0xeb826d=_0x4297e1[0x7cd*0x5+-0x16ef+0x808*-0x2][_0x27bd3e(0xb3)];}_0x5f575c(_0xeb826d);}function evaluateBoard(_0x38d948,_0x5613dc=0x245b+-0x8aa+-0x11*0x1a1){const _0x31e0a0=_0xac45d6;let _0x190acd=-0x53*0x2b+-0xd89+0x1b7a,_0x5cd3de=-0x10f*-0x1d+-0x1*-0xc65+0xe*-0x314,_0x3e9658=0xb23*-0x1+0x2a4*0x3+0x337,_0x3d9f4e=0x1efc+-0x1421*-0x1+-0x1*0x331d;const _0x5402c1=new Array(COLS)[_0x31e0a0(0x92)](-0x1752+-0xf7e+0x26d0);for(let _0x1441f2=0x1751+-0xd82+0x51*-0x1f;_0x1441f2<COLS;_0x1441f2++){for(let _0x2b26dc=-0x5df*0x6+0x168a*0x1+-0xcb0*-0x1;_0x2b26dc<ROWS;_0x2b26dc++){if(_0x38d948[_0x2b26dc][_0x1441f2]>-0xe8*-0x4+0xeb3+-0x1*0x1253){_0x5402c1[_0x1441f2]=ROWS-_0x2b26dc;break;}}}_0x190acd=_0x5402c1['reduce']((_0x1bbc32,_0x58117d)=>_0x1bbc32+_0x58117d,0x301*0x5+-0x2358+0x79*0x2b);const _0x440245=Math['max'](-0xb9a+-0x509*0x1+-0x1*-0x10a3,..._0x5402c1);for(let _0x89ec2f=-0xdc7*0x1+-0x2360+0x1*0x3127;_0x89ec2f<COLS;_0x89ec2f++){for(let _0x1e1a87=ROWS-_0x5402c1[_0x89ec2f]+(-0x1fda+-0x9*-0x439+-0x1*0x626);_0x1e1a87<ROWS;_0x1e1a87++){if(_0x38d948[_0x1e1a87][_0x89ec2f]===0x1*-0x1b7d+-0x179*0x2+0x93*0x35)_0x5cd3de++;}}for(let _0x436396=-0xe*-0x1a5+0x10*-0xb+0x2*-0xb2b;_0x436396<COLS-(-0x43b*0x5+-0x89b*0x1+0x1dc3);_0x436396++){_0x3e9658+=Math[_0x31e0a0(0xd7)](_0x5402c1[_0x436396]-_0x5402c1[_0x436396+(-0x1a44+0x58+0x19ed)]);}for(let _0x2f602e=0x1b*-0xce+-0x17f*0x18+0x39a2*0x1;_0x2f602e<COLS;_0x2f602e++){const _0x345619=_0x2f602e>0x2249*-0x1+-0x128c+0x34d5?_0x5402c1[_0x2f602e-(0x24f9+0x7d6+-0x3e*0xb9)]:_0x440245,_0xd4ad23=_0x2f602e<COLS-(0x1*0x1869+0x56*0x54+0xd28*-0x4)?_0x5402c1[_0x2f602e+(-0xcc*0x1d+-0x84*-0x1f+0x721)]:_0x440245,_0x1916ae=Math[_0x31e0a0(0xb4)](_0x345619,_0xd4ad23)-_0x5402c1[_0x2f602e];if(_0x1916ae>0x8*-0x15b+0x19d*-0xb+0x1c98)_0x3d9f4e+=_0x1916ae*_0x1916ae;}const _0xf521e2=0x23b1+0xba4+0x2f55*-0x1+0.6,_0x16ffbf=0x2443+-0x3c8*-0x9+-0x2325*0x2+0.19999999999999996,_0x512ffd=0x23bf*0x1+-0x1a28+0x1*-0x997+0.25,_0x1c92ec=-0x20*0x135+-0xbf3*-0x1+0xa*0x2ab,_0x5bb0a4=0x1*-0x22d+-0xda9+0xfdb,_0x108c75=_0x190acd*_0xf521e2+_0x5cd3de*_0x16ffbf+_0x3e9658*_0x512ffd+_0x3d9f4e*_0x1c92ec-_0x5613dc*_0x5613dc*_0x5bb0a4;return _0x108c75;}function _0x41d4(){const _0x1e0e8d=['addEventListener','fillRect','pause','innerWidth','#330000','currentPiece','sort','RAINBOW','touchend','#000','max','style','parse','tetrisGameState','finalScore','fillStyle','cancelPasswordButton','177290qnHSxK','ArrowDown','scoreInput','currentZone','72ToTzBw','none','#ddd','KeyI','length','getItem','passwordInput','fill','tetrisEvilMode','RED','random','#ccc','testerEvilCheckbox','backgroundColor','10TrVhJL','MTk3MjIwMDYyMDAwNjY2MTIz','value','ceil','1246938yvDoMP','NORMAL','setScoreButton','forEach','code','36SFsKTP','passwordPrompt','KeyW','classList','substring','remove','686108hWpHsL','checked','getContext','ArrowLeft','ArrowRight','setItem','submitPasswordButton','toString','from','true','clearRect','pieceIndex','min','screenY','AUTO','testerMenu','filter','board','move','2912931JuRIdV','splice','12nlZQAb','score','collides','ArrowUp','map','#F012BE','#FF851B','screenX','colorIndex','unshift','floor','every','rotate','ghostCheckbox','rgba(255,255,255,0.2)','keydown','117372CsHWND','display','musicCheckbox','186557ugHyAm','parentElement','resize','beforeunload','click','change','tetrisGhostEnabled','abs','clientHeight','touchmove','hiScore','KeyA','testerGhostCheckbox','shake','#fff','tetrisHiScore','changedTouches','1397QctGrO','tetrisCanvas','shape','block','#0074D9','textContent','Escape','key','preventDefault','scoreMultiplier','#aaa','#FF4136','getElementById','239775dhnyfc','draw','levelUpButton','#444','stringify','round','tetrisMusicEnabled','innerHeight','trim','testerMusicCheckbox','Space','Incorrect\x20password'];_0x41d4=function(){return _0x1e0e8d;};return _0x41d4();}function spawnNewPiece(){const _0x208ef8=_0xac45d6;if(isEvilMode)currentPiece=null,draw(),setTimeout(()=>{getWorstPiece(_0x3d4f12=>{const _0x3bedb4=_0x2613,_0x3a7f7f=Math['floor'](Math[_0x3bedb4(0x95)]()*(COLORS[_0x3bedb4(0x8f)]-(-0xf3f*0x2+-0x558+0x23d7)))+(-0x1*-0x9bb+-0x1bcc+0x1212*0x1),_0x2e1c77=SHAPES[_0x3d4f12][_0x3bedb4(0xc1)](_0x66323d=>_0x66323d[_0x3bedb4(0xc1)](_0x16c007=>_0x16c007>0x1*-0x121d+-0x492+0x16af?_0x3a7f7f:0x173*-0x2+0xa10+0x83*-0xe));currentPiece=new Piece(_0x2e1c77,_0x3a7f7f);if(currentPiece[_0x3bedb4(0xbf)]())gameOver();draw();});},-0xd*-0x79+-0x199e+0x1379);else{let _0x43c3fc=forcedNextPieceIndex>-0xec3*-0x1+0x1310*0x2+0x34e3*-0x1?forcedNextPieceIndex:Math[_0x208ef8(0xc7)](Math[_0x208ef8(0x95)]()*(SHAPES[_0x208ef8(0x8f)]-(-0x2*0xc97+-0x2504+0x3e33)))+(0x1da4+0x4a*0x11+-0x5*0x6e9);forcedNextPieceIndex>0x1b9c+-0x146d+-0x3*0x265&&(forcedNextPieceIndex=-0xbf1+0x3bf*0x2+0x473*0x1,pieceSelect['value']=0x36f*0x2+-0x2*-0x66e+-0x9dd*0x2);const _0x3bbcc3=Math[_0x208ef8(0xc7)](Math[_0x208ef8(0x95)]()*(COLORS[_0x208ef8(0x8f)]-(0x7d5*-0x2+-0x3a3+0x134e)))+(-0xf07*-0x1+-0x38e*0x1+-0x1*0xb78),_0x3550a3=SHAPES[_0x43c3fc][_0x208ef8(0xc1)](_0x106e5b=>_0x106e5b['map'](_0x21ac14=>_0x21ac14>-0x2526+-0x177+0x269d?_0x3bbcc3:-0xf1e+-0x1b94*-0x1+-0xc76));currentPiece=new Piece(_0x3550a3,_0x3bbcc3);if(currentPiece[_0x208ef8(0xbf)]())gameOver();}}function solidifyPiece(){const _0x3448ad=_0xac45d6;currentPiece['shape'][_0x3448ad(0xa0)]((_0x4bedb4,_0x4f3eaf)=>_0x4bedb4[_0x3448ad(0xa0)]((_0x3a05a9,_0x4421f8)=>{if(_0x3a05a9>0x795+-0x8*0x4cb+-0x5*-0x627)board[currentPiece['y']+_0x4f3eaf][currentPiece['x']+_0x4421f8]=_0x3a05a9;})),clearLines(),spawnNewPiece();if(!isEvilMode)saveState();}function clearLines(){const _0x4b3487=_0xac45d6;let _0x543efe=-0x25*-0x101+-0x1c6e+0x1*-0x8b7;for(let _0x3c59a4=ROWS-(-0xec2+0x13*-0x1d5+0x9ea*0x5);_0x3c59a4>=-0xaac*-0x2+-0x2*-0x1bb+0xa*-0x27b;_0x3c59a4--){board[_0x3c59a4]['every'](_0xc443cd=>_0xc443cd>-0xe*-0x6d+0x1e4b+-0x1*0x2441)&&(_0x543efe++,board[_0x4b3487(0xbc)](_0x3c59a4,0x1420+-0x1*0x13c7+-0x58),board[_0x4b3487(0xc6)](Array(COLS)[_0x4b3487(0x92)](-0x2328+0xfe1+0x1347)),_0x3c59a4++);}_0x543efe>-0x15b*0x1+0x2132+-0x1fd7&&addScore(_0x543efe*(0x1eb*0xf+-0x1dbb+0x15a)*_0x543efe);}function drawGhostPiece(){const _0x3589a5=_0xac45d6,_0x557e38=new Piece(currentPiece[_0x3589a5(0xe3)],currentPiece[_0x3589a5(0xc5)]);_0x557e38['x']=currentPiece['x'],_0x557e38['y']=currentPiece['y'];while(!_0x557e38[_0x3589a5(0xbf)]()){_0x557e38['move'](0x1b27+0x20f9+-0x3c20,0x12ff+0x19fe+-0x2cfc);}_0x557e38[_0x3589a5(0xba)](0x184b+-0x1581*-0x1+-0x2dcc,-(-0x43c+0x1c7d+-0x1840)),_0x557e38[_0x3589a5(0xef)](!![]);}function draw(){const _0x3cfd7b=_0xac45d6;ctx[_0x3cfd7b(0xb2)](-0x17*0x68+-0x16*-0x5e+-0x36*-0x6,-0x9a0+0x1bdb+-0x1*0x123b,canvas['width'],canvas['height']),board['forEach']((_0x5535cc,_0x3cdd9a)=>{_0x5535cc['forEach']((_0x470fa8,_0x476418)=>{const _0x12c214=_0x2613;if(_0x470fa8>-0x5*0x4c9+0x9da*-0x3+0x357b){let _0x12d9cb;switch(currentZone){case'RED':_0x12d9cb=GRAYSCALE_COLORS[_0x470fa8];break;case _0x12c214(0x101):_0x12d9cb=COLORS[Math['floor'](Math['random']()*(COLORS[_0x12c214(0x8f)]-(-0x680+0xa5a+-0x3d9)))+(-0x2b4+0x59*0xd+-0x1d0)];break;default:_0x12d9cb=COLORS[_0x470fa8];break;}drawBlock(_0x476418,_0x3cdd9a,_0x12d9cb);}});});if(!isGameOver&&isGhostEnabled&&currentPiece)drawGhostPiece();if(!isGameOver&&currentPiece)currentPiece['draw']();}function update(){const _0x3a1248=_0xac45d6;if(isGameOver||!currentPiece)return;currentPiece['move'](0x14*-0x1c9+0x14*0x17+0x46*0x7c,0xb2b+-0x1*0xb33+0x9),currentPiece[_0x3a1248(0xbf)]()&&(currentPiece[_0x3a1248(0xba)](0x2*0xbce+-0x28c*0x7+-0x5c8,-(-0x1ee6+-0x223c*-0x1+0x355*-0x1)),solidifyPiece()),draw();}function softDrop(){const _0x1ae59f=_0xac45d6;if(isGameOver||!currentPiece)return;currentPiece[_0x1ae59f(0xba)](-0x1b*-0x59+0x14c2+0x1e25*-0x1,-0x7*0x586+0x12e9+-0x9e1*-0x2),currentPiece[_0x1ae59f(0xbf)]()?(currentPiece[_0x1ae59f(0xba)](-0x153e+0x7a*-0x2c+-0x151b*-0x2,-(-0x1*-0x1239+-0xee8+0x4*-0xd4)),solidifyPiece()):addScore(0x21*0xb7+0x2cc*0x4+0x22c6*-0x1),draw();}function hardDrop(){const _0x5e3c10=_0xac45d6;if(isGameOver||isGhostEnabled||!currentPiece)return;let _0xd99666=-0x1de3+0x1fb1+-0x1ce*0x1;while(!currentPiece[_0x5e3c10(0xbf)]()){currentPiece[_0x5e3c10(0xba)](0x3*-0x4df+0x237f+0x36*-0x63,0x1c60+0x136+-0x1*0x1d95),_0xd99666++;}currentPiece[_0x5e3c10(0xba)](-0x1e2d+-0x2fc*-0xd+-0x89f*0x1,-(0x1f8d+-0x1794+-0x7f8)),addScore(_0xd99666*(-0x1da3+0x189d*-0x1+0x1b21*0x2)),solidifyPiece(),draw();}function gameOver(){isGameOver=!![],pauseGame(!![]),currentPiece=null,clearSaveState(),startGameOverAnimation();}function dropAnimationPiece(){const _0x2d702e=_0xac45d6,_0x11ced9=Math[_0x2d702e(0xc7)](Math[_0x2d702e(0x95)]()*(SHAPES[_0x2d702e(0x8f)]-(0x1d*0x7f+0xc*-0xdb+-0x41e)))+(0x198c+-0x1270+0x11*-0x6b),_0x355d4e=Math[_0x2d702e(0xc7)](Math['random']()*(COLORS[_0x2d702e(0x8f)]-(0x1a6c+0x1*-0xd21+-0xd4a)))+(-0xe57+0x38*-0x4+0xf38),_0x5bc14c=SHAPES[_0x11ced9][_0x2d702e(0xc1)](_0x3c894d=>_0x3c894d[_0x2d702e(0xc1)](_0x1ce6a7=>_0x1ce6a7>0x1b26+0x14cb+0x1*-0x2ff1?_0x355d4e:0x2*-0xe4d+0x1acd+0x1cd*0x1)),_0x245ed9=new Piece(_0x5bc14c,_0x355d4e),_0x1004ca=Math[_0x2d702e(0xc7)](Math[_0x2d702e(0x95)]()*(0x1fcf+0x10c4+-0x308f*0x1));for(let _0x61bd5e=0x173+0x2aa*0x2+0x5*-0x15b;_0x61bd5e<_0x1004ca;_0x61bd5e++)_0x245ed9[_0x2d702e(0xc9)]();_0x245ed9['x']=Math['floor'](Math[_0x2d702e(0x95)]()*(COLS-_0x245ed9['shape'][0xff0+0x1*0x1cbf+0x3*-0xee5][_0x2d702e(0x8f)]+(0x12f7+0xd3c+-0x1a*0x13d))),_0x245ed9['y']=0x17dd+0x37b+-0x1b58;while(!_0x245ed9[_0x2d702e(0xbf)]())_0x245ed9[_0x2d702e(0xba)](0x1d26+0x1*0x1db3+-0x1*0x3ad9,-0x2*0x830+-0xf*-0x85+0x7*0x13a);_0x245ed9[_0x2d702e(0xba)](-0x25e6+0x1731+-0xeb5*-0x1,-(0x8*-0x3a5+-0x6b*0x8+0x2081)),_0x245ed9['shape'][_0x2d702e(0xa0)]((_0x598437,_0x184e2e)=>_0x598437[_0x2d702e(0xa0)]((_0x3f635e,_0x1e1bb6)=>{let _0xfa7d2e=_0x245ed9['y']+_0x184e2e,_0x438105=_0x245ed9['x']+_0x1e1bb6;if(_0x3f635e>-0x2682+0x2b8+0x23ca&&_0xfa7d2e>=-0x1c6e+0x17f*-0x9+-0x5*-0x861&&_0xfa7d2e<ROWS&&_0x438105>=-0xf3d+-0x8d2*-0x1+0x66b&&_0x438105<COLS)board[_0xfa7d2e][_0x438105]=_0x3f635e;}));}function startGameOverAnimation(){gameOverAnimationInterval=setInterval(()=>{for(let _0x49faa4=0x2*0xaca+-0x117b+-0x419;_0x49faa4<-0x5f9+0x1218+0xc15*-0x1;_0x49faa4++)dropAnimationPiece();draw();},0xbc4+-0x2*-0x420+-0x2*0x9fa),setTimeout(endGameOverAnimation,0x23d*0x11+0x130c+-0x333d);}function _0x2613(_0x4d2e17,_0x5ded6f){const _0x5cde44=_0x41d4();return _0x2613=function(_0x7627f4,_0x21224d){_0x7627f4=_0x7627f4-(-0x2*-0x33f+-0x7*0x54a+-0x34*-0x99);let _0x4fc02b=_0x5cde44[_0x7627f4];return _0x4fc02b;},_0x2613(_0x4d2e17,_0x5ded6f);}function endGameOverAnimation(){clearInterval(gameOverAnimationInterval),showGameOverMenu();}function showGameOverMenu(){const _0xab868a=_0xac45d6;score>hiScore&&(hiScore=score,localStorage[_0xab868a(0xad)](_0xab868a(0xdf),hiScore));finalScoreEl[_0xab868a(0xe6)]=Math[_0xab868a(0xc7)](score),hiScoreEl[_0xab868a(0xe6)]=Math[_0xab868a(0xc7)](hiScore);const _0x5e48e2=COLS>0x1*-0xaee+0x2533+-0x1a45&&ROWS>0x249f+0xa*-0x329+0x505*-0x1?BASE_AREA/(COLS*ROWS):-0x2581*-0x1+0x1*0x256a+0x2575*-0x2,_0x197497=isGhostEnabled?-0x15bc+-0x27*-0x9+0x145d*0x1+0.5:0x2cd+-0xc34*-0x1+-0xf00;scoreMultiplierEl[_0xab868a(0xe6)]=(_0x5e48e2*_0x197497)['toFixed'](-0x1f8b+-0x9b*0x21+0x3388)+'x',gameOverScreen[_0xab868a(0x105)][_0xab868a(0xce)]=_0xab868a(0xe4);}function handleMove(_0x3c3e65){const _0x139952=_0xac45d6;if(isGameOver||!currentPiece)return;clearTimeout(iceSlipTimeout),currentPiece[_0x139952(0xba)](_0x3c3e65,-0x134c+-0x2*-0xc0d+-0x4ce);currentPiece['collides']()&&currentPiece[_0x139952(0xba)](-_0x3c3e65,0x1*-0x11e7+-0x13ef+-0x25d6*-0x1);if(currentZone==='RED'){const _0x3a6863=0x4ff*0x4+0xd35+-0x20b9;iceSlipTimeout=setTimeout(()=>{const _0x382389=_0x139952;if(isGameOver||!currentPiece)return;currentPiece[_0x382389(0xba)](_0x3c3e65,-0x2534+-0x419+-0x6d*-0x61);if(currentPiece[_0x382389(0xbf)]()){currentPiece[_0x382389(0xba)](-_0x3c3e65,-0x7f*0x1+0x2*0x305+-0x2b*0x21),draw();return;}draw(),Math[_0x382389(0x95)]()<-0x17ef+0xa58+-0x31*-0x47+0.3&&setTimeout(()=>{const _0x569316=_0x382389;if(isGameOver||!currentPiece)return;currentPiece[_0x569316(0xba)](_0x3c3e65,-0x1*-0x145f+-0x1*0x16d5+0x276),currentPiece[_0x569316(0xbf)]()&&currentPiece[_0x569316(0xba)](-_0x3c3e65,-0x4c*0x1a+0x497+0x321),draw();},-0x8*0x2e1+0x7b*-0x5+0x19c9);},_0x3a6863);}draw();}function requestGodMode(){const _0xde8be2=_0xac45d6;isTesterMenuOpen?(testerMenu['style'][_0xde8be2(0xce)]=_0xde8be2(0x8c),isTesterMenuOpen=![],pauseGame(![])):(pauseGame(!![]),passwordPrompt[_0xde8be2(0x105)][_0xde8be2(0xce)]=_0xde8be2(0xe4),passwordInput['focus']());}function handlePasswordSubmit(){const _0x3d9434=_0xac45d6;try{const _0x502344=passwordInput['value'][_0x3d9434(0xf6)](),_0x2c3dc0=btoa(_0x502344);if(_0x2c3dc0===GOD_MODE_PASS_B64)passwordPrompt[_0x3d9434(0x105)][_0x3d9434(0xce)]='none',passwordInput[_0x3d9434(0x9b)]='',isTesterMenuOpen=!![],updateTesterMenuState(),testerMenu['style']['display']=_0x3d9434(0xe4);else throw new Error(_0x3d9434(0xf9));}catch(_0x37ba48){passwordInput['value']='',passwordPrompt[_0x3d9434(0xa5)]['add'](_0x3d9434(0xdd)),setTimeout(()=>passwordPrompt['classList'][_0x3d9434(0xa7)](_0x3d9434(0xdd)),0x1c13+0x3*0x3fd+-0x2616);}}function cancelPasswordPrompt(){const _0x2fa9cb=_0xac45d6;passwordPrompt[_0x2fa9cb(0x105)]['display']='none',passwordInput[_0x2fa9cb(0x9b)]='',pauseGame(![]);}function updateTesterMenuState(){const _0x20912a=_0xac45d6;scoreInput[_0x20912a(0x9b)]=Math[_0x20912a(0xc7)](score),testerGhostCheckbox['checked']=isGhostEnabled,testerMusicCheckbox[_0x20912a(0xa9)]=isMusicEnabled,testerEvilCheckbox['checked']=isEvilMode;}document[_0xac45d6(0xfa)](_0xac45d6(0xcc),_0x158872=>{const _0x27c5ad=_0xac45d6;if(_0x158872[_0x27c5ad(0xa1)]===_0x27c5ad(0x8e)){_0x158872[_0x27c5ad(0xe9)](),requestGodMode();return;}if(isGameOver||!currentPiece||isGamePaused)return;_0x158872['preventDefault']();switch(_0x158872[_0x27c5ad(0xa1)]){case _0x27c5ad(0xab):case _0x27c5ad(0xdb):handleMove(-(0x1*0x13af+0x1498*0x1+-0x2846));break;case _0x27c5ad(0xac):case'KeyD':handleMove(0x241d+-0x2d*0xad+0x1*-0x5b3);break;case _0x27c5ad(0x10c):case'KeyS':softDrop();break;case _0x27c5ad(0xc0):case _0x27c5ad(0xa4):currentPiece[_0x27c5ad(0xc9)](),draw();break;case _0x27c5ad(0xf8):isGhostEnabled?softDrop():hardDrop();break;}});let tSX=0x172b+0xa3a+-0x2165,tSY=-0x16dd+-0x3*-0xd3+0x2*0xa32,tSPX=-0xf21*-0x1+-0x61*0x55+0x1114;canvas['addEventListener']('touchstart',_0x12219a=>{const _0x273df5=_0xac45d6;if(isGameOver||!currentPiece||isGamePaused)return;_0x12219a['preventDefault'](),tSX=_0x12219a[_0x273df5(0xe0)][0xc56+-0x2364+0x170e][_0x273df5(0xc4)],tSY=_0x12219a[_0x273df5(0xe0)][-0x7*-0x1cf+-0x1123+-0x47a*-0x1][_0x273df5(0xb5)],tSPX=currentPiece['x'],clearTimeout(iceSlipTimeout);},{'passive':![]}),canvas[_0xac45d6(0xfa)](_0xac45d6(0xd9),_0x28b0ad=>{const _0x213b74=_0xac45d6;if(isGameOver||!currentPiece||isGamePaused)return;_0x28b0ad[_0x213b74(0xe9)]();let _0x37de4e=_0x28b0ad[_0x213b74(0xe0)][-0xa1e+-0x26ed*-0x1+-0x3b*0x7d][_0x213b74(0xc4)]-tSX,_0x3ae4da=Math[_0x213b74(0xf3)](_0x37de4e/BLOCK_SIZE);const _0x5c122c=currentPiece['x'];currentPiece['x']=tSPX+_0x3ae4da;if(currentPiece['collides']())currentPiece['x']=_0x5c122c;draw();},{'passive':![]}),canvas[_0xac45d6(0xfa)](_0xac45d6(0x102),_0x1f6c25=>{const _0x87ffa=_0xac45d6;if(isGameOver||!currentPiece||isGamePaused)return;_0x1f6c25[_0x87ffa(0xe9)]();let _0x3e0cbb=_0x1f6c25['changedTouches'][0x2*-0x684+0x178e+0x1c1*-0x6][_0x87ffa(0xc4)]-tSX,_0x37bb0a=_0x1f6c25[_0x87ffa(0xe0)][-0x6*-0x5ab+0x1d3f*0x1+-0x3f41][_0x87ffa(0xb5)]-tSY;const _0x7489a0=0x11*0x27+0x2428+-0x1*0x26a6,_0x28dc10=0x257*-0xb+-0x1*-0x443+0x15a2,_0x75af1=0x13*-0x1fd+0x111d*0x2+0x157*0x3,_0x523992=0xd0f*-0x1+0x99f*-0x4+-0x17*-0x23f;if(Math['abs'](_0x3e0cbb)<_0x7489a0&&Math['abs'](_0x37bb0a)<_0x7489a0)currentPiece[_0x87ffa(0xc9)](),draw();else{if(Math[_0x87ffa(0xd7)](_0x3e0cbb)>Math['abs'](_0x37bb0a)&&Math[_0x87ffa(0xd7)](_0x3e0cbb)>_0x523992)handleMove(_0x3e0cbb>-0x22c2*0x1+-0x1187*0x2+0x4*0x1174?0xa9c+-0x1*-0x2275+0x38*-0xce:-(-0x93b+0x194a+-0x100e*0x1));else _0x37bb0a>_0x28dc10&&Math['abs'](_0x37bb0a)>Math[_0x87ffa(0xd7)](_0x3e0cbb)&&(!isGhostEnabled&&_0x37bb0a>_0x75af1?hardDrop():softDrop());}}),ghostCheckbox['addEventListener'](_0xac45d6(0xd5),()=>{const _0x22c331=_0xac45d6;isGhostEnabled=ghostCheckbox[_0x22c331(0xa9)],localStorage[_0x22c331(0xad)]('tetrisGhostEnabled',isGhostEnabled);}),musicCheckbox[_0xac45d6(0xfa)]('change',()=>{const _0x3efb4f=_0xac45d6;isMusicEnabled=musicCheckbox[_0x3efb4f(0xa9)],localStorage[_0x3efb4f(0xad)](_0x3efb4f(0xf4),isMusicEnabled),toggleMusic();}),evilCheckbox[_0xac45d6(0xfa)]('change',()=>{const _0x37b691=_0xac45d6;isEvilMode=evilCheckbox[_0x37b691(0xa9)],localStorage[_0x37b691(0xad)](_0x37b691(0x93),isEvilMode);}),restartButton[_0xac45d6(0xfa)](_0xac45d6(0xd4),()=>{clearSaveState(),init();}),window[_0xac45d6(0xfa)](_0xac45d6(0xd2),()=>{saveState(),init();}),window[_0xac45d6(0xfa)](_0xac45d6(0xd3),saveState),submitPasswordButton[_0xac45d6(0xfa)](_0xac45d6(0xd4),handlePasswordSubmit),passwordInput['addEventListener'](_0xac45d6(0xcc),_0x50d3dd=>{const _0x4b420a=_0xac45d6;_0x50d3dd[_0x4b420a(0xe8)]==='Enter'&&(_0x50d3dd['preventDefault'](),handlePasswordSubmit());if(_0x50d3dd[_0x4b420a(0xe8)]===_0x4b420a(0xe7))cancelPasswordPrompt();}),cancelPasswordButton[_0xac45d6(0xfa)](_0xac45d6(0xd4),cancelPasswordPrompt),closeTesterMenu['addEventListener']('click',requestGodMode),setScoreButton[_0xac45d6(0xfa)](_0xac45d6(0xd4),()=>{const _0x1835bd=_0xac45d6;score=parseInt(scoreInput[_0x1835bd(0x9b)])||-0x908*0x4+-0x13ae+0x37ce,checkZone(),draw();}),levelUpButton['addEventListener'](_0xac45d6(0xd4),()=>{const _0x416384=_0xac45d6;score+=0x1d30+-0x496+0x3*-0x6e6,scoreInput[_0x416384(0x9b)]=Math[_0x416384(0xc7)](score),checkZone(),draw();}),zoneSelect[_0xac45d6(0xfa)]('change',()=>{const _0x191c47=_0xac45d6,_0x27c98c=zoneSelect[_0x191c47(0x9b)];_0x27c98c===_0x191c47(0xb6)?(isZoneForced=![],checkZone()):(isZoneForced=!![],currentZone=_0x27c98c,canvas[_0x191c47(0x105)][_0x191c47(0x98)]=currentZone===_0x191c47(0x94)?_0x191c47(0xfe):_0x191c47(0x103)),draw();}),pieceSelect[_0xac45d6(0xfa)]('change',()=>{const _0x3b46d0=_0xac45d6;forcedNextPieceIndex=parseInt(pieceSelect[_0x3b46d0(0x9b)]);}),clearBoardButton[_0xac45d6(0xfa)](_0xac45d6(0xd4),()=>{const _0x27c715=_0xac45d6;board=Array[_0x27c715(0xb0)]({'length':ROWS},()=>Array(COLS)['fill'](-0x2604+-0x1*-0x1855+0xdaf)),draw();}),testerGhostCheckbox[_0xac45d6(0xfa)](_0xac45d6(0xd5),()=>{const _0xe8ccf0=_0xac45d6;isGhostEnabled=testerGhostCheckbox[_0xe8ccf0(0xa9)],ghostCheckbox['checked']=isGhostEnabled,localStorage[_0xe8ccf0(0xad)](_0xe8ccf0(0xd6),isGhostEnabled),draw();}),testerMusicCheckbox[_0xac45d6(0xfa)](_0xac45d6(0xd5),()=>{const _0x1d6c55=_0xac45d6;isMusicEnabled=testerMusicCheckbox[_0x1d6c55(0xa9)],musicCheckbox[_0x1d6c55(0xa9)]=isMusicEnabled,localStorage[_0x1d6c55(0xad)](_0x1d6c55(0xf4),isMusicEnabled),toggleMusic();}),testerEvilCheckbox[_0xac45d6(0xfa)](_0xac45d6(0xd5),()=>{const _0x42cd2f=_0xac45d6;isEvilMode=testerEvilCheckbox[_0x42cd2f(0xa9)],evilCheckbox[_0x42cd2f(0xa9)]=isEvilMode,localStorage[_0x42cd2f(0xad)]('tetrisEvilMode',isEvilMode);}),init();
    </script>
</body>
</html>